{"version":3,"sources":["webpack:///static/js/main.a70d4241.js","webpack:///webpack/bootstrap a5da833cfa635f189b3c","webpack:///./src/common/KeyListener.js","webpack:///./src/world/Train.js","webpack:///./src/world/World.js","webpack:///./~/promise/lib/core.js","webpack:///./config/polyfills.js","webpack:///./src/App.js","webpack:///./src/common/Bumper.js","webpack:///./src/common/Stages.js","webpack:///./src/common/TopScore.js","webpack:///./src/index.js","webpack:///./src/stages/Play.js","webpack:///./src/stages/TopScore.js","webpack:///./src/world/RailPiece.js","webpack:///./src/world/SwitchCursor.js","webpack:///./src/world/WorldGenerator.js","webpack:///./~/chroma-js/chroma.js","webpack:///./~/eases/sine-in.js","webpack:///./~/eases/sine-out.js","webpack:///./~/object-assign/index.js","webpack:///./~/promise/lib/es6-extensions.js","webpack:///./~/promise/lib/rejection-tracking.js","webpack:///./~/promise/~/asap/browser-raw.js","webpack:///(webpack)/buildin/module.js","webpack:///./~/whatwg-fetch/fetch.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","KeyListener","keyCode","press","release","_this","this","code","isDown","isUp","downHandler","event","preventDefault","upHandler","window","addEventListener","removeEventListener","default","_interopRequireDefault","obj","__esModule","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_chromaJs","_chromaJs2","_World","_World2","Train","_PIXI$Container","world","x","y","direction","enemy","getPrototypeOf","speed","INITIAL_SPEED","isCrashed","amEnemy","color","ENEMY_COLOR","PLAYER_COLOR","num","colorDark","brighten","addCart","locomotive","children","PIECE_WIDTH","PIECE_HEIGHT","path","getPath","_this2","pieceX","Math","floor","undefined","onCrash","rotation","min","random","cos","sin","dx","dy","l","CART_DELAY","sqrt","max","atan","SPEED_CHANGE_STEP","getY","y1","y2","is","NaN","t","getAngle","CART_WIDTH2","CART_WIDTH","checkPieceX","round","checkPieceY","rails","isCart","updateRailPiece","skew","abs","CART_MAX_SKEW","sign","CART_HEIGHT2","trains","forEach","train","cart","TRAIN_CRASH_DISTANCE","meCarts","itCarts","hard","setCarts","PI","_this3","setTimeout","removeChild","cartContainer","PIXI","Sprite","cartBottom","Graphics","width","height","CART_HEIGHT","beginFill","drawRect","addChild","cartTop","count","removeCart","from","Container","LEFT","RIGHT","MIN_SPEED","MAX_SPEED","_sineIn","_sineIn2","_sineOut","_sineOut2","_Train","_Train2","_WorldGenerator","_WorldGenerator2","World","generator","displayed","to","map","PIECE_WIDTH2","PIECE_HEIGHT2","clamp","display","worldFrom","worldTo","displayRailsColumn","railIndex","isNaN","parseInt","railPiece","isEmpty","railSprite","displayRailPiece","clear","h","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","toRailIndex","displayRailPieceSegment","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","fromRailIndex","EMPTY_CART_COLOR","lineStyle","fromX","fromY","toX","toY","railEasing","dX","RAIL_COLOR","SUBPIECES","moveTo","TRACK_WIDTH2","lineTo","endFill","TRACK_TIE_WIDTH2","railsOffset","console","log","getTo","getFrom","slice","noop","getThen","then","ex","LAST_ERROR","IS_ERROR","tryCallOne","fn","a","tryCallTwo","b","Promise","_45","_81","_65","_54","doResolve","safeThen","onFulfilled","onRejected","resolve","reject","res","handle","Handler","deferred","_10","push","handleResolved","asap","cb","promise","ret","newValue","finale","bind","_97","reason","_61","enable","assign","_Stages","_Stages2","_Play","_Play2","_TopScore","_TopScore2","_TopScore3","_TopScore4","_Bumper","_Bumper2","_KeyListener","_KeyListener2","App","settings","stages","topScore","bumperClose","run","setuped","gameLoop","bumper","hide","addStage","changeStage","BUMPER","show","setup","renderer","autoDetectRenderer","antialias","document","body","appendChild","view","beforeRender","render","current","requestAnimationFrame","loader","add","load","Bumper","onEnd","video","createElement","src","play","style","Stages","list","name","stage","Error","unload","tick","TopScore","localStorage","JSON","stringify","parse","score","sort","ga","metric5","_App","_App2","app","start","_SwitchCursor","_SwitchCursor2","StagePlay","camOffset","CAMERA_CENTER_PERC","background","BACKGROUND_COLOR","getTrain","switchCursor","cartsText","Text","TextStyle","fontSize","fill","scoreText","crashedText","anchor","visible","crashedTextGuide","quideText","keyUp","keyDown","keyLeft","keyRight","keySpace","move","recalculatePosition","camPos","c1","c2","oldTo","recalculatePath","displayPath","alpha","text","getCartCount","SCORE_SPEED","ENEMY_SPAWN_RATE","ys","keys","enemyTrain","ENEMY_SPAWN_CARTS_PROB","getStage","addScore","restart","close","StageTopScore","myScore","getTop","TOP_COUNT","indexOf","scores","gameByText","gameAtText","RailPiece","isSwitch","switched","onRailAdded","railsCount","preferedDirection","switchTo","switchFrom","SwitchCursor","cursor","cursorX","cursorY","trainX","newCursorX","SIZE","WIDTH","CURSOR_COLOR","drawEllipse","oldFrom","switchPrefered","_RailPiece","_RailPiece2","WorldGenerator","0","generated","initGenarator","half","railsBefore","usableGenerators","railGenerators","filter","railGenerator","canUse","use","EMPTY_CART_PROBABILITY","psin","f","pow","r","generateNext","addRailType","callback","rarity","connectRails","railA","indexA","railB","indexB","addTo","addFrom","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","Color","DEG2RAD","LAB_CONSTANTS","PITHIRD","RAD2DEG","TWOPI","_guess_formats","_guess_formats_sorted","_input","_interpolators","atan2","bezier","blend","blend_f","brewer","burn","chroma","clip_rgb","cmyk2rgb","colors","css2rgb","darken","dodge","each","hcg2rgb","hex2rgb","hsi2rgb","hsl2css","hsl2rgb","hsv2rgb","interpolate","interpolate_hsx","interpolate_lab","interpolate_num","interpolate_rgb","lab2lch","lab2rgb","lab_xyz","lch2lab","lch2rgb","lighten","limit","luminance_x","multiply","normal","num2rgb","overlay","rgb2cmyk","rgb2css","rgb2hcg","rgb2hex","rgb2hsi","rgb2hsl","rgb2hsv","rgb2lab","rgb2lch","rgb2luminance","rgb2num","rgb2temperature","rgb2xyz","rgb_xyz","rnd","screen","temperature2rgb","type","unpack","w3cx11","xyz_lab","xyz_rgb","classToType","len","o","ref","split","toLowerCase","strType","toString","args","rgb","_clipped","_unclipped","arguments","func","ctor","child","result","apply","version","arg","chk","len1","me","mode","w","_rgb","test","warn","hex","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Viridis","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1","results","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflower","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","laserlemon","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrod","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","maroon2","maroon3","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","purple2","purple3","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","g","z","Yn","Xn","Zn","t1","t2","t0","Kn","t3","ref1","lab","concat","I","I0","I1","lab0","lab1","lab2","lab3","ref2","scale","cubehelix","rotations","hue","gamma","lightness","dh","dl","fract","amp","cos_a","sin_a","s","digits","charAt","average","A","cnt","first","xyz","xyz2","splice","get","k","v","rgba","n","u","match","substr","css","channels","hxa","str","Number","hsl","q","ref3","ref4","ref5","delta","hsv","_c","_g","hcg","aa","ab","join","named","L","lch","hcl","reverse","cmyk","gl","col1","col2","interpol","mix","xyz0","xyz1","luminance","lum","cur_lum","eps","max_iter","lm","kelvin","temp","maxTemp","minTemp","temperature","K","contrast","l1","l2","distance","d","sum_sq","deltaE","C","L1","L2","a1","a2","b1","b2","c4","dH2","delA","delB","delC","delL","h1","sc","sh","sl","v1","v2","v3","modechan","channel","set","clipped","amount","darker","brighter","saturate","desaturate","premultiply","bottom","top","c0","out","analyze","data","val","MAX_VALUE","sum","values","domain","limits","positions","_classes","_colorCache","_colors","_correctLightness","_domain","_fixed","_max","_min","_mode","_nacol","_out","_padding","_pos","_spread","_useCache","classifyValue","getClass","getColor","resetCache","setColors","tmap","col","maxc","minc","bypassMap","classes","_m","range","_o","spread","correctLightness","L0","L_actual","L_diff","L_ideal","pol","padding","numColors","dd","dm","samples","cache","scales","cool","hot","visit","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","assignments","best","centroids","cluster","clusterSizes","dist","j","kClusters","max_log","min_log","mindist","nb_iters","newCentroids","pb","pr","ref10","ref11","ref12","ref13","ref14","ref6","ref7","ref8","ref9","repeat","tmpKMeansBreaks","LOG10E","Array","acos","hsi","hue0","hue1","lbv","lbv0","lbv1","sat","sat0","sat1","n1","n2","sineIn","sineOut","toObject","shouldUseNative","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","test3","letter","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","source","symbols","valuePromise","TRUE","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","all","arr","remaining","race","disable","enabled","options","onUnhandled","allRejections","matchWhitelist","rejections","error","whitelist","DEFAULT_WHITELIST","displayId","logged","logError","onHandled","_72","clearTimeout","timeout","errStr","stack","line","some","cls","RangeError","global","rawAsap","task","queue","requestFlush","flushing","flush","index","currentIndex","capacity","scan","newLength","makeRequestCallFromMutationObserver","toggle","observer","BrowserMutationObserver","node","createTextNode","observe","characterData","makeRequestCallFromTimer","handleTimer","timeoutHandle","clearInterval","intervalHandle","setInterval","scope","MutationObserver","WebKitMutationObserver","webpackPolyfill","deprecate","paths","normalizeName","normalizeValue","iteratorFor","items","shift","support","iterable","Headers","headers","append","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","Uint8Array","chars","bufferClone","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","arrayBuffer","isDataView","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","rejected","decode","json","normalizeMethod","method","upcased","toUpperCase","methods","Request","input","url","credentials","referrer","form","trim","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","parts","Response","bodyInit","status","ok","statusText","fetch","e","viewClasses","DataView","isView","oldValue","has","thisArg","entries","clone","response","redirectStatuses","redirect","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill"],"mappings":"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","file":"static/js/main.a70d4241.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/trainwreck/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(5);\n\tmodule.exports = __webpack_require__(10);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar KeyListener = function () {\n\t\tfunction KeyListener(keyCode, press, release) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, KeyListener);\n\t\n\t\t\tthis.code = keyCode;\n\t\t\tthis.isDown = false;\n\t\t\tthis.isUp = true;\n\t\t\tthis.press = press;\n\t\t\tthis.release = release;\n\t\n\t\t\tthis.downHandler = function (event) {\n\t\t\t\tif (event.keyCode === _this.code) {\n\t\t\t\t\tif (_this.isUp && _this.press) _this.press();\n\t\t\t\t\t_this.isDown = true;\n\t\t\t\t\t_this.isUp = false;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.upHandler = function (event) {\n\t\t\t\tif (event.keyCode === _this.code) {\n\t\t\t\t\tif (_this.isDown && _this.release) _this.release();\n\t\t\t\t\t_this.isDown = false;\n\t\t\t\t\t_this.isUp = true;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\twindow.addEventListener(\"keydown\", this.downHandler, false);\n\t\t\twindow.addEventListener(\"keyup\", this.upHandler, false);\n\t\t}\n\t\n\t\t_createClass(KeyListener, [{\n\t\t\tkey: \"close\",\n\t\t\tvalue: function close() {\n\t\t\t\twindow.removeEventListener(\"keydown\", this.downHandler);\n\t\t\t\twindow.removeEventListener(\"keyup\", this.upHandler);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn KeyListener;\n\t}();\n\t\n\texports.default = KeyListener;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _chromaJs = __webpack_require__(16);\n\t\n\tvar _chromaJs2 = _interopRequireDefault(_chromaJs);\n\t\n\tvar _World = __webpack_require__(3);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Train = function (_PIXI$Container) {\n\t\t_inherits(Train, _PIXI$Container);\n\t\n\t\tfunction Train(world, x, y, direction, enemy) {\n\t\t\t_classCallCheck(this, Train);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (Train.__proto__ || Object.getPrototypeOf(Train)).call(this));\n\t\n\t\t\t_this.world = world;\n\t\t\t_this.direction = direction;\n\t\t\t_this.speed = Train.INITIAL_SPEED;\n\t\t\t_this.isCrashed = false;\n\t\n\t\t\t_this.amEnemy = enemy;\n\t\t\tvar color;\n\t\t\tif (enemy) {\n\t\t\t\tcolor = Train.ENEMY_COLOR;\n\t\t\t} else {\n\t\t\t\tcolor = Train.PLAYER_COLOR;\n\t\t\t}\n\t\t\t_this.color = (0, _chromaJs2.default)(color).num();\n\t\t\t_this.colorDark = (0, _chromaJs2.default)(color).brighten(1).num();\n\t\n\t\t\t_this.addCart();\n\t\n\t\t\t_this.locomotive = _this.children[0];\n\t\t\t_this.locomotive.x = x * _World2.default.PIECE_WIDTH + _World2.default.PIECE_WIDTH * _this.direction;\n\t\t\t_this.locomotive.y = y * _World2.default.PIECE_HEIGHT;\n\t\n\t\t\t_this.path = _this.world.getPath(x, y, _this.direction);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Train, [{\n\t\t\tkey: 'move',\n\t\t\tvalue: function move() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar pieceX = Math.floor(this.locomotive.x / _World2.default.PIECE_WIDTH);\n\t\n\t\t\t\tif (!this.isCrashed && this.path[pieceX] !== undefined) {\n\t\n\t\t\t\t\tif (this.speed > Train.INITIAL_SPEED) {\n\t\t\t\t\t\tthis.speed -= Train.SPEED_CHANGE_STEP / 4;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tvar getY = function getY(x) {\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar y1 = _World2.default.PIECE_HEIGHT * _this2.path[Math.floor(x / _World2.default.PIECE_WIDTH)];\n\t\t\t\t\t\tvar y2 = _World2.default.PIECE_HEIGHT * _this2.path[Math.floor(x / _World2.default.PIECE_WIDTH) + 1];\n\t\t\t\t\t\tif (Object.is(y2, NaN)) {\n\t\t\t\t\t\t\ty2 = y1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar t = x % _World2.default.PIECE_WIDTH / _World2.default.PIECE_WIDTH;\n\t\t\t\t\t\treturn y1 + t * (y2 - y1);\n\t\t\t\t\t};\n\t\t\t\t\tvar getAngle = function getAngle(x) {\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar y1 = getY(x - Train.CART_WIDTH2);\n\t\t\t\t\t\tvar y2 = getY(x + Train.CART_WIDTH2);\n\t\t\t\t\t\treturn Math.atan((y2 - y1) / Train.CART_WIDTH);\n\t\t\t\t\t};\n\t\n\t\t\t\t\t//move locomotive\n\t\t\t\t\tthis.locomotive.x += this.direction * this.speed;\n\t\t\t\t\tthis.locomotive.y = getY(this.locomotive.x);\n\t\t\t\t\tthis.locomotive.rotation = getAngle(this.locomotive.x);\n\t\n\t\t\t\t\t//check for cart on rail\n\t\t\t\t\tvar checkPieceX = Math.round(this.locomotive.x / _World2.default.PIECE_WIDTH);\n\t\t\t\t\tvar checkPieceY = this.path[checkPieceX];\n\t\t\t\t\tif (this.world.rails[checkPieceX] && this.world.rails[checkPieceX][checkPieceY] && this.world.rails[checkPieceX][checkPieceY].isCart) {\n\t\t\t\t\t\tthis.addCart();\n\t\t\t\t\t\tthis.world.rails[checkPieceX][checkPieceY].isCart = false;\n\t\t\t\t\t\tthis.world.updateRailPiece(checkPieceX, checkPieceY);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//move other carts\n\t\t\t\t\tfor (var i = 1; i < this.children.length; i++) {\n\t\t\t\t\t\tvar dx = this.children[i].x - this.children[i - 1].x;\n\t\t\t\t\t\tvar dy = this.children[i].y - this.children[i - 1].y;\n\t\t\t\t\t\tvar l = Train.CART_DELAY / Math.sqrt(dx * dx + dy * dy);\n\t\t\t\t\t\tdx *= l;\n\t\t\t\t\t\tdy *= l;\n\t\t\t\t\t\tthis.children[i].x = this.children[i - 1].x + dx;\n\t\t\t\t\t\tthis.children[i].y = this.children[i - 1].y + dy;\n\t\t\t\t\t\tthis.children[i].rotation = getAngle(this.children[i].x);\n\t\n\t\t\t\t\t\tvar skew = this.children[i].y - getY(this.children[i].x);\n\t\n\t\t\t\t\t\tif (Math.abs(skew) > Train.CART_MAX_SKEW) {\n\t\t\t\t\t\t\tthis.children[i].y = getY(this.children[i].x) + Math.sign(skew) * Train.CART_MAX_SKEW;\n\t\t\t\t\t\t\tskew = Math.sign(skew) * Train.CART_MAX_SKEW;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tthis.children[i].children[0].y = -Train.CART_HEIGHT2 - skew;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//test other train collision\n\t\t\t\t\tthis.world.trains.children.forEach(function (train) {\n\t\t\t\t\t\tif (train === _this2) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (train.isCrashed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_this2.amEnemy === train.amEnemy) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrain.children.forEach(function (cart) {\n\t\t\t\t\t\t\tvar dx = cart.x - _this2.locomotive.x;\n\t\t\t\t\t\t\tvar dy = cart.y - _this2.locomotive.y;\n\t\t\t\t\t\t\tif (Math.sqrt(dx * dx + dy * dy) < (_this2.amEnemy ? Train.TRAIN_CRASH_DISTANCE * 0.81 : Train.TRAIN_CRASH_DISTANCE)) {\n\t\n\t\t\t\t\t\t\t\tvar meCarts = _this2.children.length - train.children.length;\n\t\t\t\t\t\t\t\tvar itCarts = train.children.length - _this2.children.length;\n\t\n\t\t\t\t\t\t\t\tvar hard = meCarts < 1 && itCarts >= 1 || meCarts >= 1 && itCarts < 1;\n\t\n\t\t\t\t\t\t\t\tif (meCarts < 1) {\n\t\t\t\t\t\t\t\t\t_this2.setCarts(1);\n\t\t\t\t\t\t\t\t\t_this2.onCrash();\n\t\t\t\t\t\t\t\t\t_this2.speed = Math.max(_this2.speed, train.speed);\n\t\t\t\t\t\t\t\t\tif (hard) {\n\t\t\t\t\t\t\t\t\t\t_this2.locomotive.rotation += Math.min(1, _this2.speed) * Math.PI / 4;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t_this2.speed *= -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t_this2.setCarts(meCarts);\n\t\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t\tif (itCarts < 1) {\n\t\t\t\t\t\t\t\t\ttrain.setCarts(1);\n\t\t\t\t\t\t\t\t\ttrain.onCrash();\n\t\t\t\t\t\t\t\t\ttrain.speed = Math.max(_this2.speed, train.speed);\n\t\t\t\t\t\t\t\t\tif (hard) {\n\t\t\t\t\t\t\t\t\t\ttrain.locomotive.rotation += Math.min(1, train.speed) * -Math.PI / 4;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\ttrain.speed *= -1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttrain.setCarts(itCarts);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (!this.isCrashed) {\n\t\t\t\t\t\tthis.onCrash();\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//move locomotive\n\t\t\t\t\tthis.speed *= 0.92;\n\t\t\t\t\tthis.locomotive.rotation += Math.min(3, this.speed) * (Math.random() - 0.5) * 0.2;\n\t\t\t\t\tthis.locomotive.x += this.speed * Math.cos(this.locomotive.rotation);\n\t\t\t\t\tthis.locomotive.y += this.speed * Math.sin(this.locomotive.rotation);\n\t\n\t\t\t\t\t//move other carts\n\t\t\t\t\tfor (var _i = 1; _i < this.children.length; _i++) {\n\t\t\t\t\t\tvar _dx = this.children[_i].x - this.children[_i - 1].x;\n\t\t\t\t\t\tvar _dy = this.children[_i].y - this.children[_i - 1].y;\n\t\t\t\t\t\tvar _l = Train.CART_DELAY / Math.sqrt(_dx * _dx + _dy * _dy);\n\t\t\t\t\t\t_dx *= _l;\n\t\t\t\t\t\t_dy *= _l;\n\t\t\t\t\t\tthis.children[_i].x = this.children[_i - 1].x + _dx;\n\t\t\t\t\t\tthis.children[_i].y = this.children[_i - 1].y + _dy;\n\t\t\t\t\t\tthis.children[_i].rotation = Math.min(Math.max(Math.atan(_dy / _dx), -1), 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onCrash',\n\t\t\tvalue: function onCrash() {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tif (this.isCrashed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tthis.isCrashed = true;\n\t\n\t\t\t\tif (this.amEnemy) {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t_this3.world.trains.removeChild(_this3);\n\t\t\t\t\t}, 3000);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addCart',\n\t\t\tvalue: function addCart() {\n\t\t\t\tvar cartContainer = new PIXI.Sprite();\n\t\n\t\t\t\tvar cartBottom = new PIXI.Graphics();\n\t\t\t\tcartBottom.width = Train.CART_WIDTH;\n\t\t\t\tcartBottom.height = Train.CART_HEIGHT;\n\t\t\t\tcartBottom.beginFill(this.colorDark);\n\t\t\t\tcartBottom.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\n\t\n\t\t\t\tcartBottom.x = -Train.CART_WIDTH2;\n\t\t\t\tcartBottom.y = -Train.CART_HEIGHT2;\n\t\n\t\t\t\tcartContainer.addChild(cartBottom);\n\t\n\t\t\t\tvar cartTop = new PIXI.Graphics();\n\t\t\t\tcartTop.width = Train.CART_WIDTH;\n\t\t\t\tcartTop.height = Train.CART_HEIGHT;\n\t\t\t\tcartTop.beginFill(this.color);\n\t\t\t\tcartTop.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\n\t\n\t\t\t\tcartTop.x = -Train.CART_WIDTH2;\n\t\t\t\tcartTop.y = -Train.CART_HEIGHT2;\n\t\n\t\t\t\tcartContainer.addChild(cartTop);\n\t\n\t\t\t\tcartContainer.x = -9999999 * this.direction;\n\t\t\t\tcartContainer.y = 0;\n\t\n\t\t\t\tthis.addChild(cartContainer);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeCart',\n\t\t\tvalue: function removeCart() {\n\t\t\t\tthis.removeChild(this.children[this.children.length - 1]);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setCarts',\n\t\t\tvalue: function setCarts(count) {\n\t\t\t\twhile (this.children.length < count) {\n\t\t\t\t\tthis.addCart();\n\t\t\t\t}\n\t\t\t\twhile (this.children.length > count) {\n\t\t\t\t\tthis.removeCart();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'recalculatePath',\n\t\t\tvalue: function recalculatePath(from) {\n\t\t\t\tif (from === undefined) {\n\t\t\t\t\tfrom = Math.floor(this.children[0].x / _World2.default.PIECE_WIDTH);\n\t\t\t\t}\n\t\t\t\tthis.world.getPath(from, this.path[from], this.direction, this.path);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getCartCount',\n\t\t\tvalue: function getCartCount() {\n\t\t\t\treturn this.children.length;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Train;\n\t}(PIXI.Container);\n\t\n\texports.default = Train;\n\t\n\t\n\tTrain.LEFT = -1;\n\tTrain.RIGHT = 1;\n\t\n\tTrain.CART_WIDTH = 30;\n\tTrain.CART_HEIGHT = 10;\n\tTrain.CART_WIDTH2 = Train.CART_WIDTH / 2;\n\tTrain.CART_HEIGHT2 = Train.CART_HEIGHT / 2;\n\tTrain.CART_DELAY = 32;\n\tTrain.CART_MAX_SKEW = Train.CART_HEIGHT / 3;\n\tTrain.INITIAL_SPEED = 1.0;\n\tTrain.SPEED_CHANGE_STEP = 0.01;\n\tTrain.MIN_SPEED = 0;\n\tTrain.MAX_SPEED = undefined;\n\tTrain.TRAIN_CRASH_DISTANCE = Train.CART_WIDTH / 3;\n\t\n\tTrain.ENEMY_COLOR = '#247192';\n\tTrain.PLAYER_COLOR = '#9FBC12';\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _sineIn = __webpack_require__(17);\n\t\n\tvar _sineIn2 = _interopRequireDefault(_sineIn);\n\t\n\tvar _sineOut = __webpack_require__(18);\n\t\n\tvar _sineOut2 = _interopRequireDefault(_sineOut);\n\t\n\tvar _Train = __webpack_require__(2);\n\t\n\tvar _Train2 = _interopRequireDefault(_Train);\n\t\n\tvar _WorldGenerator = __webpack_require__(15);\n\t\n\tvar _WorldGenerator2 = _interopRequireDefault(_WorldGenerator);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar World = function (_PIXI$Container) {\n\t\t_inherits(World, _PIXI$Container);\n\t\n\t\tfunction World() {\n\t\t\t_classCallCheck(this, World);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (World.__proto__ || Object.getPrototypeOf(World)).call(this));\n\t\n\t\t\t_this.generator = new _WorldGenerator2.default();\n\t\t\t_this.rails = _this.generator.rails;\n\t\n\t\t\t_this.displayed = {\n\t\t\t\tfrom: 0,\n\t\t\t\tto: 0\n\t\t\t};\n\t\n\t\t\t_this.map = new PIXI.Container();\n\t\t\t_this.addChild(_this.map);\n\t\n\t\t\t_this.trains = new PIXI.Container();\n\t\t\t_this.trains.x = World.PIECE_WIDTH2;\n\t\t\t_this.trains.y = World.PIECE_HEIGHT2;\n\t\t\t_this.addChild(_this.trains);\n\t\n\t\t\t_this.clamp(0, 60);\n\t\n\t\t\t_this.trains.addChild(new _Train2.default(_this, 0, 0, _Train2.default.RIGHT, false));\n\t\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(World, [{\n\t\t\tkey: 'clamp',\n\t\t\tvalue: function clamp(from, to) {\n\t\t\t\tthis.generator.clamp(from, to);\n\t\t\t\tthis.display(from, to);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'display',\n\t\t\tvalue: function display(from, to) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tif (from === undefined) {\n\t\t\t\t\tfrom = 0;\n\t\t\t\t}\n\t\t\t\tif (to === undefined) {\n\t\t\t\t\tto = this.rails.length;\n\t\t\t\t}\n\t\n\t\t\t\t//remove before from\n\t\t\t\tvar worldFrom = World.PIECE_WIDTH * from;\n\t\t\t\tvar worldTo = World.PIECE_WIDTH * to;\n\t\t\t\tfor (var i = this.map.children.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (this.map.children[i].x < worldFrom || this.map.children[i].x > worldTo) {\n\t\t\t\t\t\tthis.map.removeChild(this.map.children[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar displayRailsColumn = function displayRailsColumn(rails) {\n\t\t\t\t\tfor (var railIndex in rails) {\n\t\t\t\t\t\tif (!isNaN(parseInt(railIndex, 10))) {\n\t\t\t\t\t\t\tvar railPiece = rails[railIndex];\n\t\n\t\t\t\t\t\t\tif (!railPiece.isEmpty) {\n\t\t\t\t\t\t\t\tvar railSprite = new PIXI.Graphics();\n\t\n\t\t\t\t\t\t\t\trailSprite.x = i * World.PIECE_WIDTH;\n\t\t\t\t\t\t\t\trailSprite.y = railIndex * World.PIECE_HEIGHT;\n\t\t\t\t\t\t\t\trailSprite.width = World.PIECE_WIDTH;\n\t\t\t\t\t\t\t\trailSprite.height = World.PIECE_HEIGHT;\n\t\n\t\t\t\t\t\t\t\t_this2.displayRailPiece(railSprite, railPiece, railIndex);\n\t\n\t\t\t\t\t\t\t\t_this2.map.addChild(railSprite);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t//add rails\n\t\t\t\tfor (i = this.displayed.to; i < to; i++) {\n\t\t\t\t\tdisplayRailsColumn(this.rails[i]);\n\t\t\t\t}\n\t\t\t\tfor (i = from; i < this.displayed.from; i++) {\n\t\t\t\t\tdisplayRailsColumn(this.rails[i]);\n\t\t\t\t}\n\t\n\t\t\t\tthis.displayed.from = from;\n\t\t\t\tthis.displayed.to = to;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'displayRailPiece',\n\t\t\tvalue: function displayRailPiece(railSprite, railPiece, railIndex) {\n\t\t\t\trailSprite.clear();\n\t\n\t\t\t\tvar h;\n\t\n\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\tvar _didIteratorError = false;\n\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator = railPiece.to[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tvar toRailIndex = _step.value;\n\t\n\t\t\t\t\t\th = toRailIndex - railIndex;\n\t\t\t\t\t\tthis.displayRailPieceSegment(railSprite, World.PIECE_WIDTH2, World.PIECE_HEIGHT2, World.PIECE_WIDTH, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2, _sineIn2.default);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator2 = railPiece.from[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\tvar fromRailIndex = _step2.value;\n\t\n\t\t\t\t\t\th = fromRailIndex - railIndex;\n\t\t\t\t\t\tthis.displayRailPieceSegment(railSprite, 0, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2, World.PIECE_WIDTH2, World.PIECE_HEIGHT2, _sineOut2.default);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (railPiece.isCart) {\n\t\t\t\t\trailSprite.beginFill(World.EMPTY_CART_COLOR);\n\t\t\t\t\trailSprite.lineStyle();\n\t\t\t\t\trailSprite.drawRect(World.PIECE_WIDTH2 - _Train2.default.CART_WIDTH2, World.PIECE_HEIGHT2 - _Train2.default.CART_HEIGHT2, _Train2.default.CART_WIDTH, _Train2.default.CART_HEIGHT);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'displayRailPieceSegment',\n\t\t\tvalue: function displayRailPieceSegment(railSprite, fromX, fromY, toX, toY, railEasing) {\n\t\t\t\tvar dX = toX - fromX;\n\t\n\t\t\t\t//top rail\n\t\t\t\trailSprite.lineStyle(1, World.RAIL_COLOR);\n\t\t\t\tfor (var i = 0; i < World.SUBPIECES; i++) {\n\t\t\t\t\trailSprite.moveTo(fromX + (i - 1) / World.SUBPIECES * dX, fromY + railEasing((i - 1) / World.SUBPIECES) * (toY - fromY) - World.TRACK_WIDTH2);\n\t\t\t\t\trailSprite.lineTo(fromX + i / World.SUBPIECES * dX, fromY + railEasing(i / World.SUBPIECES) * (toY - fromY) - World.TRACK_WIDTH2);\n\t\t\t\t}\n\t\t\t\trailSprite.endFill();\n\t\n\t\t\t\t//bottom rail\n\t\t\t\trailSprite.lineStyle(1, World.RAIL_COLOR);\n\t\t\t\tfor (var _i = 0; _i < World.SUBPIECES; _i++) {\n\t\t\t\t\trailSprite.moveTo(fromX + (_i - 1) / World.SUBPIECES * dX, fromY + railEasing((_i - 1) / World.SUBPIECES) * (toY - fromY) + World.TRACK_WIDTH2);\n\t\t\t\t\trailSprite.lineTo(fromX + _i / World.SUBPIECES * dX, fromY + railEasing(_i / World.SUBPIECES) * (toY - fromY) + World.TRACK_WIDTH2);\n\t\t\t\t}\n\t\t\t\trailSprite.endFill();\n\t\n\t\t\t\t//railroad tie\n\t\t\t\trailSprite.lineStyle(1, World.RAIL_COLOR);\n\t\t\t\tfor (var _i2 = 0; _i2 < World.SUBPIECES; _i2++) {\n\t\t\t\t\trailSprite.moveTo(fromX + _i2 / World.SUBPIECES * dX, fromY + railEasing(_i2 / World.SUBPIECES) * (toY - fromY) - World.TRACK_TIE_WIDTH2);\n\t\t\t\t\trailSprite.lineTo(fromX + _i2 / World.SUBPIECES * dX, fromY + railEasing(_i2 / World.SUBPIECES) * (toY - fromY) + World.TRACK_TIE_WIDTH2);\n\t\t\t\t}\n\t\t\t\trailSprite.endFill();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'updateRailPiece',\n\t\t\tvalue: function updateRailPiece(railsOffset, railIndex) {\n\t\t\t\tvar x = railsOffset * World.PIECE_WIDTH;\n\t\t\t\tvar y = railIndex * World.PIECE_HEIGHT;\n\t\t\t\tfor (var i = 0; i < this.map.children.length; i++) {\n\t\t\t\t\tif (this.map.children[i].x === x && this.map.children[i].y === y) {\n\t\t\t\t\t\tthis.displayRailPiece(this.map.children[i], this.rails[railsOffset][railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getPath',\n\t\t\tvalue: function getPath(railsOffset, railIndex, direction, path) {\n\t\t\t\tif (!path) {\n\t\t\t\t\tpath = [];\n\t\t\t\t}\n\t\t\t\tpath[railsOffset] = railIndex;\n\t\t\t\twhile (railsOffset < this.rails.length) {\n\t\t\t\t\tvar railPiece = this.rails[railsOffset][railIndex];\n\t\t\t\t\tif (!railPiece) {\n\t\t\t\t\t\tconsole.log(\"Wrong path!\", railsOffset, railIndex);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tvar next = direction === 1 ? railPiece.getTo() : railPiece.getFrom();\n\t\n\t\t\t\t\tif (next === undefined) {\n\t\t\t\t\t\tbreak; //EOW\n\t\t\t\t\t}\n\t\n\t\t\t\t\trailsOffset += direction;\n\t\n\t\t\t\t\tif (path[railsOffset] === next) {\n\t\t\t\t\t\tbreak; //already same path\n\t\t\t\t\t}\n\t\n\t\t\t\t\tpath[railsOffset] = next;\n\t\t\t\t\trailIndex = next;\n\t\t\t\t}\n\t\t\t\treturn path;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getTrain',\n\t\t\tvalue: function getTrain() {\n\t\t\t\treturn this.trains.children[0];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getEnemyTrains',\n\t\t\tvalue: function getEnemyTrains() {\n\t\t\t\treturn this.trains.children.slice(1, this.trains.children.length);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn World;\n\t}(PIXI.Container);\n\t\n\texports.default = World;\n\t\n\t\n\tWorld.PIECE_WIDTH = 88;\n\tWorld.PIECE_HEIGHT = 16;\n\tWorld.PIECE_WIDTH2 = World.PIECE_WIDTH / 2;\n\tWorld.PIECE_HEIGHT2 = World.PIECE_HEIGHT / 2;\n\t\n\tWorld.SUBPIECES = 16;\n\tWorld.TRACK_WIDTH2 = 2;\n\tWorld.TRACK_TIE_WIDTH2 = 3;\n\t\n\tWorld.EMPTY_CART_COLOR = 0xE1303C;\n\tWorld.RAIL_COLOR = 0xE1303C;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar asap = __webpack_require__(22);\n\t\n\tfunction noop() {}\n\t\n\t// States:\n\t//\n\t// 0 - pending\n\t// 1 - fulfilled with _value\n\t// 2 - rejected with _value\n\t// 3 - adopted the state of another promise, _value\n\t//\n\t// once the state is no longer pending (0) it is immutable\n\t\n\t// All `_` prefixed properties will be reduced to `_{random number}`\n\t// at build time to obfuscate them and discourage their use.\n\t// We don't use symbols or Object.defineProperty to fully hide them\n\t// because the performance isn't good enough.\n\t\n\t\n\t// to avoid using try/catch inside critical functions, we\n\t// extract them to here.\n\tvar LAST_ERROR = null;\n\tvar IS_ERROR = {};\n\tfunction getThen(obj) {\n\t  try {\n\t    return obj.then;\n\t  } catch (ex) {\n\t    LAST_ERROR = ex;\n\t    return IS_ERROR;\n\t  }\n\t}\n\t\n\tfunction tryCallOne(fn, a) {\n\t  try {\n\t    return fn(a);\n\t  } catch (ex) {\n\t    LAST_ERROR = ex;\n\t    return IS_ERROR;\n\t  }\n\t}\n\tfunction tryCallTwo(fn, a, b) {\n\t  try {\n\t    fn(a, b);\n\t  } catch (ex) {\n\t    LAST_ERROR = ex;\n\t    return IS_ERROR;\n\t  }\n\t}\n\t\n\tmodule.exports = Promise;\n\t\n\tfunction Promise(fn) {\n\t  if (typeof this !== 'object') {\n\t    throw new TypeError('Promises must be constructed via new');\n\t  }\n\t  if (typeof fn !== 'function') {\n\t    throw new TypeError('not a function');\n\t  }\n\t  this._45 = 0;\n\t  this._81 = 0;\n\t  this._65 = null;\n\t  this._54 = null;\n\t  if (fn === noop) return;\n\t  doResolve(fn, this);\n\t}\n\tPromise._10 = null;\n\tPromise._97 = null;\n\tPromise._61 = noop;\n\t\n\tPromise.prototype.then = function(onFulfilled, onRejected) {\n\t  if (this.constructor !== Promise) {\n\t    return safeThen(this, onFulfilled, onRejected);\n\t  }\n\t  var res = new Promise(noop);\n\t  handle(this, new Handler(onFulfilled, onRejected, res));\n\t  return res;\n\t};\n\t\n\tfunction safeThen(self, onFulfilled, onRejected) {\n\t  return new self.constructor(function (resolve, reject) {\n\t    var res = new Promise(noop);\n\t    res.then(resolve, reject);\n\t    handle(self, new Handler(onFulfilled, onRejected, res));\n\t  });\n\t};\n\tfunction handle(self, deferred) {\n\t  while (self._81 === 3) {\n\t    self = self._65;\n\t  }\n\t  if (Promise._10) {\n\t    Promise._10(self);\n\t  }\n\t  if (self._81 === 0) {\n\t    if (self._45 === 0) {\n\t      self._45 = 1;\n\t      self._54 = deferred;\n\t      return;\n\t    }\n\t    if (self._45 === 1) {\n\t      self._45 = 2;\n\t      self._54 = [self._54, deferred];\n\t      return;\n\t    }\n\t    self._54.push(deferred);\n\t    return;\n\t  }\n\t  handleResolved(self, deferred);\n\t}\n\t\n\tfunction handleResolved(self, deferred) {\n\t  asap(function() {\n\t    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n\t    if (cb === null) {\n\t      if (self._81 === 1) {\n\t        resolve(deferred.promise, self._65);\n\t      } else {\n\t        reject(deferred.promise, self._65);\n\t      }\n\t      return;\n\t    }\n\t    var ret = tryCallOne(cb, self._65);\n\t    if (ret === IS_ERROR) {\n\t      reject(deferred.promise, LAST_ERROR);\n\t    } else {\n\t      resolve(deferred.promise, ret);\n\t    }\n\t  });\n\t}\n\tfunction resolve(self, newValue) {\n\t  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n\t  if (newValue === self) {\n\t    return reject(\n\t      self,\n\t      new TypeError('A promise cannot be resolved with itself.')\n\t    );\n\t  }\n\t  if (\n\t    newValue &&\n\t    (typeof newValue === 'object' || typeof newValue === 'function')\n\t  ) {\n\t    var then = getThen(newValue);\n\t    if (then === IS_ERROR) {\n\t      return reject(self, LAST_ERROR);\n\t    }\n\t    if (\n\t      then === self.then &&\n\t      newValue instanceof Promise\n\t    ) {\n\t      self._81 = 3;\n\t      self._65 = newValue;\n\t      finale(self);\n\t      return;\n\t    } else if (typeof then === 'function') {\n\t      doResolve(then.bind(newValue), self);\n\t      return;\n\t    }\n\t  }\n\t  self._81 = 1;\n\t  self._65 = newValue;\n\t  finale(self);\n\t}\n\t\n\tfunction reject(self, newValue) {\n\t  self._81 = 2;\n\t  self._65 = newValue;\n\t  if (Promise._97) {\n\t    Promise._97(self, newValue);\n\t  }\n\t  finale(self);\n\t}\n\tfunction finale(self) {\n\t  if (self._45 === 1) {\n\t    handle(self, self._54);\n\t    self._54 = null;\n\t  }\n\t  if (self._45 === 2) {\n\t    for (var i = 0; i < self._54.length; i++) {\n\t      handle(self, self._54[i]);\n\t    }\n\t    self._54 = null;\n\t  }\n\t}\n\t\n\tfunction Handler(onFulfilled, onRejected, promise){\n\t  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n\t  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n\t  this.promise = promise;\n\t}\n\t\n\t/**\n\t * Take a potentially misbehaving resolver function and make sure\n\t * onFulfilled and onRejected are only called once.\n\t *\n\t * Makes no guarantees about asynchrony.\n\t */\n\tfunction doResolve(fn, promise) {\n\t  var done = false;\n\t  var res = tryCallTwo(fn, function (value) {\n\t    if (done) return;\n\t    done = true;\n\t    resolve(promise, value);\n\t  }, function (reason) {\n\t    if (done) return;\n\t    done = true;\n\t    reject(promise, reason);\n\t  })\n\t  if (!done && res === IS_ERROR) {\n\t    done = true;\n\t    reject(promise, LAST_ERROR);\n\t  }\n\t}\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tif (typeof Promise === 'undefined') {\n\t  // Rejection tracking prevents a common issue where React gets into an\n\t  // inconsistent state due to an error, but it gets swallowed by a Promise,\n\t  // and the user has no idea what causes React's erratic future behavior.\n\t  __webpack_require__(21).enable();\n\t  window.Promise = __webpack_require__(20);\n\t}\n\t\n\t// fetch() polyfill for making API calls.\n\t__webpack_require__(24);\n\t\n\t// Object.assign() is commonly used with React.\n\t// It will use the native implementation if it's present and isn't buggy.\n\tObject.assign = __webpack_require__(19);\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Stages = __webpack_require__(8);\n\t\n\tvar _Stages2 = _interopRequireDefault(_Stages);\n\t\n\tvar _Play = __webpack_require__(11);\n\t\n\tvar _Play2 = _interopRequireDefault(_Play);\n\t\n\tvar _TopScore = __webpack_require__(12);\n\t\n\tvar _TopScore2 = _interopRequireDefault(_TopScore);\n\t\n\tvar _TopScore3 = __webpack_require__(9);\n\t\n\tvar _TopScore4 = _interopRequireDefault(_TopScore3);\n\t\n\tvar _Bumper = __webpack_require__(7);\n\t\n\tvar _Bumper2 = _interopRequireDefault(_Bumper);\n\t\n\tvar _KeyListener = __webpack_require__(1);\n\t\n\tvar _KeyListener2 = _interopRequireDefault(_KeyListener);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar App = function () {\n\t\tfunction App(settings) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, App);\n\t\n\t\t\tthis.settings = settings;\n\t\t\tthis.stages = new _Stages2.default();\n\t\t\tthis.topScore = new _TopScore4.default();\n\t\n\t\t\tvar bumperClose = function bumperClose() {\n\t\t\t\tif (_this.run) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_this.run = true;\n\t\t\t\tif (_this.setuped) {\n\t\t\t\t\t_this.gameLoop();\n\t\t\t\t}\n\t\t\t\t_this.bumper.hide();\n\t\t\t};\n\t\n\t\t\tthis.bumper = new _Bumper2.default(bumperClose);\n\t\n\t\t\tthis.stages.addStage(\"play\", new _Play2.default(this.stages, settings));\n\t\t\tthis.stages.addStage(\"topScore\", new _TopScore2.default(this.stages, this.topScore, settings));\n\t\t\tthis.stages.changeStage(\"play\");\n\t\n\t\t\tif (App.BUMPER) {\n\t\t\t\tthis.bumper.show();\n\t\t\t} else {\n\t\t\t\tthis.run = true;\n\t\t\t}\n\t\n\t\t\tnew _KeyListener2.default(32, bumperClose);\n\t\t}\n\t\n\t\t_createClass(App, [{\n\t\t\tkey: 'start',\n\t\t\tvalue: function start() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar setup = function setup() {\n\t\t\t\t\t_this2.setuped = true;\n\t\n\t\t\t\t\t_this2.renderer = PIXI.autoDetectRenderer(_this2.settings.width, _this2.settings.height, { antialias: true });\n\t\t\t\t\tdocument.body.appendChild(_this2.renderer.view);\n\t\n\t\t\t\t\t_this2.gameLoop = function () {\n\t\t\t\t\t\t_this2.stages.beforeRender();\n\t\t\t\t\t\t_this2.renderer.render(_this2.stages.current);\n\t\t\t\t\t\trequestAnimationFrame(_this2.gameLoop);\n\t\t\t\t\t};\n\t\n\t\t\t\t\tif (_this2.run) {\n\t\t\t\t\t\t_this2.gameLoop();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\tPIXI.loader.add(\"images/anyImage.png\").load(setup);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn App;\n\t}();\n\t\n\texports.default = App;\n\t\n\t\n\tApp.BUMPER = true;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Bumper = function () {\n\t\tfunction Bumper(onEnd) {\n\t\t\t_classCallCheck(this, Bumper);\n\t\n\t\t\tthis.onEnd = onEnd;\n\t\t}\n\t\n\t\t_createClass(Bumper, [{\n\t\t\tkey: 'show',\n\t\t\tvalue: function show() {\n\t\t\t\tthis.video = document.createElement('video');\n\t\n\t\t\t\tthis.video.src = 'media/bumper.mov';\n\t\t\t\tthis.video.play();\n\t\n\t\t\t\tif (this.onEnd) {\n\t\t\t\t\tthis.video.addEventListener('ended', this.onEnd);\n\t\t\t\t}\n\t\n\t\t\t\tdocument.body.appendChild(this.video);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'hide',\n\t\t\tvalue: function hide() {\n\t\t\t\tif (this.video) {\n\t\t\t\t\tthis.video.style.display = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Bumper;\n\t}();\n\t\n\texports.default = Bumper;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Stages = function () {\n\t\tfunction Stages() {\n\t\t\t_classCallCheck(this, Stages);\n\t\n\t\t\tthis.current = undefined;\n\t\t\tthis.list = [];\n\t\t}\n\t\n\t\t_createClass(Stages, [{\n\t\t\tkey: \"addStage\",\n\t\t\tvalue: function addStage(name, stage) {\n\t\t\t\tthis.list[name] = stage;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"changeStage\",\n\t\t\tvalue: function changeStage(name) {\n\t\t\t\tif (!this.list[name]) {\n\t\t\t\t\tthrow new Error(\"Illegal stage name.\");\n\t\t\t\t}\n\t\t\t\tif (this.current !== undefined) {\n\t\t\t\t\tthis.current.unload();\n\t\t\t\t}\n\t\t\t\tthis.current = this.list[name];\n\t\t\t\tthis.current.load();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getStage\",\n\t\t\tvalue: function getStage(name) {\n\t\t\t\treturn this.list[name];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"beforeRender\",\n\t\t\tvalue: function beforeRender() {\n\t\t\t\tthis.current.tick();\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Stages;\n\t}();\n\t\n\t/*\r\n\tStage interface:\r\n\t{\r\n\t\tload = function()\r\n\t\tunload = function()\r\n\t\ttick = function()\r\n\t}\r\n\t*/\n\t\n\t\n\texports.default = Stages;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TopScore = function () {\n\t\tfunction TopScore() {\n\t\t\t_classCallCheck(this, TopScore);\n\t\n\t\t\tif (!window.localStorage.topScore) {\n\t\t\t\twindow.localStorage.topScore = JSON.stringify([]);\n\t\t\t}\n\t\t\tthis.topScore = JSON.parse(window.localStorage.topScore);\n\t\t}\n\t\n\t\t_createClass(TopScore, [{\n\t\t\tkey: 'addScore',\n\t\t\tvalue: function addScore(score) {\n\t\t\t\tthis.topScore.push(score);\n\t\t\t\tthis.topScore.sort(function (a, b) {\n\t\t\t\t\treturn parseInt(b, 10) - parseInt(a, 10);\n\t\t\t\t});\n\t\t\t\twindow.localStorage.topScore = JSON.stringify(this.topScore);\n\t\n\t\t\t\tif (window.ga) {\n\t\t\t\t\tga('send', 'event', 'Game', 'score', {\n\t\t\t\t\t\t\"metric5\": score\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getTop',\n\t\t\tvalue: function getTop(count) {\n\t\t\t\treturn this.topScore.slice(0, count);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn TopScore;\n\t}();\n\t\n\texports.default = TopScore;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _App = __webpack_require__(6);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar settings = {\n\t\twidth: 960,\n\t\theight: 144\n\t};\n\t\n\twindow.app = new _App2.default(settings);\n\twindow.app.start();\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _World = __webpack_require__(3);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tvar _Train = __webpack_require__(2);\n\t\n\tvar _Train2 = _interopRequireDefault(_Train);\n\t\n\tvar _SwitchCursor = __webpack_require__(14);\n\t\n\tvar _SwitchCursor2 = _interopRequireDefault(_SwitchCursor);\n\t\n\tvar _KeyListener = __webpack_require__(1);\n\t\n\tvar _KeyListener2 = _interopRequireDefault(_KeyListener);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar StagePlay = function (_PIXI$Container) {\n\t\t_inherits(StagePlay, _PIXI$Container);\n\t\n\t\tfunction StagePlay(stages, settings) {\n\t\t\t_classCallCheck(this, StagePlay);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (StagePlay.__proto__ || Object.getPrototypeOf(StagePlay)).call(this));\n\t\n\t\t\t_this.stages = stages;\n\t\t\t_this.settings = settings;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(StagePlay, [{\n\t\t\tkey: 'load',\n\t\t\tvalue: function load() {\n\t\t\t\tthis.camOffset = StagePlay.CAMERA_CENTER_PERC * this.settings.width;\n\t\n\t\t\t\tthis.background = new PIXI.Graphics();\n\t\t\t\tthis.background.beginFill(StagePlay.BACKGROUND_COLOR);\n\t\t\t\tthis.background.drawRect(0, 0, this.settings.width, this.settings.height);\n\t\n\t\t\t\tthis.world = new _World2.default();\n\t\t\t\tthis.world.y = this.settings.height / 2;\n\t\n\t\t\t\tthis.train = this.world.getTrain();\n\t\n\t\t\t\tthis.switchCursor = new _SwitchCursor2.default(this.train);\n\t\t\t\tthis.switchCursor.y = this.settings.height / 2;\n\t\n\t\t\t\tthis.cartsText = new PIXI.Text(\"0\", new PIXI.TextStyle({ fontSize: 40, fill: '#9FBC12' }));\n\t\t\t\tthis.cartsText.x = 16;\n\t\t\t\tthis.cartsText.y = 16;\n\t\n\t\t\t\tthis.scoreText = new PIXI.Text(\"0\", new PIXI.TextStyle({ fontSize: 21, fill: '#9FBC12' }));\n\t\t\t\tthis.scoreText.x = 64;\n\t\t\t\tthis.scoreText.y = 16;\n\t\n\t\t\t\tthis.crashedText = new PIXI.Text(\"Crashed\", new PIXI.TextStyle({ fontSize: 40, fill: '#247192' }));\n\t\t\t\tthis.crashedText.x = this.settings.width / 2;\n\t\t\t\tthis.crashedText.y = this.settings.height / 2;\n\t\t\t\tthis.crashedText.anchor.x = 0.5;\n\t\t\t\tthis.crashedText.anchor.y = 0.5;\n\t\t\t\tthis.crashedText.visible = false;\n\t\n\t\t\t\tthis.crashedTextGuide = new PIXI.Text(\"Press space to continue\", new PIXI.TextStyle({ fontSize: 14, fill: '#247192' }));\n\t\t\t\tthis.crashedTextGuide.x = this.settings.width / 2;\n\t\t\t\tthis.crashedTextGuide.y = this.settings.height / 2;\n\t\t\t\tthis.crashedTextGuide.anchor.x = 0.5;\n\t\t\t\tthis.crashedTextGuide.anchor.y = -0.9;\n\t\t\t\tthis.crashedTextGuide.visible = false;\n\t\n\t\t\t\tthis.quideText = new PIXI.Text(\"hold  and  to control train speed,  and  for railroad switches\", new PIXI.TextStyle({ fontSize: 12, fill: '#9FBC12' }));\n\t\t\t\tthis.quideText.x = this.settings.width / 2;\n\t\t\t\tthis.quideText.y = 0;\n\t\t\t\tthis.quideText.anchor.x = 0.5;\n\t\t\t\tthis.quideText.anchor.y = -1.0;\n\t\n\t\t\t\tthis.addChild(this.background);\n\t\t\t\tthis.addChild(this.switchCursor);\n\t\t\t\tthis.addChild(this.world);\n\t\t\t\tthis.addChild(this.cartsText);\n\t\t\t\tthis.addChild(this.scoreText);\n\t\t\t\tthis.addChild(this.crashedText);\n\t\t\t\tthis.addChild(this.crashedTextGuide);\n\t\t\t\tthis.addChild(this.quideText);\n\t\n\t\t\t\tthis.keyUp = new _KeyListener2.default(38);\n\t\t\t\tthis.keyDown = new _KeyListener2.default(40);\n\t\t\t\tthis.keyLeft = new _KeyListener2.default(37);\n\t\t\t\tthis.keyRight = new _KeyListener2.default(39);\n\t\t\t\tthis.keySpace = new _KeyListener2.default(32);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'tick',\n\t\t\tvalue: function tick() {\n\t\t\t\tthis.world.trains.children.forEach(function (train) {\n\t\t\t\t\treturn train.move();\n\t\t\t\t});\n\t\n\t\t\t\tif (!this.train.isCrashed) {\n\t\t\t\t\tthis.switchCursor.recalculatePosition();\n\t\t\t\t}\n\t\n\t\t\t\t//move camera\n\t\t\t\tvar camPos = this.train.locomotive.x - this.camOffset;\n\t\t\t\tif (this.train.isCrashed) {\n\t\t\t\t\tthis.camOffset += 0.8;\n\t\t\t\t}\n\t\t\t\tif (camPos < 0) {\n\t\t\t\t\tcamPos = 0;\n\t\t\t\t}\n\t\t\t\tcamPos += _World2.default.PIECE_WIDTH;\n\t\t\t\tthis.world.x = -camPos;\n\t\t\t\tthis.switchCursor.x = -camPos;\n\t\n\t\t\t\t//show/hide world\n\t\t\t\tvar c1 = camPos + this.settings.width + 5 * _World2.default.PIECE_WIDTH;\n\t\t\t\tvar c2 = camPos - 10 * _World2.default.PIECE_WIDTH;\n\t\t\t\tif (c1 > this.world.displayed.to * _World2.default.PIECE_WIDTH || c2 < this.world.displayed.from * _World2.default.PIECE_WIDTH) {\n\t\t\t\t\tvar from = Math.floor(camPos / _World2.default.PIECE_WIDTH) - 30;\n\t\t\t\t\tvar to = from + 100;\n\t\t\t\t\tvar oldTo = this.world.displayed.to;\n\t\n\t\t\t\t\tthis.world.clamp(from, to);\n\t\n\t\t\t\t\tif (to > oldTo) {\n\t\t\t\t\t\tthis.train.recalculatePath(oldTo);\n\t\t\t\t\t\tthis.switchCursor.displayPath();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t//controls\n\t\t\t\tif (!this.train.isCrashed) {\n\t\t\t\t\tif (this.keyUp.isDown) {\n\t\t\t\t\t\tthis.switchCursor.switchCursor(0);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keyDown.isDown) {\n\t\t\t\t\t\tthis.switchCursor.switchCursor(1);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keyLeft.isDown) {\n\t\t\t\t\t\tif (_Train2.default.MIN_SPEED === undefined || this.train.speed > _Train2.default.MIN_SPEED) {\n\t\t\t\t\t\t\tthis.train.speed -= _Train2.default.SPEED_CHANGE_STEP;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keyRight.isDown) {\n\t\t\t\t\t\tif (_Train2.default.MAX_SPEED === undefined || this.train.speed < _Train2.default.MAX_SPEED) {\n\t\t\t\t\t\t\tthis.train.speed += _Train2.default.SPEED_CHANGE_STEP;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (this.quideText.alpha > 0 && (this.keyUp.isDown || this.keyDown.isDown || this.keyLeft.isDown || this.keyRight.isDown)) {\n\t\t\t\t\tthis.quideText.alpha -= 0.01;\n\t\t\t\t}\n\t\n\t\t\t\tthis.cartsText.text = this.train.getCartCount();\n\t\t\t\tvar score = Math.floor(this.train.locomotive.x / (_World2.default.PIECE_WIDTH * StagePlay.SCORE_SPEED));\n\t\t\t\tthis.scoreText.text = score;\n\t\n\t\t\t\tif (this.train.isCrashed) {\n\t\t\t\t\tthis.crashedText.visible = true;\n\t\t\t\t\tthis.crashedTextGuide.visible = true;\n\t\t\t\t}\n\t\n\t\t\t\t//spawn enemy train\n\t\t\t\tif (Math.random() < StagePlay.ENEMY_SPAWN_RATE * this.train.speed) {\n\t\t\t\t\tvar x = Math.floor((this.train.locomotive.x + this.settings.width) / _World2.default.PIECE_WIDTH);\n\t\n\t\t\t\t\tvar ys = Object.keys(this.world.rails[x]);\n\t\t\t\t\tvar y = parseInt(ys[Math.floor(Math.random() * ys.length)], 10);\n\t\n\t\t\t\t\tvar enemyTrain = new _Train2.default(this.world, x, y, _Train2.default.LEFT, true);\n\t\n\t\t\t\t\twhile (Math.random() < StagePlay.ENEMY_SPAWN_CARTS_PROB) {\n\t\t\t\t\t\tenemyTrain.addCart();\n\t\t\t\t\t}\n\t\n\t\t\t\t\tthis.world.trains.addChild(enemyTrain);\n\t\t\t\t}\n\t\n\t\t\t\tif (this.keySpace.isDown) {\n\t\t\t\t\tif (this.train.isCrashed) {\n\t\t\t\t\t\tvar _score = Math.floor(this.train.locomotive.x / (_World2.default.PIECE_WIDTH * StagePlay.SCORE_SPEED));\n\t\t\t\t\t\tthis.stages.getStage(\"topScore\").addScore(_score);\n\t\t\t\t\t\tthis.stages.changeStage(\"topScore\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.restart();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'restart',\n\t\t\tvalue: function restart() {\n\t\t\t\tthis.unload();\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'unload',\n\t\t\tvalue: function unload() {\n\t\t\t\tthis.removeChild(this.background);\n\t\t\t\tthis.removeChild(this.world);\n\t\t\t\tthis.removeChild(this.switchCursor);\n\t\t\t\tthis.removeChild(this.cartsText);\n\t\t\t\tthis.removeChild(this.scoreText);\n\t\t\t\tthis.removeChild(this.crashedText);\n\t\t\t\tthis.removeChild(this.crashedTextGuide);\n\t\t\t\tthis.removeChild(this.quideText);\n\t\n\t\t\t\tthis.keyUp.close();\n\t\t\t\tthis.keyDown.close();\n\t\t\t\tthis.keyLeft.close();\n\t\t\t\tthis.keyRight.close();\n\t\t\t\tthis.keySpace.close();\n\t\n\t\t\t\tthis.keyUp = undefined;\n\t\t\t\tthis.keyDown = undefined;\n\t\t\t\tthis.keyLeft = undefined;\n\t\t\t\tthis.keyRight = undefined;\n\t\t\t\tthis.keySpace = undefined;\n\t\n\t\t\t\tthis.background = undefined;\n\t\t\t\tthis.world = undefined;\n\t\t\t\tthis.train = undefined;\n\t\t\t\tthis.switchCursor = undefined;\n\t\t\t\tthis.cartsText = undefined;\n\t\t\t\tthis.scoreText = undefined;\n\t\t\t\tthis.crashedText = undefined;\n\t\t\t\tthis.crashedTextGuide = undefined;\n\t\t\t\tthis.quideText = undefined;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn StagePlay;\n\t}(PIXI.Container);\n\t\n\texports.default = StagePlay;\n\t\n\t\n\tStagePlay.SCORE_SPEED = 3;\n\tStagePlay.CAMERA_CENTER_PERC = 0.21;\n\tStagePlay.BACKGROUND_COLOR = 0xFFFFFF;\n\tStagePlay.ENEMY_SPAWN_RATE = 0.002;\n\tStagePlay.ENEMY_SPAWN_CARTS_PROB = 0.2;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _KeyListener = __webpack_require__(1);\n\t\n\tvar _KeyListener2 = _interopRequireDefault(_KeyListener);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar StageTopScore = function (_PIXI$Container) {\n\t\t_inherits(StageTopScore, _PIXI$Container);\n\t\n\t\tfunction StageTopScore(stages, topScore, settings) {\n\t\t\t_classCallCheck(this, StageTopScore);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (StageTopScore.__proto__ || Object.getPrototypeOf(StageTopScore)).call(this));\n\t\n\t\t\t_this.stages = stages;\n\t\t\t_this.topScore = topScore;\n\t\t\t_this.settings = settings;\n\t\n\t\t\t_this.myScore = -1;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(StageTopScore, [{\n\t\t\tkey: 'addScore',\n\t\t\tvalue: function addScore(score) {\n\t\t\t\tthis.topScore.addScore(score);\n\t\t\t\tthis.myScore = this.topScore.getTop(StageTopScore.TOP_COUNT).indexOf(score);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'load',\n\t\t\tvalue: function load() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis.background = new PIXI.Graphics();\n\t\t\t\tthis.background.beginFill(StageTopScore.BACKGROUND_COLOR);\n\t\t\t\tthis.background.drawRect(0, 0, this.settings.width, this.settings.height);\n\t\n\t\t\t\tthis.scores = new PIXI.Container();\n\t\t\t\tvar i = 0;\n\t\t\t\tthis.topScore.getTop(StageTopScore.TOP_COUNT).forEach(function (score) {\n\t\n\t\t\t\t\tvar x = i % 10;\n\t\t\t\t\tvar y = Math.floor(i / 10);\n\t\n\t\t\t\t\tvar color = '#E1303C';\n\t\t\t\t\tif (_this2.myScore === i) {\n\t\t\t\t\t\tcolor = '#9FBC12';\n\t\t\t\t\t}\n\t\n\t\t\t\t\tvar scoreText = new PIXI.Text(score, new PIXI.TextStyle({ fontSize: 14, fill: color }));\n\t\t\t\t\tscoreText.x = (x + 1) * (_this2.settings.width / (10 + 1));\n\t\t\t\t\tscoreText.y = (y + 1) * (_this2.settings.height / (5 + 1));\n\t\t\t\t\tscoreText.anchor.x = 0.5;\n\t\t\t\t\tscoreText.anchor.y = 0.5;\n\t\n\t\t\t\t\t_this2.scores.addChild(scoreText);\n\t\t\t\t\ti++;\n\t\t\t\t});\n\t\n\t\t\t\tthis.crashedTextGuide = new PIXI.Text(\"Press space to continue\", new PIXI.TextStyle({ fontSize: 14, fill: '#9FBC12' }));\n\t\t\t\tthis.crashedTextGuide.x = this.settings.width / 2;\n\t\t\t\tthis.crashedTextGuide.y = this.settings.height - 16;\n\t\t\t\tthis.crashedTextGuide.anchor.x = 0.5;\n\t\t\t\tthis.crashedTextGuide.anchor.y = 1;\n\t\n\t\t\t\tthis.gameByText = new PIXI.Text(\"Game by Dominik Gmiterko\", new PIXI.TextStyle({ fontSize: 10, fill: '#9FBC12' }));\n\t\t\t\tthis.gameByText.x = 16;\n\t\t\t\tthis.gameByText.y = this.settings.height - 16;\n\t\t\t\tthis.gameByText.anchor.x = 0.0;\n\t\t\t\tthis.gameByText.anchor.y = 1.0;\n\t\n\t\t\t\tthis.gameAtText = new PIXI.Text(\"play at ienze.me/trainwreck\", new PIXI.TextStyle({ fontSize: 10, fill: '#9FBC12' }));\n\t\t\t\tthis.gameAtText.x = this.settings.width - 16;\n\t\t\t\tthis.gameAtText.y = this.settings.height - 16;\n\t\t\t\tthis.gameAtText.anchor.x = 1.0;\n\t\t\t\tthis.gameAtText.anchor.y = 1.0;\n\t\n\t\t\t\tthis.addChild(this.background);\n\t\t\t\tthis.addChild(this.scores);\n\t\t\t\tthis.addChild(this.crashedTextGuide);\n\t\t\t\tthis.addChild(this.gameByText);\n\t\t\t\tthis.addChild(this.gameAtText);\n\t\n\t\t\t\tthis.keySpace = new _KeyListener2.default(32);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'tick',\n\t\t\tvalue: function tick() {\n\t\t\t\tif (this.keySpace.isDown) {\n\t\t\t\t\tthis.stages.changeStage(\"play\");\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'unload',\n\t\t\tvalue: function unload() {\n\t\t\t\tthis.removeChild(this.background);\n\t\t\t\tthis.removeChild(this.scores);\n\t\t\t\tthis.removeChild(this.crashedTextGuide);\n\t\t\t\tthis.removeChild(this.gameByText);\n\t\t\t\tthis.removeChild(this.gameAtText);\n\t\n\t\t\t\tthis.keySpace.close();\n\t\n\t\t\t\tthis.keySpace = undefined;\n\t\n\t\t\t\tthis.background = undefined;\n\t\t\t\tthis.scores = undefined;\n\t\t\t\tthis.crashedTextGuide = undefined;\n\t\t\t\tthis.gameByText = undefined;\n\t\t\t\tthis.gameAtText = undefined;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn StageTopScore;\n\t}(PIXI.Container);\n\t\n\texports.default = StageTopScore;\n\t\n\t\n\tStageTopScore.BACKGROUND_COLOR = 0xFFFFFF;\n\tStageTopScore.TOP_COUNT = 40;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Train = __webpack_require__(2);\n\t\n\tvar _Train2 = _interopRequireDefault(_Train);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar RailPiece = function () {\n\t\tfunction RailPiece() {\n\t\t\t_classCallCheck(this, RailPiece);\n\t\n\t\t\tthis.to = [];\n\t\t\tthis.from = [];\n\t\t\tthis.isSwitch = false;\n\t\t\tthis.isEmpty = true;\n\t\t\tthis.isCart = false;\n\t\t\tthis.switched = {\n\t\t\t\tfrom: undefined,\n\t\t\t\tto: undefined\n\t\t\t};\n\t\t}\n\t\n\t\t_createClass(RailPiece, [{\n\t\t\tkey: 'addTo',\n\t\t\tvalue: function addTo(railIndex) {\n\t\t\t\tthis.to.push(railIndex);\n\t\t\t\tthis.to.sort(function (a, b) {\n\t\t\t\t\treturn a - b;\n\t\t\t\t});\n\t\t\t\tthis.onRailAdded();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addFrom',\n\t\t\tvalue: function addFrom(railIndex) {\n\t\t\t\tthis.from.push(railIndex);\n\t\t\t\tthis.from.sort(function (a, b) {\n\t\t\t\t\treturn a - b;\n\t\t\t\t});\n\t\t\t\tthis.onRailAdded();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onRailAdded',\n\t\t\tvalue: function onRailAdded() {\n\t\t\t\tthis.isEmpty = false;\n\t\t\t\tthis.isSwitch = this.railsCount() > 2;\n\t\t\t\tif (this.isSwitch) {\n\t\t\t\t\tthis.switched = {\n\t\t\t\t\t\tfrom: Math.floor(Math.random() * this.from.length),\n\t\t\t\t\t\tto: Math.floor(Math.random() * this.to.length)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isConnectedTo',\n\t\t\tvalue: function isConnectedTo(railIndex) {\n\t\t\t\treturn this.to.indexOf(railIndex) >= 0;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getTo',\n\t\t\tvalue: function getTo() {\n\t\t\t\tif (this.isSwitch) {\n\t\t\t\t\treturn this.to[this.switched.to];\n\t\t\t\t}\n\t\t\t\tif (this.to.length > 0) {\n\t\t\t\t\treturn this.to[0];\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getFrom',\n\t\t\tvalue: function getFrom() {\n\t\t\t\tif (this.isSwitch) {\n\t\t\t\t\treturn this.from[this.switched.from];\n\t\t\t\t}\n\t\t\t\tif (this.from.length > 0) {\n\t\t\t\t\treturn this.from[0];\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchPrefered',\n\t\t\tvalue: function switchPrefered(preferedDirection, value) {\n\t\t\t\tif (preferedDirection === _Train2.default.RIGHT) {\n\t\t\t\t\tif (this.to.length >= 2) {\n\t\t\t\t\t\tthis.switchTo(value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.switchFrom(value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.from.length >= 2) {\n\t\t\t\t\t\tthis.switchFrom(value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.switchTo(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchTo',\n\t\t\tvalue: function switchTo(value) {\n\t\t\t\tthis.switched.to = value;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchFrom',\n\t\t\tvalue: function switchFrom(value) {\n\t\t\t\tthis.switched.from = value;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'railsCount',\n\t\t\tvalue: function railsCount() {\n\t\t\t\treturn this.from.length + this.to.length;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn RailPiece;\n\t}();\n\t\n\texports.default = RailPiece;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _World = __webpack_require__(3);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar SwitchCursor = function (_PIXI$Container) {\n\t\t_inherits(SwitchCursor, _PIXI$Container);\n\t\n\t\tfunction SwitchCursor(train) {\n\t\t\t_classCallCheck(this, SwitchCursor);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (SwitchCursor.__proto__ || Object.getPrototypeOf(SwitchCursor)).call(this));\n\t\n\t\t\t_this.train = train;\n\t\n\t\t\t_this.cursor = undefined;\n\t\t\t_this.cursorX = 0;\n\t\t\t_this.cursorY = 0;\n\t\n\t\t\t_this.path = undefined;\n\t\n\t\t\t_this.path = new PIXI.Graphics();\n\t\t\t_this.displayPath();\n\t\t\t_this.addChild(_this.path);\n\t\n\t\t\t_this.display();\n\t\n\t\t\t_this.recalculatePosition();\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(SwitchCursor, [{\n\t\t\tkey: 'recalculatePosition',\n\t\t\tvalue: function recalculatePosition() {\n\t\t\t\tvar trainX = Math.floor(this.train.locomotive.x / _World2.default.PIECE_WIDTH);\n\t\t\t\t// var trainY = this.train.path[trainX];\n\t\n\t\t\t\t// if(this.cursorX === trainX && this.cursorY === trainY) {\n\t\t\t\t//find next switch\n\t\t\t\tvar newCursorX = trainX + 1;\n\t\t\t\twhile (newCursorX < this.train.world.rails.length && newCursorX < this.train.path.length && this.train.world.rails[newCursorX][this.train.path[newCursorX]] && this.train.world.rails[newCursorX][this.train.path[newCursorX]].to.length < 2) {\n\t\t\t\t\tnewCursorX++;\n\t\t\t\t}\n\t\t\t\tthis.cursorX = newCursorX;\n\t\t\t\tthis.cursorY = this.train.path[newCursorX];\n\t\n\t\t\t\tthis.cursor.x = this.cursorX * _World2.default.PIECE_WIDTH + _World2.default.PIECE_WIDTH2;\n\t\t\t\tthis.cursor.y = this.cursorY * _World2.default.PIECE_HEIGHT + _World2.default.PIECE_HEIGHT2;\n\t\t\t\t// }\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'display',\n\t\t\tvalue: function display() {\n\t\t\t\tvar cursor = new PIXI.Graphics();\n\t\t\t\tcursor.width = SwitchCursor.SIZE;\n\t\t\t\tcursor.height = SwitchCursor.SIZE;\n\t\n\t\t\t\tcursor.lineStyle(SwitchCursor.WIDTH, SwitchCursor.CURSOR_COLOR);\n\t\t\t\tcursor.drawEllipse(0, 0, SwitchCursor.SIZE, SwitchCursor.SIZE);\n\t\t\t\tfor (var i = 0; i < 4; i++) {\n\t\t\t\t\tvar x = Math.cos(i / 2 * Math.PI + Math.PI / 4);\n\t\t\t\t\tvar y = Math.sin(i / 2 * Math.PI + Math.PI / 4);\n\t\t\t\t\tcursor.moveTo(x * SwitchCursor.SIZE * 0.5, y * SwitchCursor.SIZE * 0.5);\n\t\t\t\t\tcursor.lineTo(x * SwitchCursor.SIZE * 1.3, y * SwitchCursor.SIZE * 1.3);\n\t\t\t\t}\n\t\t\t\tcursor.endFill();\n\t\n\t\t\t\tthis.cursor = cursor;\n\t\t\t\tthis.addChild(cursor);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'displayPath',\n\t\t\tvalue: function displayPath() {\n\t\t\t\tthis.path.clear();\n\t\n\t\t\t\tthis.path.lineStyle(7, 0xE1303C, 0.5);\n\t\t\t\tthis.path.moveTo(_World2.default.PIECE_WIDTH, _World2.default.PIECE_HEIGHT2);\n\t\t\t\tfor (var i = 0; i < this.train.path.length; i++) {\n\t\t\t\t\tthis.path.lineTo(_World2.default.PIECE_WIDTH * i + _World2.default.PIECE_WIDTH2, _World2.default.PIECE_HEIGHT * this.train.path[i] + _World2.default.PIECE_HEIGHT2);\n\t\t\t\t}\n\t\t\t\tthis.path.endFill();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchCursor',\n\t\t\tvalue: function switchCursor(value) {\n\t\t\t\tif (this.cursorX !== undefined && this.cursorY !== undefined) {\n\t\t\t\t\tvar railPiece = this.train.world.rails[this.cursorX][this.cursorY];\n\t\n\t\t\t\t\tvar oldTo = railPiece.getTo();\n\t\t\t\t\tvar oldFrom = railPiece.getFrom();\n\t\n\t\t\t\t\trailPiece.switchPrefered(this.train.direction, value);\n\t\n\t\t\t\t\tif (oldTo !== railPiece.getTo() || oldFrom !== railPiece.getFrom()) {\n\t\t\t\t\t\tthis.train.recalculatePath(this.cursorX);\n\t\t\t\t\t\tthis.displayPath();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SwitchCursor;\n\t}(PIXI.Container);\n\t\n\texports.default = SwitchCursor;\n\t\n\t\n\tSwitchCursor.WIDTH = 2;\n\tSwitchCursor.SIZE = 15;\n\tSwitchCursor.CURSOR_COLOR = 0x9FBC12;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _RailPiece = __webpack_require__(13);\n\t\n\tvar _RailPiece2 = _interopRequireDefault(_RailPiece);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar WorldGenerator = function () {\n\t\tfunction WorldGenerator() {\n\t\t\t_classCallCheck(this, WorldGenerator);\n\t\n\t\t\tthis.rails = [];\n\t\t\tthis.rails.push({ 0: new _RailPiece2.default() });\n\t\n\t\t\tthis.generated = {\n\t\t\t\tfrom: 0,\n\t\t\t\tto: 0\n\t\t\t};\n\t\n\t\t\tthis.initGenarator();\n\t\t}\n\t\n\t\t_createClass(WorldGenerator, [{\n\t\t\tkey: 'generateNext',\n\t\t\tvalue: function generateNext(width) {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar half = Math.floor(width / 2);\n\t\n\t\t\t\tvar rails = {};\n\t\t\t\tfor (var i = -half; i <= half; i++) {\n\t\t\t\t\trails[i] = new _RailPiece2.default();\n\t\t\t\t}\n\t\t\t\tthis.rails.push(rails);\n\t\n\t\t\t\t//rails\n\t\t\t\tvar railsBefore = this.rails[this.rails.length - 2];\n\t\t\t\tObject.keys(railsBefore).forEach(function (railIndex) {\n\t\t\t\t\trailIndex = parseInt(railIndex, 10);\n\t\n\t\t\t\t\tvar usableGenerators = _this.railGenerators.filter(function (railGenerator) {\n\t\t\t\t\t\treturn railGenerator.canUse(railsBefore, rails, railIndex);\n\t\t\t\t\t});\n\t\n\t\t\t\t\tif (usableGenerators.length > 0) {\n\t\t\t\t\t\tvar railGenerator = usableGenerators[Math.floor(Math.random() * usableGenerators.length)];\n\t\t\t\t\t\trailGenerator.use(railsBefore, rails, railIndex);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\t//carts\n\t\t\t\tObject.keys(rails).forEach(function (railIndex) {\n\t\t\t\t\trailIndex = parseInt(railIndex, 10);\n\t\t\t\t\tvar railPiece = rails[railIndex];\n\t\n\t\t\t\t\tif (Math.random() < WorldGenerator.EMPTY_CART_PROBABILITY) {\n\t\t\t\t\t\trailPiece.isCart = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clamp',\n\t\t\tvalue: function clamp(from, to) {\n\t\t\t\tfor (var i = this.generated.to; i < to; i++) {\n\t\n\t\t\t\t\tvar psin = function psin(x, f) {\n\t\t\t\t\t\tif (f === undefined) {\n\t\t\t\t\t\t\treturn Math.pow(Math.abs(Math.sin(x)), 2);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar r = Math.pow(Math.abs(Math.sin(x)), 2);\n\t\t\t\t\t\t\treturn f + r * (1 - f);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\n\t\t\t\t\tvar width = 5 * psin(i / 321, 0.3) * Math.min(1, psin((i + 1) / 10) + psin((i - 64) / 41)) * psin(Math.sin(i / 51) * 10, 0.5);\n\t\t\t\t\twidth = Math.min(9, 2 * Math.floor(width) + 1);\n\t\n\t\t\t\t\tthis.generateNext(width);\n\t\t\t\t}\n\t\t\t\tthis.generated.to = to;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initGenarator',\n\t\t\tvalue: function initGenarator() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tthis.railGenerators = [];\n\t\n\t\t\t\tvar addRailType = function addRailType(callback, rarity) {\n\t\t\t\t\tfor (var i = 0; i < rarity; i++) {\n\t\t\t\t\t\t_this2.railGenerators.push(callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t//straight\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex] !== undefined;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}, 8);\n\t\n\t\t\t\t//up\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex + 1] !== undefined;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\n\t\t\t\t\t}\n\t\t\t\t}, 2);\n\t\n\t\t\t\t//down\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex - 1] !== undefined;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\n\t\t\t\t\t}\n\t\t\t\t}, 2);\n\t\n\t\t\t\t//split up\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex] !== undefined && rails[railIndex + 1] !== undefined\n\t\t\t\t\t\t//max one switch\n\t\t\t\t\t\t&& rails[railIndex + 1].railsCount() <= 2 && rails[railIndex].railsCount() <= 2 && railsBefore[railIndex].railsCount() <= 2;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}, 3);\n\t\n\t\t\t\t//split down\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex] !== undefined && rails[railIndex - 1] !== undefined\n\t\t\t\t\t\t//max one switch\n\t\t\t\t\t\t&& rails[railIndex - 1].railsCount() <= 2 && rails[railIndex].railsCount() <= 2 && railsBefore[railIndex].railsCount() <= 2;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\n\t\t\t\t\t\t_this2.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}, 3);\n\t\n\t\t\t\t/*\r\n\t   \t//backsplit up\r\n\t   \taddRailType({\r\n\t   \t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\treturn rails[railIndex] !== undefined\r\n\t   \t\t\t\t&& railsBefore[railIndex + 1] !== undefined\r\n\t   \t\t\t\t//max one switch\r\n\t   \t\t\t\t&& railsBefore[railIndex + 1].railsCount() <= 2\r\n\t   \t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t   \t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t   \t\t},\r\n\t   \t\tuse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\tthis.connectRails(railsBefore[railIndex + 1], railIndex + 1, rails[railIndex], railIndex);\r\n\t   \t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t   \t\t}\r\n\t   \t}, 2);\r\n\t   \n\t   \t//backsplit down\r\n\t   \taddRailType({\r\n\t   \t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\treturn rails[railIndex] !== undefined\r\n\t   \t\t\t\t&& railsBefore[railIndex - 1] !== undefined\r\n\t   \t\t\t\t//max one switch\r\n\t   \t\t\t\t&& railsBefore[railIndex - 1].railsCount() <= 2\r\n\t   \t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t   \t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t   \t\t},\r\n\t   \t\tuse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\tthis.connectRails(railsBefore[railIndex - 1], railIndex - 1, rails[railIndex], railIndex);\r\n\t   \t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t   \t\t}\r\n\t   \t}, 2);\r\n\t   */\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'connectRails',\n\t\t\tvalue: function connectRails(railA, indexA, railB, indexB) {\n\t\t\t\trailA.addTo(indexB);\n\t\t\t\trailB.addFrom(indexA);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn WorldGenerator;\n\t}();\n\t\n\texports.default = WorldGenerator;\n\t\n\t\n\tWorldGenerator.EMPTY_CART_PROBABILITY = 0.1;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {\n\t/**\n\t * @license\n\t *\n\t * chroma.js - JavaScript library for color conversions\n\t * \n\t * Copyright (c) 2011-2017, Gregor Aisch\n\t * All rights reserved.\n\t * \n\t * Redistribution and use in source and binary forms, with or without\n\t * modification, are permitted provided that the following conditions are met:\n\t * \n\t * 1. Redistributions of source code must retain the above copyright notice, this\n\t *    list of conditions and the following disclaimer.\n\t * \n\t * 2. Redistributions in binary form must reproduce the above copyright notice,\n\t *    this list of conditions and the following disclaimer in the documentation\n\t *    and/or other materials provided with the distribution.\n\t * \n\t * 3. The name Gregor Aisch may not be used to endorse or promote products\n\t *    derived from this software without specific prior written permission.\n\t * \n\t * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n\t * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n\t * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n\t * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n\t * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n\t * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\t * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n\t * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t *\n\t */\n\t\n\t(function() {\n\t  var Color, DEG2RAD, LAB_CONSTANTS, PI, PITHIRD, RAD2DEG, TWOPI, _guess_formats, _guess_formats_sorted, _input, _interpolators, abs, atan2, bezier, blend, blend_f, brewer, burn, chroma, clip_rgb, cmyk2rgb, colors, cos, css2rgb, darken, dodge, each, floor, hcg2rgb, hex2rgb, hsi2rgb, hsl2css, hsl2rgb, hsv2rgb, interpolate, interpolate_hsx, interpolate_lab, interpolate_num, interpolate_rgb, lab2lch, lab2rgb, lab_xyz, lch2lab, lch2rgb, lighten, limit, log, luminance_x, m, max, multiply, normal, num2rgb, overlay, pow, rgb2cmyk, rgb2css, rgb2hcg, rgb2hex, rgb2hsi, rgb2hsl, rgb2hsv, rgb2lab, rgb2lch, rgb2luminance, rgb2num, rgb2temperature, rgb2xyz, rgb_xyz, rnd, root, round, screen, sin, sqrt, temperature2rgb, type, unpack, w3cx11, xyz_lab, xyz_rgb,\n\t    slice = [].slice;\n\t\n\t  type = (function() {\n\t\n\t    /*\n\t    for browser-safe type checking+\n\t    ported from jQuery's $.type\n\t     */\n\t    var classToType, len, name, o, ref;\n\t    classToType = {};\n\t    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n\t    for (o = 0, len = ref.length; o < len; o++) {\n\t      name = ref[o];\n\t      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n\t    }\n\t    return function(obj) {\n\t      var strType;\n\t      strType = Object.prototype.toString.call(obj);\n\t      return classToType[strType] || \"object\";\n\t    };\n\t  })();\n\t\n\t  limit = function(x, min, max) {\n\t    if (min == null) {\n\t      min = 0;\n\t    }\n\t    if (max == null) {\n\t      max = 1;\n\t    }\n\t    if (x < min) {\n\t      x = min;\n\t    }\n\t    if (x > max) {\n\t      x = max;\n\t    }\n\t    return x;\n\t  };\n\t\n\t  unpack = function(args) {\n\t    if (args.length >= 3) {\n\t      return [].slice.call(args);\n\t    } else {\n\t      return args[0];\n\t    }\n\t  };\n\t\n\t  clip_rgb = function(rgb) {\n\t    var i, o;\n\t    rgb._clipped = false;\n\t    rgb._unclipped = rgb.slice(0);\n\t    for (i = o = 0; o < 3; i = ++o) {\n\t      if (i < 3) {\n\t        if (rgb[i] < 0 || rgb[i] > 255) {\n\t          rgb._clipped = true;\n\t        }\n\t        if (rgb[i] < 0) {\n\t          rgb[i] = 0;\n\t        }\n\t        if (rgb[i] > 255) {\n\t          rgb[i] = 255;\n\t        }\n\t      } else if (i === 3) {\n\t        if (rgb[i] < 0) {\n\t          rgb[i] = 0;\n\t        }\n\t        if (rgb[i] > 1) {\n\t          rgb[i] = 1;\n\t        }\n\t      }\n\t    }\n\t    if (!rgb._clipped) {\n\t      delete rgb._unclipped;\n\t    }\n\t    return rgb;\n\t  };\n\t\n\t  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n\t\n\t  TWOPI = PI * 2;\n\t\n\t  PITHIRD = PI / 3;\n\t\n\t  DEG2RAD = PI / 180;\n\t\n\t  RAD2DEG = 180 / PI;\n\t\n\t  chroma = function() {\n\t    if (arguments[0] instanceof Color) {\n\t      return arguments[0];\n\t    }\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, arguments, function(){});\n\t  };\n\t\n\t  _interpolators = [];\n\t\n\t  if ((typeof module !== \"undefined\" && module !== null) && (module.exports != null)) {\n\t    module.exports = chroma;\n\t  }\n\t\n\t  if (true) {\n\t    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t      return chroma;\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t  } else {\n\t    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n\t    root.chroma = chroma;\n\t  }\n\t\n\t  chroma.version = '1.3.3';\n\t\n\t  _input = {};\n\t\n\t  _guess_formats = [];\n\t\n\t  _guess_formats_sorted = false;\n\t\n\t  Color = (function() {\n\t    function Color() {\n\t      var arg, args, chk, len, len1, me, mode, o, w;\n\t      me = this;\n\t      args = [];\n\t      for (o = 0, len = arguments.length; o < len; o++) {\n\t        arg = arguments[o];\n\t        if (arg != null) {\n\t          args.push(arg);\n\t        }\n\t      }\n\t      mode = args[args.length - 1];\n\t      if (_input[mode] != null) {\n\t        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n\t      } else {\n\t        if (!_guess_formats_sorted) {\n\t          _guess_formats = _guess_formats.sort(function(a, b) {\n\t            return b.p - a.p;\n\t          });\n\t          _guess_formats_sorted = true;\n\t        }\n\t        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n\t          chk = _guess_formats[w];\n\t          mode = chk.test.apply(chk, args);\n\t          if (mode) {\n\t            break;\n\t          }\n\t        }\n\t        if (mode) {\n\t          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n\t        }\n\t      }\n\t      if (me._rgb == null) {\n\t        console.warn('unknown format: ' + args);\n\t      }\n\t      if (me._rgb == null) {\n\t        me._rgb = [0, 0, 0];\n\t      }\n\t      if (me._rgb.length === 3) {\n\t        me._rgb.push(1);\n\t      }\n\t    }\n\t\n\t    Color.prototype.toString = function() {\n\t      return this.hex();\n\t    };\n\t\n\t    return Color;\n\t\n\t  })();\n\t\n\t  chroma._input = _input;\n\t\n\t\n\t  /**\n\t  \tColorBrewer colors for chroma.js\n\t  \n\t  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n\t  \tPennsylvania State University.\n\t  \n\t  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n\t  \tyou may not use this file except in compliance with the License.\n\t  \tYou may obtain a copy of the License at\t\n\t  \thttp://www.apache.org/licenses/LICENSE-2.0\n\t  \n\t  \tUnless required by applicable law or agreed to in writing, software distributed\n\t  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n\t  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n\t  \tspecific language governing permissions and limitations under the License.\n\t  \n\t      @preserve\n\t   */\n\t\n\t  chroma.brewer = brewer = {\n\t    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n\t    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n\t    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n\t    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n\t    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n\t    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n\t    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n\t    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n\t    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n\t    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n\t    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n\t    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n\t    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n\t    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n\t    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n\t    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n\t    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n\t    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n\t    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n\t    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n\t    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n\t    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n\t    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n\t    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n\t    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n\t    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n\t    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n\t    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n\t    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n\t    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n\t    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n\t    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n\t    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n\t    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n\t    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n\t    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n\t  };\n\t\n\t  (function() {\n\t    var key, results;\n\t    results = [];\n\t    for (key in brewer) {\n\t      results.push(brewer[key.toLowerCase()] = brewer[key]);\n\t    }\n\t    return results;\n\t  })();\n\t\n\t\n\t  /**\n\t  \tX11 color names\n\t  \n\t  \thttp://www.w3.org/TR/css3-color/#svg-color\n\t   */\n\t\n\t  w3cx11 = {\n\t    aliceblue: '#f0f8ff',\n\t    antiquewhite: '#faebd7',\n\t    aqua: '#00ffff',\n\t    aquamarine: '#7fffd4',\n\t    azure: '#f0ffff',\n\t    beige: '#f5f5dc',\n\t    bisque: '#ffe4c4',\n\t    black: '#000000',\n\t    blanchedalmond: '#ffebcd',\n\t    blue: '#0000ff',\n\t    blueviolet: '#8a2be2',\n\t    brown: '#a52a2a',\n\t    burlywood: '#deb887',\n\t    cadetblue: '#5f9ea0',\n\t    chartreuse: '#7fff00',\n\t    chocolate: '#d2691e',\n\t    coral: '#ff7f50',\n\t    cornflower: '#6495ed',\n\t    cornflowerblue: '#6495ed',\n\t    cornsilk: '#fff8dc',\n\t    crimson: '#dc143c',\n\t    cyan: '#00ffff',\n\t    darkblue: '#00008b',\n\t    darkcyan: '#008b8b',\n\t    darkgoldenrod: '#b8860b',\n\t    darkgray: '#a9a9a9',\n\t    darkgreen: '#006400',\n\t    darkgrey: '#a9a9a9',\n\t    darkkhaki: '#bdb76b',\n\t    darkmagenta: '#8b008b',\n\t    darkolivegreen: '#556b2f',\n\t    darkorange: '#ff8c00',\n\t    darkorchid: '#9932cc',\n\t    darkred: '#8b0000',\n\t    darksalmon: '#e9967a',\n\t    darkseagreen: '#8fbc8f',\n\t    darkslateblue: '#483d8b',\n\t    darkslategray: '#2f4f4f',\n\t    darkslategrey: '#2f4f4f',\n\t    darkturquoise: '#00ced1',\n\t    darkviolet: '#9400d3',\n\t    deeppink: '#ff1493',\n\t    deepskyblue: '#00bfff',\n\t    dimgray: '#696969',\n\t    dimgrey: '#696969',\n\t    dodgerblue: '#1e90ff',\n\t    firebrick: '#b22222',\n\t    floralwhite: '#fffaf0',\n\t    forestgreen: '#228b22',\n\t    fuchsia: '#ff00ff',\n\t    gainsboro: '#dcdcdc',\n\t    ghostwhite: '#f8f8ff',\n\t    gold: '#ffd700',\n\t    goldenrod: '#daa520',\n\t    gray: '#808080',\n\t    green: '#008000',\n\t    greenyellow: '#adff2f',\n\t    grey: '#808080',\n\t    honeydew: '#f0fff0',\n\t    hotpink: '#ff69b4',\n\t    indianred: '#cd5c5c',\n\t    indigo: '#4b0082',\n\t    ivory: '#fffff0',\n\t    khaki: '#f0e68c',\n\t    laserlemon: '#ffff54',\n\t    lavender: '#e6e6fa',\n\t    lavenderblush: '#fff0f5',\n\t    lawngreen: '#7cfc00',\n\t    lemonchiffon: '#fffacd',\n\t    lightblue: '#add8e6',\n\t    lightcoral: '#f08080',\n\t    lightcyan: '#e0ffff',\n\t    lightgoldenrod: '#fafad2',\n\t    lightgoldenrodyellow: '#fafad2',\n\t    lightgray: '#d3d3d3',\n\t    lightgreen: '#90ee90',\n\t    lightgrey: '#d3d3d3',\n\t    lightpink: '#ffb6c1',\n\t    lightsalmon: '#ffa07a',\n\t    lightseagreen: '#20b2aa',\n\t    lightskyblue: '#87cefa',\n\t    lightslategray: '#778899',\n\t    lightslategrey: '#778899',\n\t    lightsteelblue: '#b0c4de',\n\t    lightyellow: '#ffffe0',\n\t    lime: '#00ff00',\n\t    limegreen: '#32cd32',\n\t    linen: '#faf0e6',\n\t    magenta: '#ff00ff',\n\t    maroon: '#800000',\n\t    maroon2: '#7f0000',\n\t    maroon3: '#b03060',\n\t    mediumaquamarine: '#66cdaa',\n\t    mediumblue: '#0000cd',\n\t    mediumorchid: '#ba55d3',\n\t    mediumpurple: '#9370db',\n\t    mediumseagreen: '#3cb371',\n\t    mediumslateblue: '#7b68ee',\n\t    mediumspringgreen: '#00fa9a',\n\t    mediumturquoise: '#48d1cc',\n\t    mediumvioletred: '#c71585',\n\t    midnightblue: '#191970',\n\t    mintcream: '#f5fffa',\n\t    mistyrose: '#ffe4e1',\n\t    moccasin: '#ffe4b5',\n\t    navajowhite: '#ffdead',\n\t    navy: '#000080',\n\t    oldlace: '#fdf5e6',\n\t    olive: '#808000',\n\t    olivedrab: '#6b8e23',\n\t    orange: '#ffa500',\n\t    orangered: '#ff4500',\n\t    orchid: '#da70d6',\n\t    palegoldenrod: '#eee8aa',\n\t    palegreen: '#98fb98',\n\t    paleturquoise: '#afeeee',\n\t    palevioletred: '#db7093',\n\t    papayawhip: '#ffefd5',\n\t    peachpuff: '#ffdab9',\n\t    peru: '#cd853f',\n\t    pink: '#ffc0cb',\n\t    plum: '#dda0dd',\n\t    powderblue: '#b0e0e6',\n\t    purple: '#800080',\n\t    purple2: '#7f007f',\n\t    purple3: '#a020f0',\n\t    rebeccapurple: '#663399',\n\t    red: '#ff0000',\n\t    rosybrown: '#bc8f8f',\n\t    royalblue: '#4169e1',\n\t    saddlebrown: '#8b4513',\n\t    salmon: '#fa8072',\n\t    sandybrown: '#f4a460',\n\t    seagreen: '#2e8b57',\n\t    seashell: '#fff5ee',\n\t    sienna: '#a0522d',\n\t    silver: '#c0c0c0',\n\t    skyblue: '#87ceeb',\n\t    slateblue: '#6a5acd',\n\t    slategray: '#708090',\n\t    slategrey: '#708090',\n\t    snow: '#fffafa',\n\t    springgreen: '#00ff7f',\n\t    steelblue: '#4682b4',\n\t    tan: '#d2b48c',\n\t    teal: '#008080',\n\t    thistle: '#d8bfd8',\n\t    tomato: '#ff6347',\n\t    turquoise: '#40e0d0',\n\t    violet: '#ee82ee',\n\t    wheat: '#f5deb3',\n\t    white: '#ffffff',\n\t    whitesmoke: '#f5f5f5',\n\t    yellow: '#ffff00',\n\t    yellowgreen: '#9acd32'\n\t  };\n\t\n\t  chroma.colors = colors = w3cx11;\n\t\n\t  lab2rgb = function() {\n\t    var a, args, b, g, l, r, x, y, z;\n\t    args = unpack(arguments);\n\t    l = args[0], a = args[1], b = args[2];\n\t    y = (l + 16) / 116;\n\t    x = isNaN(a) ? y : y + a / 500;\n\t    z = isNaN(b) ? y : y - b / 200;\n\t    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n\t    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n\t    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n\t    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n\t    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n\t    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n\t    return [r, g, b, args.length > 3 ? args[3] : 1];\n\t  };\n\t\n\t  xyz_rgb = function(r) {\n\t    return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055);\n\t  };\n\t\n\t  lab_xyz = function(t) {\n\t    if (t > LAB_CONSTANTS.t1) {\n\t      return t * t * t;\n\t    } else {\n\t      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n\t    }\n\t  };\n\t\n\t  LAB_CONSTANTS = {\n\t    Kn: 18,\n\t    Xn: 0.950470,\n\t    Yn: 1,\n\t    Zn: 1.088830,\n\t    t0: 0.137931034,\n\t    t1: 0.206896552,\n\t    t2: 0.12841855,\n\t    t3: 0.008856452\n\t  };\n\t\n\t  rgb2lab = function() {\n\t    var b, g, r, ref, ref1, x, y, z;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n\t    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n\t  };\n\t\n\t  rgb_xyz = function(r) {\n\t    if ((r /= 255) <= 0.04045) {\n\t      return r / 12.92;\n\t    } else {\n\t      return pow((r + 0.055) / 1.055, 2.4);\n\t    }\n\t  };\n\t\n\t  xyz_lab = function(t) {\n\t    if (t > LAB_CONSTANTS.t3) {\n\t      return pow(t, 1 / 3);\n\t    } else {\n\t      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n\t    }\n\t  };\n\t\n\t  rgb2xyz = function() {\n\t    var b, g, r, ref, x, y, z;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    r = rgb_xyz(r);\n\t    g = rgb_xyz(g);\n\t    b = rgb_xyz(b);\n\t    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n\t    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n\t    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n\t    return [x, y, z];\n\t  };\n\t\n\t  chroma.lab = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['lab']), function(){});\n\t  };\n\t\n\t  _input.lab = lab2rgb;\n\t\n\t  Color.prototype.lab = function() {\n\t    return rgb2lab(this._rgb);\n\t  };\n\t\n\t  bezier = function(colors) {\n\t    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n\t    colors = (function() {\n\t      var len, o, results;\n\t      results = [];\n\t      for (o = 0, len = colors.length; o < len; o++) {\n\t        c = colors[o];\n\t        results.push(chroma(c));\n\t      }\n\t      return results;\n\t    })();\n\t    if (colors.length === 2) {\n\t      ref = (function() {\n\t        var len, o, results;\n\t        results = [];\n\t        for (o = 0, len = colors.length; o < len; o++) {\n\t          c = colors[o];\n\t          results.push(c.lab());\n\t        }\n\t        return results;\n\t      })(), lab0 = ref[0], lab1 = ref[1];\n\t      I = function(t) {\n\t        var i, lab;\n\t        lab = (function() {\n\t          var o, results;\n\t          results = [];\n\t          for (i = o = 0; o <= 2; i = ++o) {\n\t            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n\t          }\n\t          return results;\n\t        })();\n\t        return chroma.lab.apply(chroma, lab);\n\t      };\n\t    } else if (colors.length === 3) {\n\t      ref1 = (function() {\n\t        var len, o, results;\n\t        results = [];\n\t        for (o = 0, len = colors.length; o < len; o++) {\n\t          c = colors[o];\n\t          results.push(c.lab());\n\t        }\n\t        return results;\n\t      })(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n\t      I = function(t) {\n\t        var i, lab;\n\t        lab = (function() {\n\t          var o, results;\n\t          results = [];\n\t          for (i = o = 0; o <= 2; i = ++o) {\n\t            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n\t          }\n\t          return results;\n\t        })();\n\t        return chroma.lab.apply(chroma, lab);\n\t      };\n\t    } else if (colors.length === 4) {\n\t      ref2 = (function() {\n\t        var len, o, results;\n\t        results = [];\n\t        for (o = 0, len = colors.length; o < len; o++) {\n\t          c = colors[o];\n\t          results.push(c.lab());\n\t        }\n\t        return results;\n\t      })(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n\t      I = function(t) {\n\t        var i, lab;\n\t        lab = (function() {\n\t          var o, results;\n\t          results = [];\n\t          for (i = o = 0; o <= 2; i = ++o) {\n\t            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n\t          }\n\t          return results;\n\t        })();\n\t        return chroma.lab.apply(chroma, lab);\n\t      };\n\t    } else if (colors.length === 5) {\n\t      I0 = bezier(colors.slice(0, 3));\n\t      I1 = bezier(colors.slice(2, 5));\n\t      I = function(t) {\n\t        if (t < 0.5) {\n\t          return I0(t * 2);\n\t        } else {\n\t          return I1((t - 0.5) * 2);\n\t        }\n\t      };\n\t    }\n\t    return I;\n\t  };\n\t\n\t  chroma.bezier = function(colors) {\n\t    var f;\n\t    f = bezier(colors);\n\t    f.scale = function() {\n\t      return chroma.scale(f);\n\t    };\n\t    return f;\n\t  };\n\t\n\t\n\t  /*\n\t      chroma.js\n\t  \n\t      Copyright (c) 2011-2013, Gregor Aisch\n\t      All rights reserved.\n\t  \n\t      Redistribution and use in source and binary forms, with or without\n\t      modification, are permitted provided that the following conditions are met:\n\t  \n\t      * Redistributions of source code must retain the above copyright notice, this\n\t        list of conditions and the following disclaimer.\n\t  \n\t      * Redistributions in binary form must reproduce the above copyright notice,\n\t        this list of conditions and the following disclaimer in the documentation\n\t        and/or other materials provided with the distribution.\n\t  \n\t      * The name Gregor Aisch may not be used to endorse or promote products\n\t        derived from this software without specific prior written permission.\n\t  \n\t      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n\t      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n\t      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n\t      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n\t      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n\t      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\t      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n\t      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t  \n\t      @source: https://github.com/gka/chroma.js\n\t   */\n\t\n\t  chroma.cubehelix = function(start, rotations, hue, gamma, lightness) {\n\t    var dh, dl, f;\n\t    if (start == null) {\n\t      start = 300;\n\t    }\n\t    if (rotations == null) {\n\t      rotations = -1.5;\n\t    }\n\t    if (hue == null) {\n\t      hue = 1;\n\t    }\n\t    if (gamma == null) {\n\t      gamma = 1;\n\t    }\n\t    if (lightness == null) {\n\t      lightness = [0, 1];\n\t    }\n\t    dh = 0;\n\t    if (type(lightness) === 'array') {\n\t      dl = lightness[1] - lightness[0];\n\t    } else {\n\t      dl = 0;\n\t      lightness = [lightness, lightness];\n\t    }\n\t    f = function(fract) {\n\t      var a, amp, b, cos_a, g, h, l, r, sin_a;\n\t      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n\t      l = pow(lightness[0] + dl * fract, gamma);\n\t      h = dh !== 0 ? hue[0] + fract * dh : hue;\n\t      amp = h * l * (1 - l) / 2;\n\t      cos_a = cos(a);\n\t      sin_a = sin(a);\n\t      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n\t      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n\t      b = l + amp * (+1.97294 * cos_a);\n\t      return chroma(clip_rgb([r * 255, g * 255, b * 255]));\n\t    };\n\t    f.start = function(s) {\n\t      if (s == null) {\n\t        return start;\n\t      }\n\t      start = s;\n\t      return f;\n\t    };\n\t    f.rotations = function(r) {\n\t      if (r == null) {\n\t        return rotations;\n\t      }\n\t      rotations = r;\n\t      return f;\n\t    };\n\t    f.gamma = function(g) {\n\t      if (g == null) {\n\t        return gamma;\n\t      }\n\t      gamma = g;\n\t      return f;\n\t    };\n\t    f.hue = function(h) {\n\t      if (h == null) {\n\t        return hue;\n\t      }\n\t      hue = h;\n\t      if (type(hue) === 'array') {\n\t        dh = hue[1] - hue[0];\n\t        if (dh === 0) {\n\t          hue = hue[1];\n\t        }\n\t      } else {\n\t        dh = 0;\n\t      }\n\t      return f;\n\t    };\n\t    f.lightness = function(h) {\n\t      if (h == null) {\n\t        return lightness;\n\t      }\n\t      if (type(h) === 'array') {\n\t        lightness = h;\n\t        dl = h[1] - h[0];\n\t      } else {\n\t        lightness = [h, h];\n\t        dl = 0;\n\t      }\n\t      return f;\n\t    };\n\t    f.scale = function() {\n\t      return chroma.scale(f);\n\t    };\n\t    f.hue(hue);\n\t    return f;\n\t  };\n\t\n\t  chroma.random = function() {\n\t    var code, digits, i, o;\n\t    digits = '0123456789abcdef';\n\t    code = '#';\n\t    for (i = o = 0; o < 6; i = ++o) {\n\t      code += digits.charAt(floor(Math.random() * 16));\n\t    }\n\t    return new Color(code);\n\t  };\n\t\n\t  chroma.average = function(colors, mode) {\n\t    var A, alpha, c, cnt, dx, dy, first, i, l, len, o, xyz, xyz2;\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    l = colors.length;\n\t    colors = colors.map(function(c) {\n\t      return chroma(c);\n\t    });\n\t    first = colors.splice(0, 1)[0];\n\t    xyz = first.get(mode);\n\t    cnt = [];\n\t    dx = 0;\n\t    dy = 0;\n\t    for (i in xyz) {\n\t      xyz[i] = xyz[i] || 0;\n\t      cnt.push(!isNaN(xyz[i]) ? 1 : 0);\n\t      if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n\t        A = xyz[i] / 180 * PI;\n\t        dx += cos(A);\n\t        dy += sin(A);\n\t      }\n\t    }\n\t    alpha = first.alpha();\n\t    for (o = 0, len = colors.length; o < len; o++) {\n\t      c = colors[o];\n\t      xyz2 = c.get(mode);\n\t      alpha += c.alpha();\n\t      for (i in xyz) {\n\t        if (!isNaN(xyz2[i])) {\n\t          xyz[i] += xyz2[i];\n\t          cnt[i] += 1;\n\t          if (mode.charAt(i) === 'h') {\n\t            A = xyz[i] / 180 * PI;\n\t            dx += cos(A);\n\t            dy += sin(A);\n\t          }\n\t        }\n\t      }\n\t    }\n\t    for (i in xyz) {\n\t      xyz[i] = xyz[i] / cnt[i];\n\t      if (mode.charAt(i) === 'h') {\n\t        A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n\t        while (A < 0) {\n\t          A += 360;\n\t        }\n\t        while (A >= 360) {\n\t          A -= 360;\n\t        }\n\t        xyz[i] = A;\n\t      }\n\t    }\n\t    return chroma(xyz, mode).alpha(alpha / l);\n\t  };\n\t\n\t  _input.rgb = function() {\n\t    var k, ref, results, v;\n\t    ref = unpack(arguments);\n\t    results = [];\n\t    for (k in ref) {\n\t      v = ref[k];\n\t      results.push(v);\n\t    }\n\t    return results;\n\t  };\n\t\n\t  chroma.rgb = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['rgb']), function(){});\n\t  };\n\t\n\t  Color.prototype.rgb = function(round) {\n\t    if (round == null) {\n\t      round = true;\n\t    }\n\t    if (round) {\n\t      return this._rgb.map(Math.round).slice(0, 3);\n\t    } else {\n\t      return this._rgb.slice(0, 3);\n\t    }\n\t  };\n\t\n\t  Color.prototype.rgba = function(round) {\n\t    if (round == null) {\n\t      round = true;\n\t    }\n\t    if (!round) {\n\t      return this._rgb.slice(0);\n\t    }\n\t    return [Math.round(this._rgb[0]), Math.round(this._rgb[1]), Math.round(this._rgb[2]), this._rgb[3]];\n\t  };\n\t\n\t  _guess_formats.push({\n\t    p: 3,\n\t    test: function(n) {\n\t      var a;\n\t      a = unpack(arguments);\n\t      if (type(a) === 'array' && a.length === 3) {\n\t        return 'rgb';\n\t      }\n\t      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n\t        return 'rgb';\n\t      }\n\t    }\n\t  });\n\t\n\t  hex2rgb = function(hex) {\n\t    var a, b, g, r, rgb, u;\n\t    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n\t      if (hex.length === 4 || hex.length === 7) {\n\t        hex = hex.substr(1);\n\t      }\n\t      if (hex.length === 3) {\n\t        hex = hex.split(\"\");\n\t        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n\t      }\n\t      u = parseInt(hex, 16);\n\t      r = u >> 16;\n\t      g = u >> 8 & 0xFF;\n\t      b = u & 0xFF;\n\t      return [r, g, b, 1];\n\t    }\n\t    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n\t      if (hex.length === 9) {\n\t        hex = hex.substr(1);\n\t      }\n\t      u = parseInt(hex, 16);\n\t      r = u >> 24 & 0xFF;\n\t      g = u >> 16 & 0xFF;\n\t      b = u >> 8 & 0xFF;\n\t      a = round((u & 0xFF) / 0xFF * 100) / 100;\n\t      return [r, g, b, a];\n\t    }\n\t    if ((_input.css != null) && (rgb = _input.css(hex))) {\n\t      return rgb;\n\t    }\n\t    throw \"unknown color: \" + hex;\n\t  };\n\t\n\t  rgb2hex = function(channels, mode) {\n\t    var a, b, g, hxa, r, str, u;\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n\t    r = Math.round(r);\n\t    g = Math.round(g);\n\t    b = Math.round(b);\n\t    u = r << 16 | g << 8 | b;\n\t    str = \"000000\" + u.toString(16);\n\t    str = str.substr(str.length - 6);\n\t    hxa = '0' + round(a * 255).toString(16);\n\t    hxa = hxa.substr(hxa.length - 2);\n\t    return \"#\" + (function() {\n\t      switch (mode.toLowerCase()) {\n\t        case 'rgba':\n\t          return str + hxa;\n\t        case 'argb':\n\t          return hxa + str;\n\t        default:\n\t          return str;\n\t      }\n\t    })();\n\t  };\n\t\n\t  _input.hex = function(h) {\n\t    return hex2rgb(h);\n\t  };\n\t\n\t  chroma.hex = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['hex']), function(){});\n\t  };\n\t\n\t  Color.prototype.hex = function(mode) {\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    return rgb2hex(this._rgb, mode);\n\t  };\n\t\n\t  _guess_formats.push({\n\t    p: 4,\n\t    test: function(n) {\n\t      if (arguments.length === 1 && type(n) === \"string\") {\n\t        return 'hex';\n\t      }\n\t    }\n\t  });\n\t\n\t  hsl2rgb = function() {\n\t    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n\t    args = unpack(arguments);\n\t    h = args[0], s = args[1], l = args[2];\n\t    if (s === 0) {\n\t      r = g = b = l * 255;\n\t    } else {\n\t      t3 = [0, 0, 0];\n\t      c = [0, 0, 0];\n\t      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t      t1 = 2 * l - t2;\n\t      h /= 360;\n\t      t3[0] = h + 1 / 3;\n\t      t3[1] = h;\n\t      t3[2] = h - 1 / 3;\n\t      for (i = o = 0; o <= 2; i = ++o) {\n\t        if (t3[i] < 0) {\n\t          t3[i] += 1;\n\t        }\n\t        if (t3[i] > 1) {\n\t          t3[i] -= 1;\n\t        }\n\t        if (6 * t3[i] < 1) {\n\t          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n\t        } else if (2 * t3[i] < 1) {\n\t          c[i] = t2;\n\t        } else if (3 * t3[i] < 2) {\n\t          c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6;\n\t        } else {\n\t          c[i] = t1;\n\t        }\n\t      }\n\t      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n\t    }\n\t    if (args.length > 3) {\n\t      return [r, g, b, args[3]];\n\t    } else {\n\t      return [r, g, b];\n\t    }\n\t  };\n\t\n\t  rgb2hsl = function(r, g, b) {\n\t    var h, l, min, ref, s;\n\t    if (r !== void 0 && r.length >= 3) {\n\t      ref = r, r = ref[0], g = ref[1], b = ref[2];\n\t    }\n\t    r /= 255;\n\t    g /= 255;\n\t    b /= 255;\n\t    min = Math.min(r, g, b);\n\t    max = Math.max(r, g, b);\n\t    l = (max + min) / 2;\n\t    if (max === min) {\n\t      s = 0;\n\t      h = Number.NaN;\n\t    } else {\n\t      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n\t    }\n\t    if (r === max) {\n\t      h = (g - b) / (max - min);\n\t    } else if (g === max) {\n\t      h = 2 + (b - r) / (max - min);\n\t    } else if (b === max) {\n\t      h = 4 + (r - g) / (max - min);\n\t    }\n\t    h *= 60;\n\t    if (h < 0) {\n\t      h += 360;\n\t    }\n\t    return [h, s, l];\n\t  };\n\t\n\t  chroma.hsl = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['hsl']), function(){});\n\t  };\n\t\n\t  _input.hsl = hsl2rgb;\n\t\n\t  Color.prototype.hsl = function() {\n\t    return rgb2hsl(this._rgb);\n\t  };\n\t\n\t  hsv2rgb = function() {\n\t    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n\t    args = unpack(arguments);\n\t    h = args[0], s = args[1], v = args[2];\n\t    v *= 255;\n\t    if (s === 0) {\n\t      r = g = b = v;\n\t    } else {\n\t      if (h === 360) {\n\t        h = 0;\n\t      }\n\t      if (h > 360) {\n\t        h -= 360;\n\t      }\n\t      if (h < 0) {\n\t        h += 360;\n\t      }\n\t      h /= 60;\n\t      i = floor(h);\n\t      f = h - i;\n\t      p = v * (1 - s);\n\t      q = v * (1 - s * f);\n\t      t = v * (1 - s * (1 - f));\n\t      switch (i) {\n\t        case 0:\n\t          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n\t          break;\n\t        case 1:\n\t          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n\t          break;\n\t        case 2:\n\t          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n\t          break;\n\t        case 3:\n\t          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n\t          break;\n\t        case 4:\n\t          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n\t          break;\n\t        case 5:\n\t          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n\t      }\n\t    }\n\t    return [r, g, b, args.length > 3 ? args[3] : 1];\n\t  };\n\t\n\t  rgb2hsv = function() {\n\t    var b, delta, g, h, min, r, ref, s, v;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    min = Math.min(r, g, b);\n\t    max = Math.max(r, g, b);\n\t    delta = max - min;\n\t    v = max / 255.0;\n\t    if (max === 0) {\n\t      h = Number.NaN;\n\t      s = 0;\n\t    } else {\n\t      s = delta / max;\n\t      if (r === max) {\n\t        h = (g - b) / delta;\n\t      }\n\t      if (g === max) {\n\t        h = 2 + (b - r) / delta;\n\t      }\n\t      if (b === max) {\n\t        h = 4 + (r - g) / delta;\n\t      }\n\t      h *= 60;\n\t      if (h < 0) {\n\t        h += 360;\n\t      }\n\t    }\n\t    return [h, s, v];\n\t  };\n\t\n\t  chroma.hsv = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['hsv']), function(){});\n\t  };\n\t\n\t  _input.hsv = hsv2rgb;\n\t\n\t  Color.prototype.hsv = function() {\n\t    return rgb2hsv(this._rgb);\n\t  };\n\t\n\t  num2rgb = function(num) {\n\t    var b, g, r;\n\t    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n\t      r = num >> 16;\n\t      g = (num >> 8) & 0xFF;\n\t      b = num & 0xFF;\n\t      return [r, g, b, 1];\n\t    }\n\t    console.warn(\"unknown num color: \" + num);\n\t    return [0, 0, 0, 1];\n\t  };\n\t\n\t  rgb2num = function() {\n\t    var b, g, r, ref;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    return (r << 16) + (g << 8) + b;\n\t  };\n\t\n\t  chroma.num = function(num) {\n\t    return new Color(num, 'num');\n\t  };\n\t\n\t  Color.prototype.num = function(mode) {\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    return rgb2num(this._rgb, mode);\n\t  };\n\t\n\t  _input.num = num2rgb;\n\t\n\t  _guess_formats.push({\n\t    p: 1,\n\t    test: function(n) {\n\t      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n\t        return 'num';\n\t      }\n\t    }\n\t  });\n\t\n\t  hcg2rgb = function() {\n\t    var _c, _g, args, b, c, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, t, v;\n\t    args = unpack(arguments);\n\t    h = args[0], c = args[1], _g = args[2];\n\t    c = c / 100;\n\t    g = g / 100 * 255;\n\t    _c = c * 255;\n\t    if (c === 0) {\n\t      r = g = b = _g;\n\t    } else {\n\t      if (h === 360) {\n\t        h = 0;\n\t      }\n\t      if (h > 360) {\n\t        h -= 360;\n\t      }\n\t      if (h < 0) {\n\t        h += 360;\n\t      }\n\t      h /= 60;\n\t      i = floor(h);\n\t      f = h - i;\n\t      p = _g * (1 - c);\n\t      q = p + _c * (1 - f);\n\t      t = p + _c * f;\n\t      v = p + _c;\n\t      switch (i) {\n\t        case 0:\n\t          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n\t          break;\n\t        case 1:\n\t          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n\t          break;\n\t        case 2:\n\t          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n\t          break;\n\t        case 3:\n\t          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n\t          break;\n\t        case 4:\n\t          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n\t          break;\n\t        case 5:\n\t          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n\t      }\n\t    }\n\t    return [r, g, b, args.length > 3 ? args[3] : 1];\n\t  };\n\t\n\t  rgb2hcg = function() {\n\t    var _g, b, c, delta, g, h, min, r, ref;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    min = Math.min(r, g, b);\n\t    max = Math.max(r, g, b);\n\t    delta = max - min;\n\t    c = delta * 100 / 255;\n\t    _g = min / (255 - delta) * 100;\n\t    if (delta === 0) {\n\t      h = Number.NaN;\n\t    } else {\n\t      if (r === max) {\n\t        h = (g - b) / delta;\n\t      }\n\t      if (g === max) {\n\t        h = 2 + (b - r) / delta;\n\t      }\n\t      if (b === max) {\n\t        h = 4 + (r - g) / delta;\n\t      }\n\t      h *= 60;\n\t      if (h < 0) {\n\t        h += 360;\n\t      }\n\t    }\n\t    return [h, c, _g];\n\t  };\n\t\n\t  chroma.hcg = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['hcg']), function(){});\n\t  };\n\t\n\t  _input.hcg = hcg2rgb;\n\t\n\t  Color.prototype.hcg = function() {\n\t    return rgb2hcg(this._rgb);\n\t  };\n\t\n\t  css2rgb = function(css) {\n\t    var aa, ab, hsl, i, m, o, rgb, w;\n\t    css = css.toLowerCase();\n\t    if ((chroma.colors != null) && chroma.colors[css]) {\n\t      return hex2rgb(chroma.colors[css]);\n\t    }\n\t    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n\t      rgb = m.slice(1, 4);\n\t      for (i = o = 0; o <= 2; i = ++o) {\n\t        rgb[i] = +rgb[i];\n\t      }\n\t      rgb[3] = 1;\n\t    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n\t      rgb = m.slice(1, 5);\n\t      for (i = w = 0; w <= 3; i = ++w) {\n\t        rgb[i] = +rgb[i];\n\t      }\n\t    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n\t      rgb = m.slice(1, 4);\n\t      for (i = aa = 0; aa <= 2; i = ++aa) {\n\t        rgb[i] = round(rgb[i] * 2.55);\n\t      }\n\t      rgb[3] = 1;\n\t    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n\t      rgb = m.slice(1, 5);\n\t      for (i = ab = 0; ab <= 2; i = ++ab) {\n\t        rgb[i] = round(rgb[i] * 2.55);\n\t      }\n\t      rgb[3] = +rgb[3];\n\t    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n\t      hsl = m.slice(1, 4);\n\t      hsl[1] *= 0.01;\n\t      hsl[2] *= 0.01;\n\t      rgb = hsl2rgb(hsl);\n\t      rgb[3] = 1;\n\t    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n\t      hsl = m.slice(1, 4);\n\t      hsl[1] *= 0.01;\n\t      hsl[2] *= 0.01;\n\t      rgb = hsl2rgb(hsl);\n\t      rgb[3] = +m[4];\n\t    }\n\t    return rgb;\n\t  };\n\t\n\t  rgb2css = function(rgba) {\n\t    var mode;\n\t    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n\t    if (mode === 'rgb') {\n\t      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n\t    } else if (mode === 'rgba') {\n\t      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n\t    } else {\n\t\n\t    }\n\t  };\n\t\n\t  rnd = function(a) {\n\t    return round(a * 100) / 100;\n\t  };\n\t\n\t  hsl2css = function(hsl, alpha) {\n\t    var mode;\n\t    mode = alpha < 1 ? 'hsla' : 'hsl';\n\t    hsl[0] = rnd(hsl[0] || 0);\n\t    hsl[1] = rnd(hsl[1] * 100) + '%';\n\t    hsl[2] = rnd(hsl[2] * 100) + '%';\n\t    if (mode === 'hsla') {\n\t      hsl[3] = alpha;\n\t    }\n\t    return mode + '(' + hsl.join(',') + ')';\n\t  };\n\t\n\t  _input.css = function(h) {\n\t    return css2rgb(h);\n\t  };\n\t\n\t  chroma.css = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['css']), function(){});\n\t  };\n\t\n\t  Color.prototype.css = function(mode) {\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    if (mode.slice(0, 3) === 'rgb') {\n\t      return rgb2css(this._rgb);\n\t    } else if (mode.slice(0, 3) === 'hsl') {\n\t      return hsl2css(this.hsl(), this.alpha());\n\t    }\n\t  };\n\t\n\t  _input.named = function(name) {\n\t    return hex2rgb(w3cx11[name]);\n\t  };\n\t\n\t  _guess_formats.push({\n\t    p: 5,\n\t    test: function(n) {\n\t      if (arguments.length === 1 && (w3cx11[n] != null)) {\n\t        return 'named';\n\t      }\n\t    }\n\t  });\n\t\n\t  Color.prototype.name = function(n) {\n\t    var h, k;\n\t    if (arguments.length) {\n\t      if (w3cx11[n]) {\n\t        this._rgb = hex2rgb(w3cx11[n]);\n\t      }\n\t      this._rgb[3] = 1;\n\t      this;\n\t    }\n\t    h = this.hex();\n\t    for (k in w3cx11) {\n\t      if (h === w3cx11[k]) {\n\t        return k;\n\t      }\n\t    }\n\t    return h;\n\t  };\n\t\n\t  lch2lab = function() {\n\t\n\t    /*\n\t    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n\t    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n\t    out of gamut if the parameters are in the range 0-1.\n\t    \n\t    A saturation multiplier was added by Gregor Aisch\n\t     */\n\t    var c, h, l, ref;\n\t    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n\t    h = h * DEG2RAD;\n\t    return [l, cos(h) * c, sin(h) * c];\n\t  };\n\t\n\t  lch2rgb = function() {\n\t    var L, a, args, b, c, g, h, l, r, ref, ref1;\n\t    args = unpack(arguments);\n\t    l = args[0], c = args[1], h = args[2];\n\t    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n\t    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n\t    return [r, g, b, args.length > 3 ? args[3] : 1];\n\t  };\n\t\n\t  lab2lch = function() {\n\t    var a, b, c, h, l, ref;\n\t    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n\t    c = sqrt(a * a + b * b);\n\t    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n\t    if (round(c * 10000) === 0) {\n\t      h = Number.NaN;\n\t    }\n\t    return [l, c, h];\n\t  };\n\t\n\t  rgb2lch = function() {\n\t    var a, b, g, l, r, ref, ref1;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n\t    return lab2lch(l, a, b);\n\t  };\n\t\n\t  chroma.lch = function() {\n\t    var args;\n\t    args = unpack(arguments);\n\t    return new Color(args, 'lch');\n\t  };\n\t\n\t  chroma.hcl = function() {\n\t    var args;\n\t    args = unpack(arguments);\n\t    return new Color(args, 'hcl');\n\t  };\n\t\n\t  _input.lch = lch2rgb;\n\t\n\t  _input.hcl = function() {\n\t    var c, h, l, ref;\n\t    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n\t    return lch2rgb([l, c, h]);\n\t  };\n\t\n\t  Color.prototype.lch = function() {\n\t    return rgb2lch(this._rgb);\n\t  };\n\t\n\t  Color.prototype.hcl = function() {\n\t    return rgb2lch(this._rgb).reverse();\n\t  };\n\t\n\t  rgb2cmyk = function(mode) {\n\t    var b, c, f, g, k, m, r, ref, y;\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    r = r / 255;\n\t    g = g / 255;\n\t    b = b / 255;\n\t    k = 1 - Math.max(r, Math.max(g, b));\n\t    f = k < 1 ? 1 / (1 - k) : 0;\n\t    c = (1 - r - k) * f;\n\t    m = (1 - g - k) * f;\n\t    y = (1 - b - k) * f;\n\t    return [c, m, y, k];\n\t  };\n\t\n\t  cmyk2rgb = function() {\n\t    var alpha, args, b, c, g, k, m, r, y;\n\t    args = unpack(arguments);\n\t    c = args[0], m = args[1], y = args[2], k = args[3];\n\t    alpha = args.length > 4 ? args[4] : 1;\n\t    if (k === 1) {\n\t      return [0, 0, 0, alpha];\n\t    }\n\t    r = c >= 1 ? 0 : 255 * (1 - c) * (1 - k);\n\t    g = m >= 1 ? 0 : 255 * (1 - m) * (1 - k);\n\t    b = y >= 1 ? 0 : 255 * (1 - y) * (1 - k);\n\t    return [r, g, b, alpha];\n\t  };\n\t\n\t  _input.cmyk = function() {\n\t    return cmyk2rgb(unpack(arguments));\n\t  };\n\t\n\t  chroma.cmyk = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['cmyk']), function(){});\n\t  };\n\t\n\t  Color.prototype.cmyk = function() {\n\t    return rgb2cmyk(this._rgb);\n\t  };\n\t\n\t  _input.gl = function() {\n\t    var i, k, o, rgb, v;\n\t    rgb = (function() {\n\t      var ref, results;\n\t      ref = unpack(arguments);\n\t      results = [];\n\t      for (k in ref) {\n\t        v = ref[k];\n\t        results.push(v);\n\t      }\n\t      return results;\n\t    }).apply(this, arguments);\n\t    for (i = o = 0; o <= 2; i = ++o) {\n\t      rgb[i] *= 255;\n\t    }\n\t    return rgb;\n\t  };\n\t\n\t  chroma.gl = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['gl']), function(){});\n\t  };\n\t\n\t  Color.prototype.gl = function() {\n\t    var rgb;\n\t    rgb = this._rgb;\n\t    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n\t  };\n\t\n\t  rgb2luminance = function(r, g, b) {\n\t    var ref;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    r = luminance_x(r);\n\t    g = luminance_x(g);\n\t    b = luminance_x(b);\n\t    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n\t  };\n\t\n\t  luminance_x = function(x) {\n\t    x /= 255;\n\t    if (x <= 0.03928) {\n\t      return x / 12.92;\n\t    } else {\n\t      return pow((x + 0.055) / 1.055, 2.4);\n\t    }\n\t  };\n\t\n\t  _interpolators = [];\n\t\n\t  interpolate = function(col1, col2, f, m) {\n\t    var interpol, len, o, res;\n\t    if (f == null) {\n\t      f = 0.5;\n\t    }\n\t    if (m == null) {\n\t      m = 'rgb';\n\t    }\n\t\n\t    /*\n\t    interpolates between colors\n\t    f = 0 --> me\n\t    f = 1 --> col\n\t     */\n\t    if (type(col1) !== 'object') {\n\t      col1 = chroma(col1);\n\t    }\n\t    if (type(col2) !== 'object') {\n\t      col2 = chroma(col2);\n\t    }\n\t    for (o = 0, len = _interpolators.length; o < len; o++) {\n\t      interpol = _interpolators[o];\n\t      if (m === interpol[0]) {\n\t        res = interpol[1](col1, col2, f, m);\n\t        break;\n\t      }\n\t    }\n\t    if (res == null) {\n\t      throw \"color mode \" + m + \" is not supported\";\n\t    }\n\t    return res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n\t  };\n\t\n\t  chroma.interpolate = interpolate;\n\t\n\t  Color.prototype.interpolate = function(col2, f, m) {\n\t    return interpolate(this, col2, f, m);\n\t  };\n\t\n\t  chroma.mix = interpolate;\n\t\n\t  Color.prototype.mix = Color.prototype.interpolate;\n\t\n\t  interpolate_rgb = function(col1, col2, f, m) {\n\t    var xyz0, xyz1;\n\t    xyz0 = col1._rgb;\n\t    xyz1 = col2._rgb;\n\t    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n\t  };\n\t\n\t  _interpolators.push(['rgb', interpolate_rgb]);\n\t\n\t  Color.prototype.luminance = function(lum, mode) {\n\t    var cur_lum, eps, max_iter, test;\n\t    if (mode == null) {\n\t      mode = 'rgb';\n\t    }\n\t    if (!arguments.length) {\n\t      return rgb2luminance(this._rgb);\n\t    }\n\t    if (lum === 0) {\n\t      this._rgb = [0, 0, 0, this._rgb[3]];\n\t    } else if (lum === 1) {\n\t      this._rgb = [255, 255, 255, this._rgb[3]];\n\t    } else {\n\t      eps = 1e-7;\n\t      max_iter = 20;\n\t      test = function(l, h) {\n\t        var lm, m;\n\t        m = l.interpolate(h, 0.5, mode);\n\t        lm = m.luminance();\n\t        if (Math.abs(lum - lm) < eps || !max_iter--) {\n\t          return m;\n\t        }\n\t        if (lm > lum) {\n\t          return test(l, m);\n\t        }\n\t        return test(m, h);\n\t      };\n\t      cur_lum = rgb2luminance(this._rgb);\n\t      this._rgb = (cur_lum > lum ? test(chroma('black'), this) : test(this, chroma('white'))).rgba();\n\t    }\n\t    return this;\n\t  };\n\t\n\t  temperature2rgb = function(kelvin) {\n\t    var b, g, r, temp;\n\t    temp = kelvin / 100;\n\t    if (temp < 66) {\n\t      r = 255;\n\t      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n\t      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n\t    } else {\n\t      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n\t      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n\t      b = 255;\n\t    }\n\t    return [r, g, b];\n\t  };\n\t\n\t  rgb2temperature = function() {\n\t    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    minTemp = 1000;\n\t    maxTemp = 40000;\n\t    eps = 0.4;\n\t    while (maxTemp - minTemp > eps) {\n\t      temp = (maxTemp + minTemp) * 0.5;\n\t      rgb = temperature2rgb(temp);\n\t      if ((rgb[2] / rgb[0]) >= (b / r)) {\n\t        maxTemp = temp;\n\t      } else {\n\t        minTemp = temp;\n\t      }\n\t    }\n\t    return round(temp);\n\t  };\n\t\n\t  chroma.temperature = chroma.kelvin = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['temperature']), function(){});\n\t  };\n\t\n\t  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\t\n\t  Color.prototype.temperature = function() {\n\t    return rgb2temperature(this._rgb);\n\t  };\n\t\n\t  Color.prototype.kelvin = Color.prototype.temperature;\n\t\n\t  chroma.contrast = function(a, b) {\n\t    var l1, l2, ref, ref1;\n\t    if ((ref = type(a)) === 'string' || ref === 'number') {\n\t      a = new Color(a);\n\t    }\n\t    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n\t      b = new Color(b);\n\t    }\n\t    l1 = a.luminance();\n\t    l2 = b.luminance();\n\t    if (l1 > l2) {\n\t      return (l1 + 0.05) / (l2 + 0.05);\n\t    } else {\n\t      return (l2 + 0.05) / (l1 + 0.05);\n\t    }\n\t  };\n\t\n\t  chroma.distance = function(a, b, mode) {\n\t    var d, i, l1, l2, ref, ref1, sum_sq;\n\t    if (mode == null) {\n\t      mode = 'lab';\n\t    }\n\t    if ((ref = type(a)) === 'string' || ref === 'number') {\n\t      a = new Color(a);\n\t    }\n\t    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n\t      b = new Color(b);\n\t    }\n\t    l1 = a.get(mode);\n\t    l2 = b.get(mode);\n\t    sum_sq = 0;\n\t    for (i in l1) {\n\t      d = (l1[i] || 0) - (l2[i] || 0);\n\t      sum_sq += d * d;\n\t    }\n\t    return Math.sqrt(sum_sq);\n\t  };\n\t\n\t  chroma.deltaE = function(a, b, L, C) {\n\t    var L1, L2, a1, a2, b1, b2, c1, c2, c4, dH2, delA, delB, delC, delL, f, h1, ref, ref1, ref2, ref3, sc, sh, sl, t, v1, v2, v3;\n\t    if (L == null) {\n\t      L = 1;\n\t    }\n\t    if (C == null) {\n\t      C = 1;\n\t    }\n\t    if ((ref = type(a)) === 'string' || ref === 'number') {\n\t      a = new Color(a);\n\t    }\n\t    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n\t      b = new Color(b);\n\t    }\n\t    ref2 = a.lab(), L1 = ref2[0], a1 = ref2[1], b1 = ref2[2];\n\t    ref3 = b.lab(), L2 = ref3[0], a2 = ref3[1], b2 = ref3[2];\n\t    c1 = sqrt(a1 * a1 + b1 * b1);\n\t    c2 = sqrt(a2 * a2 + b2 * b2);\n\t    sl = L1 < 16.0 ? 0.511 : (0.040975 * L1) / (1.0 + 0.01765 * L1);\n\t    sc = (0.0638 * c1) / (1.0 + 0.0131 * c1) + 0.638;\n\t    h1 = c1 < 0.000001 ? 0.0 : (atan2(b1, a1) * 180.0) / PI;\n\t    while (h1 < 0) {\n\t      h1 += 360;\n\t    }\n\t    while (h1 >= 360) {\n\t      h1 -= 360;\n\t    }\n\t    t = (h1 >= 164.0) && (h1 <= 345.0) ? 0.56 + abs(0.2 * cos((PI * (h1 + 168.0)) / 180.0)) : 0.36 + abs(0.4 * cos((PI * (h1 + 35.0)) / 180.0));\n\t    c4 = c1 * c1 * c1 * c1;\n\t    f = sqrt(c4 / (c4 + 1900.0));\n\t    sh = sc * (f * t + 1.0 - f);\n\t    delL = L1 - L2;\n\t    delC = c1 - c2;\n\t    delA = a1 - a2;\n\t    delB = b1 - b2;\n\t    dH2 = delA * delA + delB * delB - delC * delC;\n\t    v1 = delL / (L * sl);\n\t    v2 = delC / (C * sc);\n\t    v3 = sh;\n\t    return sqrt(v1 * v1 + v2 * v2 + (dH2 / (v3 * v3)));\n\t  };\n\t\n\t  Color.prototype.get = function(modechan) {\n\t    var channel, i, me, mode, ref, src;\n\t    me = this;\n\t    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n\t    src = me[mode]();\n\t    if (channel) {\n\t      i = mode.indexOf(channel);\n\t      if (i > -1) {\n\t        return src[i];\n\t      } else {\n\t        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n\t      }\n\t    } else {\n\t      return src;\n\t    }\n\t  };\n\t\n\t  Color.prototype.set = function(modechan, value) {\n\t    var channel, i, me, mode, ref, src;\n\t    me = this;\n\t    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n\t    if (channel) {\n\t      src = me[mode]();\n\t      i = mode.indexOf(channel);\n\t      if (i > -1) {\n\t        if (type(value) === 'string') {\n\t          switch (value.charAt(0)) {\n\t            case '+':\n\t              src[i] += +value;\n\t              break;\n\t            case '-':\n\t              src[i] += +value;\n\t              break;\n\t            case '*':\n\t              src[i] *= +(value.substr(1));\n\t              break;\n\t            case '/':\n\t              src[i] /= +(value.substr(1));\n\t              break;\n\t            default:\n\t              src[i] = +value;\n\t          }\n\t        } else {\n\t          src[i] = value;\n\t        }\n\t      } else {\n\t        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n\t      }\n\t    } else {\n\t      src = value;\n\t    }\n\t    return chroma(src, mode).alpha(me.alpha());\n\t  };\n\t\n\t  Color.prototype.clipped = function() {\n\t    return this._rgb._clipped || false;\n\t  };\n\t\n\t  Color.prototype.alpha = function(a) {\n\t    if (arguments.length) {\n\t      return chroma.rgb([this._rgb[0], this._rgb[1], this._rgb[2], a]);\n\t    }\n\t    return this._rgb[3];\n\t  };\n\t\n\t  Color.prototype.darken = function(amount) {\n\t    var lab, me;\n\t    if (amount == null) {\n\t      amount = 1;\n\t    }\n\t    me = this;\n\t    lab = me.lab();\n\t    lab[0] -= LAB_CONSTANTS.Kn * amount;\n\t    return chroma.lab(lab).alpha(me.alpha());\n\t  };\n\t\n\t  Color.prototype.brighten = function(amount) {\n\t    if (amount == null) {\n\t      amount = 1;\n\t    }\n\t    return this.darken(-amount);\n\t  };\n\t\n\t  Color.prototype.darker = Color.prototype.darken;\n\t\n\t  Color.prototype.brighter = Color.prototype.brighten;\n\t\n\t  Color.prototype.saturate = function(amount) {\n\t    var lch, me;\n\t    if (amount == null) {\n\t      amount = 1;\n\t    }\n\t    me = this;\n\t    lch = me.lch();\n\t    lch[1] += amount * LAB_CONSTANTS.Kn;\n\t    if (lch[1] < 0) {\n\t      lch[1] = 0;\n\t    }\n\t    return chroma.lch(lch).alpha(me.alpha());\n\t  };\n\t\n\t  Color.prototype.desaturate = function(amount) {\n\t    if (amount == null) {\n\t      amount = 1;\n\t    }\n\t    return this.saturate(-amount);\n\t  };\n\t\n\t  Color.prototype.premultiply = function() {\n\t    var a, rgb;\n\t    rgb = this.rgb();\n\t    a = this.alpha();\n\t    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n\t  };\n\t\n\t  blend = function(bottom, top, mode) {\n\t    if (!blend[mode]) {\n\t      throw 'unknown blend mode ' + mode;\n\t    }\n\t    return blend[mode](bottom, top);\n\t  };\n\t\n\t  blend_f = function(f) {\n\t    return function(bottom, top) {\n\t      var c0, c1;\n\t      c0 = chroma(top).rgb();\n\t      c1 = chroma(bottom).rgb();\n\t      return chroma(f(c0, c1), 'rgb');\n\t    };\n\t  };\n\t\n\t  each = function(f) {\n\t    return function(c0, c1) {\n\t      var i, o, out;\n\t      out = [];\n\t      for (i = o = 0; o <= 3; i = ++o) {\n\t        out[i] = f(c0[i], c1[i]);\n\t      }\n\t      return out;\n\t    };\n\t  };\n\t\n\t  normal = function(a, b) {\n\t    return a;\n\t  };\n\t\n\t  multiply = function(a, b) {\n\t    return a * b / 255;\n\t  };\n\t\n\t  darken = function(a, b) {\n\t    if (a > b) {\n\t      return b;\n\t    } else {\n\t      return a;\n\t    }\n\t  };\n\t\n\t  lighten = function(a, b) {\n\t    if (a > b) {\n\t      return a;\n\t    } else {\n\t      return b;\n\t    }\n\t  };\n\t\n\t  screen = function(a, b) {\n\t    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n\t  };\n\t\n\t  overlay = function(a, b) {\n\t    if (b < 128) {\n\t      return 2 * a * b / 255;\n\t    } else {\n\t      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n\t    }\n\t  };\n\t\n\t  burn = function(a, b) {\n\t    return 255 * (1 - (1 - b / 255) / (a / 255));\n\t  };\n\t\n\t  dodge = function(a, b) {\n\t    if (a === 255) {\n\t      return 255;\n\t    }\n\t    a = 255 * (b / 255) / (1 - a / 255);\n\t    if (a > 255) {\n\t      return 255;\n\t    } else {\n\t      return a;\n\t    }\n\t  };\n\t\n\t  blend.normal = blend_f(each(normal));\n\t\n\t  blend.multiply = blend_f(each(multiply));\n\t\n\t  blend.screen = blend_f(each(screen));\n\t\n\t  blend.overlay = blend_f(each(overlay));\n\t\n\t  blend.darken = blend_f(each(darken));\n\t\n\t  blend.lighten = blend_f(each(lighten));\n\t\n\t  blend.dodge = blend_f(each(dodge));\n\t\n\t  blend.burn = blend_f(each(burn));\n\t\n\t  chroma.blend = blend;\n\t\n\t  chroma.analyze = function(data) {\n\t    var len, o, r, val;\n\t    r = {\n\t      min: Number.MAX_VALUE,\n\t      max: Number.MAX_VALUE * -1,\n\t      sum: 0,\n\t      values: [],\n\t      count: 0\n\t    };\n\t    for (o = 0, len = data.length; o < len; o++) {\n\t      val = data[o];\n\t      if ((val != null) && !isNaN(val)) {\n\t        r.values.push(val);\n\t        r.sum += val;\n\t        if (val < r.min) {\n\t          r.min = val;\n\t        }\n\t        if (val > r.max) {\n\t          r.max = val;\n\t        }\n\t        r.count += 1;\n\t      }\n\t    }\n\t    r.domain = [r.min, r.max];\n\t    r.limits = function(mode, num) {\n\t      return chroma.limits(r, mode, num);\n\t    };\n\t    return r;\n\t  };\n\t\n\t  chroma.scale = function(colors, positions) {\n\t    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, _useCache, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n\t    _mode = 'rgb';\n\t    _nacol = chroma('#ccc');\n\t    _spread = 0;\n\t    _fixed = false;\n\t    _domain = [0, 1];\n\t    _pos = [];\n\t    _padding = [0, 0];\n\t    _classes = false;\n\t    _colors = [];\n\t    _out = false;\n\t    _min = 0;\n\t    _max = 1;\n\t    _correctLightness = false;\n\t    _colorCache = {};\n\t    _useCache = true;\n\t    setColors = function(colors) {\n\t      var c, col, o, ref, ref1, w;\n\t      if (colors == null) {\n\t        colors = ['#fff', '#000'];\n\t      }\n\t      if ((colors != null) && type(colors) === 'string' && (chroma.brewer != null)) {\n\t        colors = chroma.brewer[colors] || chroma.brewer[colors.toLowerCase()] || colors;\n\t      }\n\t      if (type(colors) === 'array') {\n\t        colors = colors.slice(0);\n\t        for (c = o = 0, ref = colors.length - 1; 0 <= ref ? o <= ref : o >= ref; c = 0 <= ref ? ++o : --o) {\n\t          col = colors[c];\n\t          if (type(col) === \"string\") {\n\t            colors[c] = chroma(col);\n\t          }\n\t        }\n\t        _pos.length = 0;\n\t        for (c = w = 0, ref1 = colors.length - 1; 0 <= ref1 ? w <= ref1 : w >= ref1; c = 0 <= ref1 ? ++w : --w) {\n\t          _pos.push(c / (colors.length - 1));\n\t        }\n\t      }\n\t      resetCache();\n\t      return _colors = colors;\n\t    };\n\t    getClass = function(value) {\n\t      var i, n;\n\t      if (_classes != null) {\n\t        n = _classes.length - 1;\n\t        i = 0;\n\t        while (i < n && value >= _classes[i]) {\n\t          i++;\n\t        }\n\t        return i - 1;\n\t      }\n\t      return 0;\n\t    };\n\t    tmap = function(t) {\n\t      return t;\n\t    };\n\t    classifyValue = function(value) {\n\t      var i, maxc, minc, n, val;\n\t      val = value;\n\t      if (_classes.length > 2) {\n\t        n = _classes.length - 1;\n\t        i = getClass(value);\n\t        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n\t        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n\t        val = _min + ((_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc)) * (_max - _min);\n\t      }\n\t      return val;\n\t    };\n\t    getColor = function(val, bypassMap) {\n\t      var c, col, i, k, o, p, ref, t;\n\t      if (bypassMap == null) {\n\t        bypassMap = false;\n\t      }\n\t      if (isNaN(val)) {\n\t        return _nacol;\n\t      }\n\t      if (!bypassMap) {\n\t        if (_classes && _classes.length > 2) {\n\t          c = getClass(val);\n\t          t = c / (_classes.length - 2);\n\t          t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n\t        } else if (_max !== _min) {\n\t          t = (val - _min) / (_max - _min);\n\t          t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n\t          t = Math.min(1, Math.max(0, t));\n\t        } else {\n\t          t = 1;\n\t        }\n\t      } else {\n\t        t = val;\n\t      }\n\t      if (!bypassMap) {\n\t        t = tmap(t);\n\t      }\n\t      k = Math.floor(t * 10000);\n\t      if (_useCache && _colorCache[k]) {\n\t        col = _colorCache[k];\n\t      } else {\n\t        if (type(_colors) === 'array') {\n\t          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n\t            p = _pos[i];\n\t            if (t <= p) {\n\t              col = _colors[i];\n\t              break;\n\t            }\n\t            if (t >= p && i === _pos.length - 1) {\n\t              col = _colors[i];\n\t              break;\n\t            }\n\t            if (t > p && t < _pos[i + 1]) {\n\t              t = (t - p) / (_pos[i + 1] - p);\n\t              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n\t              break;\n\t            }\n\t          }\n\t        } else if (type(_colors) === 'function') {\n\t          col = _colors(t);\n\t        }\n\t        if (_useCache) {\n\t          _colorCache[k] = col;\n\t        }\n\t      }\n\t      return col;\n\t    };\n\t    resetCache = function() {\n\t      return _colorCache = {};\n\t    };\n\t    setColors(colors);\n\t    f = function(v) {\n\t      var c;\n\t      c = chroma(getColor(v));\n\t      if (_out && c[_out]) {\n\t        return c[_out]();\n\t      } else {\n\t        return c;\n\t      }\n\t    };\n\t    f.classes = function(classes) {\n\t      var d;\n\t      if (classes != null) {\n\t        if (type(classes) === 'array') {\n\t          _classes = classes;\n\t          _domain = [classes[0], classes[classes.length - 1]];\n\t        } else {\n\t          d = chroma.analyze(_domain);\n\t          if (classes === 0) {\n\t            _classes = [d.min, d.max];\n\t          } else {\n\t            _classes = chroma.limits(d, 'e', classes);\n\t          }\n\t        }\n\t        return f;\n\t      }\n\t      return _classes;\n\t    };\n\t    f.domain = function(domain) {\n\t      var c, d, k, len, o, ref, w;\n\t      if (!arguments.length) {\n\t        return _domain;\n\t      }\n\t      _min = domain[0];\n\t      _max = domain[domain.length - 1];\n\t      _pos = [];\n\t      k = _colors.length;\n\t      if (domain.length === k && _min !== _max) {\n\t        for (o = 0, len = domain.length; o < len; o++) {\n\t          d = domain[o];\n\t          _pos.push((d - _min) / (_max - _min));\n\t        }\n\t      } else {\n\t        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n\t          _pos.push(c / (k - 1));\n\t        }\n\t      }\n\t      _domain = [_min, _max];\n\t      return f;\n\t    };\n\t    f.mode = function(_m) {\n\t      if (!arguments.length) {\n\t        return _mode;\n\t      }\n\t      _mode = _m;\n\t      resetCache();\n\t      return f;\n\t    };\n\t    f.range = function(colors, _pos) {\n\t      setColors(colors, _pos);\n\t      return f;\n\t    };\n\t    f.out = function(_o) {\n\t      _out = _o;\n\t      return f;\n\t    };\n\t    f.spread = function(val) {\n\t      if (!arguments.length) {\n\t        return _spread;\n\t      }\n\t      _spread = val;\n\t      return f;\n\t    };\n\t    f.correctLightness = function(v) {\n\t      if (v == null) {\n\t        v = true;\n\t      }\n\t      _correctLightness = v;\n\t      resetCache();\n\t      if (_correctLightness) {\n\t        tmap = function(t) {\n\t          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n\t          L0 = getColor(0, true).lab()[0];\n\t          L1 = getColor(1, true).lab()[0];\n\t          pol = L0 > L1;\n\t          L_actual = getColor(t, true).lab()[0];\n\t          L_ideal = L0 + (L1 - L0) * t;\n\t          L_diff = L_actual - L_ideal;\n\t          t0 = 0;\n\t          t1 = 1;\n\t          max_iter = 20;\n\t          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n\t            (function() {\n\t              if (pol) {\n\t                L_diff *= -1;\n\t              }\n\t              if (L_diff < 0) {\n\t                t0 = t;\n\t                t += (t1 - t) * 0.5;\n\t              } else {\n\t                t1 = t;\n\t                t += (t0 - t) * 0.5;\n\t              }\n\t              L_actual = getColor(t, true).lab()[0];\n\t              return L_diff = L_actual - L_ideal;\n\t            })();\n\t          }\n\t          return t;\n\t        };\n\t      } else {\n\t        tmap = function(t) {\n\t          return t;\n\t        };\n\t      }\n\t      return f;\n\t    };\n\t    f.padding = function(p) {\n\t      if (p != null) {\n\t        if (type(p) === 'number') {\n\t          p = [p, p];\n\t        }\n\t        _padding = p;\n\t        return f;\n\t      } else {\n\t        return _padding;\n\t      }\n\t    };\n\t    f.colors = function(numColors, out) {\n\t      var dd, dm, i, o, ref, results, samples, w;\n\t      if (out == null) {\n\t        out = 'hex';\n\t      }\n\t      if (arguments.length === 0) {\n\t        return _colors.map(function(c) {\n\t          return c[out]();\n\t        });\n\t      }\n\t      if (numColors) {\n\t        if (numColors === 1) {\n\t          return f(0.5)[out]();\n\t        }\n\t        dm = _domain[0];\n\t        dd = _domain[1] - dm;\n\t        return (function() {\n\t          results = [];\n\t          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--){ results.push(o); }\n\t          return results;\n\t        }).apply(this).map(function(i) {\n\t          return f(dm + i / (numColors - 1) * dd)[out]();\n\t        });\n\t      }\n\t      colors = [];\n\t      samples = [];\n\t      if (_classes && _classes.length > 2) {\n\t        for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n\t          samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n\t        }\n\t      } else {\n\t        samples = _domain;\n\t      }\n\t      return samples.map(function(v) {\n\t        return f(v)[out]();\n\t      });\n\t    };\n\t    f.cache = function(c) {\n\t      if (c != null) {\n\t        return _useCache = c;\n\t      } else {\n\t        return _useCache;\n\t      }\n\t    };\n\t    return f;\n\t  };\n\t\n\t  if (chroma.scales == null) {\n\t    chroma.scales = {};\n\t  }\n\t\n\t  chroma.scales.cool = function() {\n\t    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n\t  };\n\t\n\t  chroma.scales.hot = function() {\n\t    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n\t  };\n\t\n\t  chroma.analyze = function(data, key, filter) {\n\t    var add, k, len, o, r, val, visit;\n\t    r = {\n\t      min: Number.MAX_VALUE,\n\t      max: Number.MAX_VALUE * -1,\n\t      sum: 0,\n\t      values: [],\n\t      count: 0\n\t    };\n\t    if (filter == null) {\n\t      filter = function() {\n\t        return true;\n\t      };\n\t    }\n\t    add = function(val) {\n\t      if ((val != null) && !isNaN(val)) {\n\t        r.values.push(val);\n\t        r.sum += val;\n\t        if (val < r.min) {\n\t          r.min = val;\n\t        }\n\t        if (val > r.max) {\n\t          r.max = val;\n\t        }\n\t        r.count += 1;\n\t      }\n\t    };\n\t    visit = function(val, k) {\n\t      if (filter(val, k)) {\n\t        if ((key != null) && type(key) === 'function') {\n\t          return add(key(val));\n\t        } else if ((key != null) && type(key) === 'string' || type(key) === 'number') {\n\t          return add(val[key]);\n\t        } else {\n\t          return add(val);\n\t        }\n\t      }\n\t    };\n\t    if (type(data) === 'array') {\n\t      for (o = 0, len = data.length; o < len; o++) {\n\t        val = data[o];\n\t        visit(val);\n\t      }\n\t    } else {\n\t      for (k in data) {\n\t        val = data[k];\n\t        visit(val, k);\n\t      }\n\t    }\n\t    r.domain = [r.min, r.max];\n\t    r.limits = function(mode, num) {\n\t      return chroma.limits(r, mode, num);\n\t    };\n\t    return r;\n\t  };\n\t\n\t  chroma.limits = function(data, mode, num) {\n\t    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, v, value, values, w;\n\t    if (mode == null) {\n\t      mode = 'equal';\n\t    }\n\t    if (num == null) {\n\t      num = 7;\n\t    }\n\t    if (type(data) === 'array') {\n\t      data = chroma.analyze(data);\n\t    }\n\t    min = data.min;\n\t    max = data.max;\n\t    sum = data.sum;\n\t    values = data.values.sort(function(a, b) {\n\t      return a - b;\n\t    });\n\t    if (num === 1) {\n\t      return [min, max];\n\t    }\n\t    limits = [];\n\t    if (mode.substr(0, 1) === 'c') {\n\t      limits.push(min);\n\t      limits.push(max);\n\t    }\n\t    if (mode.substr(0, 1) === 'e') {\n\t      limits.push(min);\n\t      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n\t        limits.push(min + (i / num) * (max - min));\n\t      }\n\t      limits.push(max);\n\t    } else if (mode.substr(0, 1) === 'l') {\n\t      if (min <= 0) {\n\t        throw 'Logarithmic scales are only possible for values > 0';\n\t      }\n\t      min_log = Math.LOG10E * log(min);\n\t      max_log = Math.LOG10E * log(max);\n\t      limits.push(min);\n\t      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n\t        limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n\t      }\n\t      limits.push(max);\n\t    } else if (mode.substr(0, 1) === 'q') {\n\t      limits.push(min);\n\t      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n\t        p = (values.length - 1) * i / num;\n\t        pb = floor(p);\n\t        if (pb === p) {\n\t          limits.push(values[pb]);\n\t        } else {\n\t          pr = p - pb;\n\t          limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n\t        }\n\t      }\n\t      limits.push(max);\n\t    } else if (mode.substr(0, 1) === 'k') {\n\t\n\t      /*\n\t      implementation based on\n\t      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n\t      simplified for 1-d input values\n\t       */\n\t      n = values.length;\n\t      assignments = new Array(n);\n\t      clusterSizes = new Array(num);\n\t      repeat = true;\n\t      nb_iters = 0;\n\t      centroids = null;\n\t      centroids = [];\n\t      centroids.push(min);\n\t      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n\t        centroids.push(min + (i / num) * (max - min));\n\t      }\n\t      centroids.push(max);\n\t      while (repeat) {\n\t        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n\t          clusterSizes[j] = 0;\n\t        }\n\t        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n\t          value = values[i];\n\t          mindist = Number.MAX_VALUE;\n\t          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n\t            dist = abs(centroids[j] - value);\n\t            if (dist < mindist) {\n\t              mindist = dist;\n\t              best = j;\n\t            }\n\t          }\n\t          clusterSizes[best]++;\n\t          assignments[i] = best;\n\t        }\n\t        newCentroids = new Array(num);\n\t        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n\t          newCentroids[j] = null;\n\t        }\n\t        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n\t          cluster = assignments[i];\n\t          if (newCentroids[cluster] === null) {\n\t            newCentroids[cluster] = values[i];\n\t          } else {\n\t            newCentroids[cluster] += values[i];\n\t          }\n\t        }\n\t        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n\t          newCentroids[j] *= 1 / clusterSizes[j];\n\t        }\n\t        repeat = false;\n\t        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n\t          if (newCentroids[j] !== centroids[i]) {\n\t            repeat = true;\n\t            break;\n\t          }\n\t        }\n\t        centroids = newCentroids;\n\t        nb_iters++;\n\t        if (nb_iters > 200) {\n\t          repeat = false;\n\t        }\n\t      }\n\t      kClusters = {};\n\t      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n\t        kClusters[j] = [];\n\t      }\n\t      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n\t        cluster = assignments[i];\n\t        kClusters[cluster].push(values[i]);\n\t      }\n\t      tmpKMeansBreaks = [];\n\t      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n\t        tmpKMeansBreaks.push(kClusters[j][0]);\n\t        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n\t      }\n\t      tmpKMeansBreaks = tmpKMeansBreaks.sort(function(a, b) {\n\t        return a - b;\n\t      });\n\t      limits.push(tmpKMeansBreaks[0]);\n\t      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n\t        v = tmpKMeansBreaks[i];\n\t        if (!isNaN(v) && limits.indexOf(v) === -1) {\n\t          limits.push(v);\n\t        }\n\t      }\n\t    }\n\t    return limits;\n\t  };\n\t\n\t  hsi2rgb = function(h, s, i) {\n\t\n\t    /*\n\t    borrowed from here:\n\t    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n\t     */\n\t    var args, b, g, r;\n\t    args = unpack(arguments);\n\t    h = args[0], s = args[1], i = args[2];\n\t    if (isNaN(h)) {\n\t      h = 0;\n\t    }\n\t    h /= 360;\n\t    if (h < 1 / 3) {\n\t      b = (1 - s) / 3;\n\t      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n\t      g = 1 - (b + r);\n\t    } else if (h < 2 / 3) {\n\t      h -= 1 / 3;\n\t      r = (1 - s) / 3;\n\t      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n\t      b = 1 - (r + g);\n\t    } else {\n\t      h -= 2 / 3;\n\t      g = (1 - s) / 3;\n\t      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n\t      r = 1 - (g + b);\n\t    }\n\t    r = limit(i * r * 3);\n\t    g = limit(i * g * 3);\n\t    b = limit(i * b * 3);\n\t    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n\t  };\n\t\n\t  rgb2hsi = function() {\n\t\n\t    /*\n\t    borrowed from here:\n\t    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n\t     */\n\t    var b, g, h, i, min, r, ref, s;\n\t    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n\t    TWOPI = Math.PI * 2;\n\t    r /= 255;\n\t    g /= 255;\n\t    b /= 255;\n\t    min = Math.min(r, g, b);\n\t    i = (r + g + b) / 3;\n\t    s = 1 - min / i;\n\t    if (s === 0) {\n\t      h = 0;\n\t    } else {\n\t      h = ((r - g) + (r - b)) / 2;\n\t      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n\t      h = Math.acos(h);\n\t      if (b > g) {\n\t        h = TWOPI - h;\n\t      }\n\t      h /= TWOPI;\n\t    }\n\t    return [h * 360, s, i];\n\t  };\n\t\n\t  chroma.hsi = function() {\n\t    return (function(func, args, ctor) {\n\t      ctor.prototype = func.prototype;\n\t      var child = new ctor, result = func.apply(child, args);\n\t      return Object(result) === result ? result : child;\n\t    })(Color, slice.call(arguments).concat(['hsi']), function(){});\n\t  };\n\t\n\t  _input.hsi = hsi2rgb;\n\t\n\t  Color.prototype.hsi = function() {\n\t    return rgb2hsi(this._rgb);\n\t  };\n\t\n\t  interpolate_hsx = function(col1, col2, f, m) {\n\t    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n\t    if (m === 'hsl') {\n\t      xyz0 = col1.hsl();\n\t      xyz1 = col2.hsl();\n\t    } else if (m === 'hsv') {\n\t      xyz0 = col1.hsv();\n\t      xyz1 = col2.hsv();\n\t    } else if (m === 'hcg') {\n\t      xyz0 = col1.hcg();\n\t      xyz1 = col2.hcg();\n\t    } else if (m === 'hsi') {\n\t      xyz0 = col1.hsi();\n\t      xyz1 = col2.hsi();\n\t    } else if (m === 'lch' || m === 'hcl') {\n\t      m = 'hcl';\n\t      xyz0 = col1.hcl();\n\t      xyz1 = col2.hcl();\n\t    }\n\t    if (m.substr(0, 1) === 'h') {\n\t      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n\t      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n\t    }\n\t    if (!isNaN(hue0) && !isNaN(hue1)) {\n\t      if (hue1 > hue0 && hue1 - hue0 > 180) {\n\t        dh = hue1 - (hue0 + 360);\n\t      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n\t        dh = hue1 + 360 - hue0;\n\t      } else {\n\t        dh = hue1 - hue0;\n\t      }\n\t      hue = hue0 + f * dh;\n\t    } else if (!isNaN(hue0)) {\n\t      hue = hue0;\n\t      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n\t        sat = sat0;\n\t      }\n\t    } else if (!isNaN(hue1)) {\n\t      hue = hue1;\n\t      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n\t        sat = sat1;\n\t      }\n\t    } else {\n\t      hue = Number.NaN;\n\t    }\n\t    if (sat == null) {\n\t      sat = sat0 + f * (sat1 - sat0);\n\t    }\n\t    lbv = lbv0 + f * (lbv1 - lbv0);\n\t    return res = chroma[m](hue, sat, lbv);\n\t  };\n\t\n\t  _interpolators = _interpolators.concat((function() {\n\t    var len, o, ref, results;\n\t    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch', 'hcg'];\n\t    results = [];\n\t    for (o = 0, len = ref.length; o < len; o++) {\n\t      m = ref[o];\n\t      results.push([m, interpolate_hsx]);\n\t    }\n\t    return results;\n\t  })());\n\t\n\t  interpolate_num = function(col1, col2, f, m) {\n\t    var n1, n2;\n\t    n1 = col1.num();\n\t    n2 = col2.num();\n\t    return chroma.num(n1 + (n2 - n1) * f, 'num');\n\t  };\n\t\n\t  _interpolators.push(['num', interpolate_num]);\n\t\n\t  interpolate_lab = function(col1, col2, f, m) {\n\t    var res, xyz0, xyz1;\n\t    xyz0 = col1.lab();\n\t    xyz1 = col2.lab();\n\t    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n\t  };\n\t\n\t  _interpolators.push(['lab', interpolate_lab]);\n\t\n\t}).call(this);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(23)(module)))\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tfunction sineIn (t) {\n\t  var v = Math.cos(t * Math.PI * 0.5)\n\t  if (Math.abs(v) < 1e-14) return 1\n\t  else return 1 - v\n\t}\n\t\n\tmodule.exports = sineIn\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tfunction sineOut(t) {\n\t  return Math.sin(t * Math.PI/2)\n\t}\n\t\n\tmodule.exports = sineOut\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t//This file contains the ES6 extensions to the core Promises/A+ API\n\t\n\tvar Promise = __webpack_require__(4);\n\t\n\tmodule.exports = Promise;\n\t\n\t/* Static Functions */\n\t\n\tvar TRUE = valuePromise(true);\n\tvar FALSE = valuePromise(false);\n\tvar NULL = valuePromise(null);\n\tvar UNDEFINED = valuePromise(undefined);\n\tvar ZERO = valuePromise(0);\n\tvar EMPTYSTRING = valuePromise('');\n\t\n\tfunction valuePromise(value) {\n\t  var p = new Promise(Promise._61);\n\t  p._81 = 1;\n\t  p._65 = value;\n\t  return p;\n\t}\n\tPromise.resolve = function (value) {\n\t  if (value instanceof Promise) return value;\n\t\n\t  if (value === null) return NULL;\n\t  if (value === undefined) return UNDEFINED;\n\t  if (value === true) return TRUE;\n\t  if (value === false) return FALSE;\n\t  if (value === 0) return ZERO;\n\t  if (value === '') return EMPTYSTRING;\n\t\n\t  if (typeof value === 'object' || typeof value === 'function') {\n\t    try {\n\t      var then = value.then;\n\t      if (typeof then === 'function') {\n\t        return new Promise(then.bind(value));\n\t      }\n\t    } catch (ex) {\n\t      return new Promise(function (resolve, reject) {\n\t        reject(ex);\n\t      });\n\t    }\n\t  }\n\t  return valuePromise(value);\n\t};\n\t\n\tPromise.all = function (arr) {\n\t  var args = Array.prototype.slice.call(arr);\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    if (args.length === 0) return resolve([]);\n\t    var remaining = args.length;\n\t    function res(i, val) {\n\t      if (val && (typeof val === 'object' || typeof val === 'function')) {\n\t        if (val instanceof Promise && val.then === Promise.prototype.then) {\n\t          while (val._81 === 3) {\n\t            val = val._65;\n\t          }\n\t          if (val._81 === 1) return res(i, val._65);\n\t          if (val._81 === 2) reject(val._65);\n\t          val.then(function (val) {\n\t            res(i, val);\n\t          }, reject);\n\t          return;\n\t        } else {\n\t          var then = val.then;\n\t          if (typeof then === 'function') {\n\t            var p = new Promise(then.bind(val));\n\t            p.then(function (val) {\n\t              res(i, val);\n\t            }, reject);\n\t            return;\n\t          }\n\t        }\n\t      }\n\t      args[i] = val;\n\t      if (--remaining === 0) {\n\t        resolve(args);\n\t      }\n\t    }\n\t    for (var i = 0; i < args.length; i++) {\n\t      res(i, args[i]);\n\t    }\n\t  });\n\t};\n\t\n\tPromise.reject = function (value) {\n\t  return new Promise(function (resolve, reject) {\n\t    reject(value);\n\t  });\n\t};\n\t\n\tPromise.race = function (values) {\n\t  return new Promise(function (resolve, reject) {\n\t    values.forEach(function(value){\n\t      Promise.resolve(value).then(resolve, reject);\n\t    });\n\t  });\n\t};\n\t\n\t/* Prototype Methods */\n\t\n\tPromise.prototype['catch'] = function (onRejected) {\n\t  return this.then(null, onRejected);\n\t};\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Promise = __webpack_require__(4);\n\t\n\tvar DEFAULT_WHITELIST = [\n\t  ReferenceError,\n\t  TypeError,\n\t  RangeError\n\t];\n\t\n\tvar enabled = false;\n\texports.disable = disable;\n\tfunction disable() {\n\t  enabled = false;\n\t  Promise._10 = null;\n\t  Promise._97 = null;\n\t}\n\t\n\texports.enable = enable;\n\tfunction enable(options) {\n\t  options = options || {};\n\t  if (enabled) disable();\n\t  enabled = true;\n\t  var id = 0;\n\t  var displayId = 0;\n\t  var rejections = {};\n\t  Promise._10 = function (promise) {\n\t    if (\n\t      promise._81 === 2 && // IS REJECTED\n\t      rejections[promise._72]\n\t    ) {\n\t      if (rejections[promise._72].logged) {\n\t        onHandled(promise._72);\n\t      } else {\n\t        clearTimeout(rejections[promise._72].timeout);\n\t      }\n\t      delete rejections[promise._72];\n\t    }\n\t  };\n\t  Promise._97 = function (promise, err) {\n\t    if (promise._45 === 0) { // not yet handled\n\t      promise._72 = id++;\n\t      rejections[promise._72] = {\n\t        displayId: null,\n\t        error: err,\n\t        timeout: setTimeout(\n\t          onUnhandled.bind(null, promise._72),\n\t          // For reference errors and type errors, this almost always\n\t          // means the programmer made a mistake, so log them after just\n\t          // 100ms\n\t          // otherwise, wait 2 seconds to see if they get handled\n\t          matchWhitelist(err, DEFAULT_WHITELIST)\n\t            ? 100\n\t            : 2000\n\t        ),\n\t        logged: false\n\t      };\n\t    }\n\t  };\n\t  function onUnhandled(id) {\n\t    if (\n\t      options.allRejections ||\n\t      matchWhitelist(\n\t        rejections[id].error,\n\t        options.whitelist || DEFAULT_WHITELIST\n\t      )\n\t    ) {\n\t      rejections[id].displayId = displayId++;\n\t      if (options.onUnhandled) {\n\t        rejections[id].logged = true;\n\t        options.onUnhandled(\n\t          rejections[id].displayId,\n\t          rejections[id].error\n\t        );\n\t      } else {\n\t        rejections[id].logged = true;\n\t        logError(\n\t          rejections[id].displayId,\n\t          rejections[id].error\n\t        );\n\t      }\n\t    }\n\t  }\n\t  function onHandled(id) {\n\t    if (rejections[id].logged) {\n\t      if (options.onHandled) {\n\t        options.onHandled(rejections[id].displayId, rejections[id].error);\n\t      } else if (!rejections[id].onUnhandled) {\n\t        console.warn(\n\t          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n\t        );\n\t        console.warn(\n\t          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n\t          rejections[id].displayId + '.'\n\t        );\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tfunction logError(id, error) {\n\t  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n\t  var errStr = (error && (error.stack || error)) + '';\n\t  errStr.split('\\n').forEach(function (line) {\n\t    console.warn('  ' + line);\n\t  });\n\t}\n\t\n\tfunction matchWhitelist(error, list) {\n\t  return list.some(function (cls) {\n\t    return error instanceof cls;\n\t  });\n\t}\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\"use strict\";\n\t\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tmodule.exports = rawAsap;\n\tfunction rawAsap(task) {\n\t    if (!queue.length) {\n\t        requestFlush();\n\t        flushing = true;\n\t    }\n\t    // Equivalent to push, but avoids a function call.\n\t    queue[queue.length] = task;\n\t}\n\t\n\tvar queue = [];\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\tvar flushing = false;\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tvar requestFlush;\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tvar index = 0;\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tvar capacity = 1024;\n\t\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tfunction flush() {\n\t    while (index < queue.length) {\n\t        var currentIndex = index;\n\t        // Advance the index before calling the task. This ensures that we will\n\t        // begin flushing on the next task the task throws an error.\n\t        index = index + 1;\n\t        queue[currentIndex].call();\n\t        // Prevent leaking memory for long chains of recursive calls to `asap`.\n\t        // If we call `asap` within tasks scheduled by `asap`, the queue will\n\t        // grow, but to avoid an O(n) walk for every task we execute, we don't\n\t        // shift tasks off the queue after they have been executed.\n\t        // Instead, we periodically shift 1024 tasks off the queue.\n\t        if (index > capacity) {\n\t            // Manually shift all values starting at the index back to the\n\t            // beginning of the queue.\n\t            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n\t                queue[scan] = queue[scan + index];\n\t            }\n\t            queue.length -= index;\n\t            index = 0;\n\t        }\n\t    }\n\t    queue.length = 0;\n\t    index = 0;\n\t    flushing = false;\n\t}\n\t\n\t// `requestFlush` is implemented using a strategy based on data collected from\n\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\n\t// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n\t// have WebKitMutationObserver but not un-prefixed MutationObserver.\n\t// Must use `global` or `self` instead of `window` to work in both frames and web\n\t// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\t\n\t/* globals self */\n\tvar scope = typeof global !== \"undefined\" ? global : self;\n\tvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\t\n\t// MutationObservers are desirable because they have high priority and work\n\t// reliably everywhere they are implemented.\n\t// They are implemented in all modern browsers.\n\t//\n\t// - Android 4-4.3\n\t// - Chrome 26-34\n\t// - Firefox 14-29\n\t// - Internet Explorer 11\n\t// - iPad Safari 6-7.1\n\t// - iPhone Safari 7-7.1\n\t// - Safari 6-7\n\tif (typeof BrowserMutationObserver === \"function\") {\n\t    requestFlush = makeRequestCallFromMutationObserver(flush);\n\t\n\t// MessageChannels are desirable because they give direct access to the HTML\n\t// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t// 11-12, and in web workers in many engines.\n\t// Although message channels yield to any queued rendering and IO tasks, they\n\t// would be better than imposing the 4ms delay of timers.\n\t// However, they do not work reliably in Internet Explorer or Safari.\n\t\n\t// Internet Explorer 10 is the only browser that has setImmediate but does\n\t// not have MutationObservers.\n\t// Although setImmediate yields to the browser's renderer, it would be\n\t// preferrable to falling back to setTimeout since it does not have\n\t// the minimum 4ms penalty.\n\t// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t// Desktop to a lesser extent) that renders both setImmediate and\n\t// MessageChannel useless for the purposes of ASAP.\n\t// https://github.com/kriskowal/q/issues/396\n\t\n\t// Timers are implemented universally.\n\t// We fall back to timers in workers in most engines, and in foreground\n\t// contexts in the following browsers.\n\t// However, note that even this simple case requires nuances to operate in a\n\t// broad spectrum of browsers.\n\t//\n\t// - Firefox 3-13\n\t// - Internet Explorer 6-9\n\t// - iPad Safari 4.3\n\t// - Lynx 2.8.7\n\t} else {\n\t    requestFlush = makeRequestCallFromTimer(flush);\n\t}\n\t\n\t// `requestFlush` requests that the high priority event queue be flushed as\n\t// soon as possible.\n\t// This is useful to prevent an error thrown in a task from stalling the event\n\t// queue if the exception handled by Node.jss\n\t// `process.on(\"uncaughtException\")` or by a domain.\n\trawAsap.requestFlush = requestFlush;\n\t\n\t// To request a high priority event, we induce a mutation observer by toggling\n\t// the text of a text node between \"1\" and \"-1\".\n\tfunction makeRequestCallFromMutationObserver(callback) {\n\t    var toggle = 1;\n\t    var observer = new BrowserMutationObserver(callback);\n\t    var node = document.createTextNode(\"\");\n\t    observer.observe(node, {characterData: true});\n\t    return function requestCall() {\n\t        toggle = -toggle;\n\t        node.data = toggle;\n\t    };\n\t}\n\t\n\t// The message channel technique was discovered by Malte Ubl and was the\n\t// original foundation for this library.\n\t// http://www.nonblocking.io/2011/06/windownexttick.html\n\t\n\t// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n\t// page's first load. Thankfully, this version of Safari supports\n\t// MutationObservers, so we don't need to fall back in that case.\n\t\n\t// function makeRequestCallFromMessageChannel(callback) {\n\t//     var channel = new MessageChannel();\n\t//     channel.port1.onmessage = callback;\n\t//     return function requestCall() {\n\t//         channel.port2.postMessage(0);\n\t//     };\n\t// }\n\t\n\t// For reasons explained above, we are also unable to use `setImmediate`\n\t// under any circumstances.\n\t// Even if we were, there is another bug in Internet Explorer 10.\n\t// It is not sufficient to assign `setImmediate` to `requestFlush` because\n\t// `setImmediate` must be called *by name* and therefore must be wrapped in a\n\t// closure.\n\t// Never forget.\n\t\n\t// function makeRequestCallFromSetImmediate(callback) {\n\t//     return function requestCall() {\n\t//         setImmediate(callback);\n\t//     };\n\t// }\n\t\n\t// Safari 6.0 has a problem where timers will get lost while the user is\n\t// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n\t// mutation observers, so that implementation is used instead.\n\t// However, if we ever elect to use timers in Safari, the prevalent work-around\n\t// is to add a scroll event listener that calls for a flush.\n\t\n\t// `setTimeout` does not call the passed callback if the delay is less than\n\t// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n\t// even then.\n\t\n\tfunction makeRequestCallFromTimer(callback) {\n\t    return function requestCall() {\n\t        // We dispatch a timeout with a specified delay of 0 for engines that\n\t        // can reliably accommodate that request. This will usually be snapped\n\t        // to a 4 milisecond delay, but once we're flushing, there's no delay\n\t        // between events.\n\t        var timeoutHandle = setTimeout(handleTimer, 0);\n\t        // However, since this timer gets frequently dropped in Firefox\n\t        // workers, we enlist an interval handle that will try to fire\n\t        // an event 20 times per second until it succeeds.\n\t        var intervalHandle = setInterval(handleTimer, 50);\n\t\n\t        function handleTimer() {\n\t            // Whichever timer succeeds will cancel both timers and\n\t            // execute the callback.\n\t            clearTimeout(timeoutHandle);\n\t            clearInterval(intervalHandle);\n\t            callback();\n\t        }\n\t    };\n\t}\n\t\n\t// This is for `asap.js` only.\n\t// Its name will be periodically randomized to break any code that depends on\n\t// its existence.\n\trawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\t\n\t// ASAP was originally a nextTick shim included in Q. This was factored out\n\t// into this ASAP package. It was later adapted to RSVP which made further\n\t// amendments. These decisions, particularly to marginalize MessageChannel and\n\t// to capture the MutationObserver implementation in a closure, were integrated\n\t// back into ASAP proper.\n\t// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t(function(self) {\n\t  'use strict';\n\t\n\t  if (self.fetch) {\n\t    return\n\t  }\n\t\n\t  var support = {\n\t    searchParams: 'URLSearchParams' in self,\n\t    iterable: 'Symbol' in self && 'iterator' in Symbol,\n\t    blob: 'FileReader' in self && 'Blob' in self && (function() {\n\t      try {\n\t        new Blob()\n\t        return true\n\t      } catch(e) {\n\t        return false\n\t      }\n\t    })(),\n\t    formData: 'FormData' in self,\n\t    arrayBuffer: 'ArrayBuffer' in self\n\t  }\n\t\n\t  if (support.arrayBuffer) {\n\t    var viewClasses = [\n\t      '[object Int8Array]',\n\t      '[object Uint8Array]',\n\t      '[object Uint8ClampedArray]',\n\t      '[object Int16Array]',\n\t      '[object Uint16Array]',\n\t      '[object Int32Array]',\n\t      '[object Uint32Array]',\n\t      '[object Float32Array]',\n\t      '[object Float64Array]'\n\t    ]\n\t\n\t    var isDataView = function(obj) {\n\t      return obj && DataView.prototype.isPrototypeOf(obj)\n\t    }\n\t\n\t    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n\t      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n\t    }\n\t  }\n\t\n\t  function normalizeName(name) {\n\t    if (typeof name !== 'string') {\n\t      name = String(name)\n\t    }\n\t    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n\t      throw new TypeError('Invalid character in header field name')\n\t    }\n\t    return name.toLowerCase()\n\t  }\n\t\n\t  function normalizeValue(value) {\n\t    if (typeof value !== 'string') {\n\t      value = String(value)\n\t    }\n\t    return value\n\t  }\n\t\n\t  // Build a destructive iterator for the value list\n\t  function iteratorFor(items) {\n\t    var iterator = {\n\t      next: function() {\n\t        var value = items.shift()\n\t        return {done: value === undefined, value: value}\n\t      }\n\t    }\n\t\n\t    if (support.iterable) {\n\t      iterator[Symbol.iterator] = function() {\n\t        return iterator\n\t      }\n\t    }\n\t\n\t    return iterator\n\t  }\n\t\n\t  function Headers(headers) {\n\t    this.map = {}\n\t\n\t    if (headers instanceof Headers) {\n\t      headers.forEach(function(value, name) {\n\t        this.append(name, value)\n\t      }, this)\n\t\n\t    } else if (headers) {\n\t      Object.getOwnPropertyNames(headers).forEach(function(name) {\n\t        this.append(name, headers[name])\n\t      }, this)\n\t    }\n\t  }\n\t\n\t  Headers.prototype.append = function(name, value) {\n\t    name = normalizeName(name)\n\t    value = normalizeValue(value)\n\t    var oldValue = this.map[name]\n\t    this.map[name] = oldValue ? oldValue+','+value : value\n\t  }\n\t\n\t  Headers.prototype['delete'] = function(name) {\n\t    delete this.map[normalizeName(name)]\n\t  }\n\t\n\t  Headers.prototype.get = function(name) {\n\t    name = normalizeName(name)\n\t    return this.has(name) ? this.map[name] : null\n\t  }\n\t\n\t  Headers.prototype.has = function(name) {\n\t    return this.map.hasOwnProperty(normalizeName(name))\n\t  }\n\t\n\t  Headers.prototype.set = function(name, value) {\n\t    this.map[normalizeName(name)] = normalizeValue(value)\n\t  }\n\t\n\t  Headers.prototype.forEach = function(callback, thisArg) {\n\t    for (var name in this.map) {\n\t      if (this.map.hasOwnProperty(name)) {\n\t        callback.call(thisArg, this.map[name], name, this)\n\t      }\n\t    }\n\t  }\n\t\n\t  Headers.prototype.keys = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push(name) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.values = function() {\n\t    var items = []\n\t    this.forEach(function(value) { items.push(value) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.entries = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push([name, value]) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  if (support.iterable) {\n\t    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n\t  }\n\t\n\t  function consumed(body) {\n\t    if (body.bodyUsed) {\n\t      return Promise.reject(new TypeError('Already read'))\n\t    }\n\t    body.bodyUsed = true\n\t  }\n\t\n\t  function fileReaderReady(reader) {\n\t    return new Promise(function(resolve, reject) {\n\t      reader.onload = function() {\n\t        resolve(reader.result)\n\t      }\n\t      reader.onerror = function() {\n\t        reject(reader.error)\n\t      }\n\t    })\n\t  }\n\t\n\t  function readBlobAsArrayBuffer(blob) {\n\t    var reader = new FileReader()\n\t    var promise = fileReaderReady(reader)\n\t    reader.readAsArrayBuffer(blob)\n\t    return promise\n\t  }\n\t\n\t  function readBlobAsText(blob) {\n\t    var reader = new FileReader()\n\t    var promise = fileReaderReady(reader)\n\t    reader.readAsText(blob)\n\t    return promise\n\t  }\n\t\n\t  function readArrayBufferAsText(buf) {\n\t    var view = new Uint8Array(buf)\n\t    var chars = new Array(view.length)\n\t\n\t    for (var i = 0; i < view.length; i++) {\n\t      chars[i] = String.fromCharCode(view[i])\n\t    }\n\t    return chars.join('')\n\t  }\n\t\n\t  function bufferClone(buf) {\n\t    if (buf.slice) {\n\t      return buf.slice(0)\n\t    } else {\n\t      var view = new Uint8Array(buf.byteLength)\n\t      view.set(new Uint8Array(buf))\n\t      return view.buffer\n\t    }\n\t  }\n\t\n\t  function Body() {\n\t    this.bodyUsed = false\n\t\n\t    this._initBody = function(body) {\n\t      this._bodyInit = body\n\t      if (!body) {\n\t        this._bodyText = ''\n\t      } else if (typeof body === 'string') {\n\t        this._bodyText = body\n\t      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n\t        this._bodyBlob = body\n\t      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n\t        this._bodyFormData = body\n\t      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t        this._bodyText = body.toString()\n\t      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n\t        this._bodyArrayBuffer = bufferClone(body.buffer)\n\t        // IE 10-11 can't handle a DataView body.\n\t        this._bodyInit = new Blob([this._bodyArrayBuffer])\n\t      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n\t        this._bodyArrayBuffer = bufferClone(body)\n\t      } else {\n\t        throw new Error('unsupported BodyInit type')\n\t      }\n\t\n\t      if (!this.headers.get('content-type')) {\n\t        if (typeof body === 'string') {\n\t          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n\t        } else if (this._bodyBlob && this._bodyBlob.type) {\n\t          this.headers.set('content-type', this._bodyBlob.type)\n\t        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n\t        }\n\t      }\n\t    }\n\t\n\t    if (support.blob) {\n\t      this.blob = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return Promise.resolve(this._bodyBlob)\n\t        } else if (this._bodyArrayBuffer) {\n\t          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as blob')\n\t        } else {\n\t          return Promise.resolve(new Blob([this._bodyText]))\n\t        }\n\t      }\n\t\n\t      this.arrayBuffer = function() {\n\t        if (this._bodyArrayBuffer) {\n\t          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n\t        } else {\n\t          return this.blob().then(readBlobAsArrayBuffer)\n\t        }\n\t      }\n\t    }\n\t\n\t    this.text = function() {\n\t      var rejected = consumed(this)\n\t      if (rejected) {\n\t        return rejected\n\t      }\n\t\n\t      if (this._bodyBlob) {\n\t        return readBlobAsText(this._bodyBlob)\n\t      } else if (this._bodyArrayBuffer) {\n\t        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n\t      } else if (this._bodyFormData) {\n\t        throw new Error('could not read FormData body as text')\n\t      } else {\n\t        return Promise.resolve(this._bodyText)\n\t      }\n\t    }\n\t\n\t    if (support.formData) {\n\t      this.formData = function() {\n\t        return this.text().then(decode)\n\t      }\n\t    }\n\t\n\t    this.json = function() {\n\t      return this.text().then(JSON.parse)\n\t    }\n\t\n\t    return this\n\t  }\n\t\n\t  // HTTP methods whose capitalization should be normalized\n\t  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\t\n\t  function normalizeMethod(method) {\n\t    var upcased = method.toUpperCase()\n\t    return (methods.indexOf(upcased) > -1) ? upcased : method\n\t  }\n\t\n\t  function Request(input, options) {\n\t    options = options || {}\n\t    var body = options.body\n\t\n\t    if (input instanceof Request) {\n\t      if (input.bodyUsed) {\n\t        throw new TypeError('Already read')\n\t      }\n\t      this.url = input.url\n\t      this.credentials = input.credentials\n\t      if (!options.headers) {\n\t        this.headers = new Headers(input.headers)\n\t      }\n\t      this.method = input.method\n\t      this.mode = input.mode\n\t      if (!body && input._bodyInit != null) {\n\t        body = input._bodyInit\n\t        input.bodyUsed = true\n\t      }\n\t    } else {\n\t      this.url = String(input)\n\t    }\n\t\n\t    this.credentials = options.credentials || this.credentials || 'omit'\n\t    if (options.headers || !this.headers) {\n\t      this.headers = new Headers(options.headers)\n\t    }\n\t    this.method = normalizeMethod(options.method || this.method || 'GET')\n\t    this.mode = options.mode || this.mode || null\n\t    this.referrer = null\n\t\n\t    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n\t      throw new TypeError('Body not allowed for GET or HEAD requests')\n\t    }\n\t    this._initBody(body)\n\t  }\n\t\n\t  Request.prototype.clone = function() {\n\t    return new Request(this, { body: this._bodyInit })\n\t  }\n\t\n\t  function decode(body) {\n\t    var form = new FormData()\n\t    body.trim().split('&').forEach(function(bytes) {\n\t      if (bytes) {\n\t        var split = bytes.split('=')\n\t        var name = split.shift().replace(/\\+/g, ' ')\n\t        var value = split.join('=').replace(/\\+/g, ' ')\n\t        form.append(decodeURIComponent(name), decodeURIComponent(value))\n\t      }\n\t    })\n\t    return form\n\t  }\n\t\n\t  function parseHeaders(rawHeaders) {\n\t    var headers = new Headers()\n\t    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n\t      var parts = line.split(':')\n\t      var key = parts.shift().trim()\n\t      if (key) {\n\t        var value = parts.join(':').trim()\n\t        headers.append(key, value)\n\t      }\n\t    })\n\t    return headers\n\t  }\n\t\n\t  Body.call(Request.prototype)\n\t\n\t  function Response(bodyInit, options) {\n\t    if (!options) {\n\t      options = {}\n\t    }\n\t\n\t    this.type = 'default'\n\t    this.status = 'status' in options ? options.status : 200\n\t    this.ok = this.status >= 200 && this.status < 300\n\t    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n\t    this.headers = new Headers(options.headers)\n\t    this.url = options.url || ''\n\t    this._initBody(bodyInit)\n\t  }\n\t\n\t  Body.call(Response.prototype)\n\t\n\t  Response.prototype.clone = function() {\n\t    return new Response(this._bodyInit, {\n\t      status: this.status,\n\t      statusText: this.statusText,\n\t      headers: new Headers(this.headers),\n\t      url: this.url\n\t    })\n\t  }\n\t\n\t  Response.error = function() {\n\t    var response = new Response(null, {status: 0, statusText: ''})\n\t    response.type = 'error'\n\t    return response\n\t  }\n\t\n\t  var redirectStatuses = [301, 302, 303, 307, 308]\n\t\n\t  Response.redirect = function(url, status) {\n\t    if (redirectStatuses.indexOf(status) === -1) {\n\t      throw new RangeError('Invalid status code')\n\t    }\n\t\n\t    return new Response(null, {status: status, headers: {location: url}})\n\t  }\n\t\n\t  self.Headers = Headers\n\t  self.Request = Request\n\t  self.Response = Response\n\t\n\t  self.fetch = function(input, init) {\n\t    return new Promise(function(resolve, reject) {\n\t      var request = new Request(input, init)\n\t      var xhr = new XMLHttpRequest()\n\t\n\t      xhr.onload = function() {\n\t        var options = {\n\t          status: xhr.status,\n\t          statusText: xhr.statusText,\n\t          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n\t        }\n\t        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n\t        var body = 'response' in xhr ? xhr.response : xhr.responseText\n\t        resolve(new Response(body, options))\n\t      }\n\t\n\t      xhr.onerror = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.ontimeout = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.open(request.method, request.url, true)\n\t\n\t      if (request.credentials === 'include') {\n\t        xhr.withCredentials = true\n\t      }\n\t\n\t      if ('responseType' in xhr && support.blob) {\n\t        xhr.responseType = 'blob'\n\t      }\n\t\n\t      request.headers.forEach(function(value, name) {\n\t        xhr.setRequestHeader(name, value)\n\t      })\n\t\n\t      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n\t    })\n\t  }\n\t  self.fetch.polyfill = true\n\t})(typeof self !== 'undefined' ? self : this);\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// static/js/main.a70d4241.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/trainwreck/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a5da833cfa635f189b3c","export default class KeyListener {\r\n\t\r\n\tconstructor(keyCode, press, release) {\r\n\t\tthis.code = keyCode;\r\n\t\tthis.isDown = false;\r\n\t\tthis.isUp = true;\r\n\t\tthis.press = press;\r\n\t\tthis.release = release;\r\n\r\n\t\tthis.downHandler = event => {\r\n\t\t\tif (event.keyCode === this.code) {\r\n\t\t\t\tif (this.isUp && this.press) this.press();\r\n\t\t\t\tthis.isDown = true;\r\n\t\t\t\tthis.isUp = false;\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.upHandler = event => {\r\n\t\t\tif (event.keyCode === this.code) {\r\n\t\t\t\tif (this.isDown && this.release) this.release();\r\n\t\t\t\tthis.isDown = false;\r\n\t\t\t\tthis.isUp = true;\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"keydown\", this.downHandler, false);\r\n\t\twindow.addEventListener(\"keyup\", this.upHandler, false);\r\n\t}\r\n\r\n\tclose() {\r\n\t\twindow.removeEventListener(\"keydown\",  this.downHandler);\r\n\t\twindow.removeEventListener(\"keyup\", this.upHandler);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/KeyListener.js","import chroma from 'chroma-js';\r\nimport World from './World';\r\n\r\nexport default class Train extends PIXI.Container {\r\n\r\n\tconstructor(world, x, y, direction, enemy) {\r\n\t\tsuper();\r\n\r\n\t\tthis.world = world;\r\n\t\tthis.direction = direction;\r\n\t\tthis.speed = Train.INITIAL_SPEED;\r\n\t\tthis.isCrashed = false;\r\n\r\n\t\tthis.amEnemy = enemy;\r\n\t\tvar color;\r\n\t\tif(enemy) {\r\n\t\t\tcolor = Train.ENEMY_COLOR;\r\n\t\t} else {\r\n\t\t\tcolor = Train.PLAYER_COLOR;\r\n\t\t}\r\n\t\tthis.color = chroma(color).num();\r\n\t\tthis.colorDark = chroma(color).brighten(1).num();\r\n\r\n\t\tthis.addCart();\r\n\r\n\t\tthis.locomotive = this.children[0];\r\n\t\tthis.locomotive.x = x * World.PIECE_WIDTH + World.PIECE_WIDTH * this.direction;\r\n\t\tthis.locomotive.y = y * World.PIECE_HEIGHT;\r\n\t\t\r\n\t\tthis.path = this.world.getPath(x, y, this.direction);\r\n\t}\r\n\r\n\tmove() {\r\n\t\tvar pieceX = Math.floor(this.locomotive.x / World.PIECE_WIDTH);\r\n\r\n\t\tif(!this.isCrashed && this.path[pieceX] !== undefined) {\r\n\r\n\t\t\tif(this.speed > Train.INITIAL_SPEED) {\r\n\t\t\t\tthis.speed -= Train.SPEED_CHANGE_STEP / 4;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar getY = (x) => {\r\n\t\t\t\tif(x < 0) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tvar y1 = World.PIECE_HEIGHT * this.path[Math.floor(x / World.PIECE_WIDTH)];\r\n\t\t\t\tvar y2 = World.PIECE_HEIGHT * this.path[Math.floor(x / World.PIECE_WIDTH) + 1];\r\n\t\t\t\tif(Object.is(y2, NaN)) {\r\n\t\t\t\t\ty2 = y1;\r\n\t\t\t\t}\r\n\t\t\t\tvar t = (x % World.PIECE_WIDTH) / World.PIECE_WIDTH;\r\n\t\t\t\treturn y1 + t * (y2 - y1);\r\n\t\t\t}\r\n\t\t\tvar getAngle = (x) => {\r\n\t\t\t\tif(x < 0) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tvar y1 = getY(x - Train.CART_WIDTH2);\r\n\t\t\t\tvar y2 = getY(x + Train.CART_WIDTH2);\r\n\t\t\t\treturn Math.atan((y2 - y1) / Train.CART_WIDTH);\r\n\t\t\t}\r\n\r\n\t\t\t//move locomotive\r\n\t\t\tthis.locomotive.x += this.direction * this.speed;\r\n\t\t\tthis.locomotive.y = getY(this.locomotive.x);\r\n\t\t\tthis.locomotive.rotation = getAngle(this.locomotive.x);\r\n\t\t\t\r\n\t\t\t//check for cart on rail\r\n\t\t\tvar checkPieceX = Math.round(this.locomotive.x / World.PIECE_WIDTH);\r\n\t\t\tvar checkPieceY = this.path[checkPieceX];\r\n\t\t\tif(this.world.rails[checkPieceX] && this.world.rails[checkPieceX][checkPieceY] && this.world.rails[checkPieceX][checkPieceY].isCart) {\r\n\t\t\t\tthis.addCart();\r\n\t\t\t\tthis.world.rails[checkPieceX][checkPieceY].isCart = false;\r\n\t\t\t\tthis.world.updateRailPiece(checkPieceX, checkPieceY);\r\n\t\t\t}\r\n\r\n\t\t\t//move other carts\r\n\t\t\tfor(let i = 1; i < this.children.length; i++) {\r\n\t\t\t\tlet dx = this.children[i].x - this.children[i-1].x;\r\n\t\t\t\tlet dy = this.children[i].y - this.children[i-1].y;\r\n\t\t\t\tlet l= Train.CART_DELAY / Math.sqrt(dx * dx + dy * dy);\r\n\t\t\t\tdx *= l;\r\n\t\t\t\tdy *= l;\r\n\t\t\t\tthis.children[i].x = this.children[i-1].x + dx;\r\n\t\t\t\tthis.children[i].y = this.children[i-1].y + dy;\r\n\t\t\t\tthis.children[i].rotation = getAngle(this.children[i].x);\r\n\r\n\t\t\t\tvar skew = this.children[i].y - getY(this.children[i].x);\r\n\r\n\t\t\t\tif(Math.abs(skew) > Train.CART_MAX_SKEW) {\r\n\t\t\t\t\tthis.children[i].y = getY(this.children[i].x) + Math.sign(skew) * Train.CART_MAX_SKEW;\r\n\t\t\t\t\tskew = Math.sign(skew) * Train.CART_MAX_SKEW;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.children[i].children[0].y = -Train.CART_HEIGHT2 - skew;\r\n\t\t\t}\r\n\r\n\t\t\t//test other train collision\r\n\t\t\tthis.world.trains.children.forEach(train => {\r\n\t\t\t\tif(train === this) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(train.isCrashed) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.amEnemy === train.amEnemy) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttrain.children.forEach(cart => {\r\n\t\t\t\t\tvar dx = cart.x - this.locomotive.x;\r\n\t\t\t\t\tvar dy = cart.y - this.locomotive.y;\r\n\t\t\t\t\tif(Math.sqrt(dx*dx+dy*dy) < (this.amEnemy ? Train.TRAIN_CRASH_DISTANCE * 0.81 : Train.TRAIN_CRASH_DISTANCE)) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet meCarts = this.children.length - train.children.length;\r\n\t\t\t\t\t\tlet itCarts = train.children.length - this.children.length;\r\n\r\n\t\t\t\t\t\tlet hard = (meCarts < 1 && itCarts >= 1) || (meCarts >= 1 && itCarts < 1);\r\n\r\n\t\t\t\t\t\tif(meCarts < 1) {\r\n\t\t\t\t\t\t\tthis.setCarts(1);\r\n\t\t\t\t\t\t\tthis.onCrash();\r\n\t\t\t\t\t\t\tthis.speed = Math.max(this.speed, train.speed);\r\n\t\t\t\t\t\t\tif(hard) {\r\n\t\t\t\t\t\t\t\tthis.locomotive.rotation += Math.min(1, this.speed) * Math.PI / 4;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.speed *= -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setCarts(meCarts);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(itCarts < 1) {\r\n\t\t\t\t\t\t\ttrain.setCarts(1);\r\n\t\t\t\t\t\t\ttrain.onCrash();\r\n\t\t\t\t\t\t\ttrain.speed = Math.max(this.speed, train.speed);\r\n\t\t\t\t\t\t\tif(hard) {\r\n\t\t\t\t\t\t\t\ttrain.locomotive.rotation += Math.min(1, train.speed) * -Math.PI / 4;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttrain.speed *= -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttrain.setCarts(itCarts);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\tif(!this.isCrashed) {\r\n\t\t\t\tthis.onCrash();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//move locomotive\r\n\t\t\tthis.speed *= 0.92;\r\n\t\t\tthis.locomotive.rotation += Math.min(3, this.speed) * (Math.random() - 0.5) * 0.2;\r\n\t\t\tthis.locomotive.x += this.speed * Math.cos(this.locomotive.rotation);\r\n\t\t\tthis.locomotive.y += this.speed * Math.sin(this.locomotive.rotation);\r\n\r\n\t\t\t//move other carts\r\n\t\t\tfor(let i = 1; i < this.children.length; i++) {\r\n\t\t\t\tlet dx = this.children[i].x - this.children[i-1].x;\r\n\t\t\t\tlet dy = this.children[i].y - this.children[i-1].y;\r\n\t\t\t\tlet l = Train.CART_DELAY / Math.sqrt(dx * dx + dy * dy);\r\n\t\t\t\tdx *= l;\r\n\t\t\t\tdy *= l;\r\n\t\t\t\tthis.children[i].x = this.children[i-1].x + dx;\r\n\t\t\t\tthis.children[i].y = this.children[i-1].y + dy;\r\n\t\t\t\tthis.children[i].rotation = Math.min(Math.max(Math.atan(dy / dx), -1), 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonCrash() {\r\n\t\tif(this.isCrashed) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.isCrashed = true;\r\n\r\n\t\tif(this.amEnemy) {\r\n\t\t\tsetTimeout(() => {this.world.trains.removeChild(this)}, 3000);\r\n\t\t}\r\n\t}\r\n\r\n\taddCart() {\r\n\t\tvar cartContainer = new PIXI.Sprite();\r\n\t\t\r\n\t\tvar cartBottom = new PIXI.Graphics();\r\n\t\tcartBottom.width = Train.CART_WIDTH;\r\n\t\tcartBottom.height = Train.CART_HEIGHT;\r\n\t\tcartBottom.beginFill(this.colorDark);\r\n\t\tcartBottom.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\r\n\r\n\t\tcartBottom.x = -Train.CART_WIDTH2;\r\n\t\tcartBottom.y = -Train.CART_HEIGHT2;\r\n\r\n\t\tcartContainer.addChild(cartBottom);\r\n\r\n\t\tvar cartTop = new PIXI.Graphics();\r\n\t\tcartTop.width = Train.CART_WIDTH;\r\n\t\tcartTop.height = Train.CART_HEIGHT;\r\n\t\tcartTop.beginFill(this.color);\r\n\t\tcartTop.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\r\n\r\n\t\tcartTop.x = -Train.CART_WIDTH2;\r\n\t\tcartTop.y = -Train.CART_HEIGHT2;\r\n\r\n\t\tcartContainer.addChild(cartTop);\r\n\r\n\t\tcartContainer.x = -9999999 * this.direction;\r\n\t\tcartContainer.y = 0;\r\n\r\n\t\tthis.addChild(cartContainer);\r\n\t}\r\n\r\n\tremoveCart() {\r\n\t\tthis.removeChild(this.children[this.children.length-1]);\r\n\t}\r\n\r\n\tsetCarts(count) {\r\n\t\twhile(this.children.length < count) {\r\n\t\t\tthis.addCart();\r\n\t\t}\r\n\t\twhile(this.children.length > count) {\r\n\t\t\tthis.removeCart();\r\n\t\t}\r\n\t}\r\n\r\n\trecalculatePath(from) {\r\n\t\tif(from === undefined) {\r\n\t\t\tfrom = Math.floor(this.children[0].x / World.PIECE_WIDTH);\r\n\t\t}\r\n\t\tthis.world.getPath(from, this.path[from], this.direction, this.path);\r\n\t}\r\n\r\n\tgetCartCount() {\r\n\t\treturn this.children.length;\r\n\t}\r\n}\r\n\r\nTrain.LEFT = -1;\r\nTrain.RIGHT = 1;\r\n\r\nTrain.CART_WIDTH = 30;\r\nTrain.CART_HEIGHT = 10;\r\nTrain.CART_WIDTH2 = Train.CART_WIDTH / 2;\r\nTrain.CART_HEIGHT2 = Train.CART_HEIGHT / 2;\r\nTrain.CART_DELAY = 32;\r\nTrain.CART_MAX_SKEW = Train.CART_HEIGHT / 3;\r\nTrain.INITIAL_SPEED = 1.0;\r\nTrain.SPEED_CHANGE_STEP = 0.01;\r\nTrain.MIN_SPEED = 0;\r\nTrain.MAX_SPEED = undefined;\r\nTrain.TRAIN_CRASH_DISTANCE = Train.CART_WIDTH / 3;\r\n\r\nTrain.ENEMY_COLOR = '#247192';\r\nTrain.PLAYER_COLOR = '#9FBC12';\n\n\n// WEBPACK FOOTER //\n// ./src/world/Train.js","import railEasingIn from 'eases/sine-in';\r\nimport railEasingOut from 'eases/sine-out';\r\nimport Train from './Train';\r\nimport WorldGenerator from './WorldGenerator';\r\n\r\nexport default class World extends PIXI.Container {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.generator = new WorldGenerator();\r\n\t\tthis.rails = this.generator.rails;\r\n\r\n\t\tthis.displayed = {\r\n\t\t\tfrom: 0,\r\n\t\t\tto: 0\r\n\t\t};\r\n\t\t\r\n\t\tthis.map = new PIXI.Container();\r\n\t\tthis.addChild(this.map);\r\n\t\t\r\n\t\tthis.trains = new PIXI.Container();\r\n\t\tthis.trains.x = World.PIECE_WIDTH2;\r\n\t\tthis.trains.y = World.PIECE_HEIGHT2;\r\n\t\tthis.addChild(this.trains);\r\n\r\n\t\tthis.clamp(0, 60);\r\n\r\n\t\tthis.trains.addChild(new Train(this, 0, 0, Train.RIGHT, false));\r\n\r\n\t}\r\n\r\n\tclamp(from, to) {\r\n\t\tthis.generator.clamp(from, to);\r\n\t\tthis.display(from, to);\r\n\t}\r\n\r\n\tdisplay(from, to) {\r\n\t\tif(from === undefined) {\r\n\t\t\tfrom = 0;\r\n\t\t}\r\n\t\tif(to === undefined) {\r\n\t\t\tto = this.rails.length;\r\n\t\t}\r\n\r\n\t\t//remove before from\r\n\t\tvar worldFrom = World.PIECE_WIDTH * from;\r\n\t\tvar worldTo = World.PIECE_WIDTH * to;\r\n\t\tfor (var i = this.map.children.length - 1; i >= 0; i--) {\r\n\t\t\tif(this.map.children[i].x < worldFrom || this.map.children[i].x > worldTo) {\r\n\t\t\t\tthis.map.removeChild(this.map.children[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar displayRailsColumn = (rails) => {\r\n\t\t\tfor(var railIndex in rails) {\r\n\t\t\t\tif(!isNaN(parseInt(railIndex, 10))) {\r\n\t\t\t\t\tvar railPiece = rails[railIndex];\r\n\r\n\t\t\t\t\tif(!railPiece.isEmpty) {\r\n\t\t\t\t\t\tvar railSprite = new PIXI.Graphics();\r\n\r\n\t\t\t\t\t\trailSprite.x = i * World.PIECE_WIDTH;\r\n\t\t\t\t\t\trailSprite.y = railIndex * World.PIECE_HEIGHT;\r\n\t\t\t\t\t\trailSprite.width = World.PIECE_WIDTH;\r\n\t\t\t\t\t\trailSprite.height = World.PIECE_HEIGHT;\r\n\r\n\t\t\t\t\t\tthis.displayRailPiece(railSprite, railPiece, railIndex);\r\n\r\n\t\t\t\t\t\tthis.map.addChild(railSprite);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//add rails\r\n\t\tfor(i=this.displayed.to; i<to; i++) {\r\n\t\t\tdisplayRailsColumn(this.rails[i]);\r\n\t\t}\r\n\t\tfor(i=from; i<this.displayed.from; i++) {\r\n\t\t\tdisplayRailsColumn(this.rails[i]);\r\n\t\t}\r\n\r\n\t\tthis.displayed.from = from\r\n\t\tthis.displayed.to = to;\r\n\t}\r\n\r\n\tdisplayRailPiece(railSprite, railPiece, railIndex) {\r\n\t\trailSprite.clear();\r\n\t\t\r\n\t\tvar h;\r\n\r\n\t\tfor(var toRailIndex of railPiece.to) {\r\n\t\t\th = toRailIndex - railIndex;\r\n\t\t\tthis.displayRailPieceSegment(railSprite, World.PIECE_WIDTH2, World.PIECE_HEIGHT2, World.PIECE_WIDTH, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2, railEasingIn)\r\n\t\t}\r\n\r\n\t\tfor(var fromRailIndex of railPiece.from) {\r\n\t\t\th = fromRailIndex - railIndex;\r\n\t\t\tthis.displayRailPieceSegment(railSprite, 0, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2, World.PIECE_WIDTH2, World.PIECE_HEIGHT2, railEasingOut)\r\n\t\t}\r\n\r\n\r\n\t\tif(railPiece.isCart) {\r\n\t\t\trailSprite.beginFill(World.EMPTY_CART_COLOR);\r\n\t\t\trailSprite.lineStyle();\r\n\t\t\trailSprite.drawRect(World.PIECE_WIDTH2 - Train.CART_WIDTH2, World.PIECE_HEIGHT2 - Train.CART_HEIGHT2, Train.CART_WIDTH, Train.CART_HEIGHT);\r\n\t\t}\r\n\t}\r\n\r\n\tdisplayRailPieceSegment(railSprite, fromX, fromY, toX, toY, railEasing) {\r\n\t\tvar dX = toX-fromX;\r\n\t\t\r\n\t\t//top rail\r\n\t\trailSprite.lineStyle(1, World.RAIL_COLOR);\r\n\t\tfor(let i=0; i<World.SUBPIECES; i++) {\r\n\t\t\trailSprite.moveTo(fromX + ((i-1)/World.SUBPIECES)*dX,\r\n\t\t\t\tfromY + railEasing((i-1)/World.SUBPIECES) * (toY - fromY) - World.TRACK_WIDTH2);\r\n\t\t\trailSprite.lineTo(fromX + ((i)/World.SUBPIECES)*dX,\r\n\t\t\t\tfromY + railEasing((i)/World.SUBPIECES) * (toY - fromY) - World.TRACK_WIDTH2);\r\n\t\t}\r\n\t\trailSprite.endFill();\r\n\r\n\t\t//bottom rail\r\n\t\trailSprite.lineStyle(1, World.RAIL_COLOR);\r\n\t\tfor(let i=0; i<World.SUBPIECES; i++) {\r\n\t\t\trailSprite.moveTo(fromX + ((i-1)/World.SUBPIECES)*dX,\r\n\t\t\t\tfromY + railEasing((i-1)/World.SUBPIECES) * (toY - fromY) + World.TRACK_WIDTH2);\r\n\t\t\trailSprite.lineTo(fromX + ((i)/World.SUBPIECES)*dX,\r\n\t\t\t\tfromY + railEasing((i)/World.SUBPIECES) * (toY - fromY) + World.TRACK_WIDTH2);\r\n\t\t}\r\n\t\trailSprite.endFill();\r\n\r\n\t\t//railroad tie\r\n\t\trailSprite.lineStyle(1, World.RAIL_COLOR);\r\n\t\tfor(let i=0; i<World.SUBPIECES; i++) {\r\n\t\t\trailSprite.moveTo(fromX + ((i)/World.SUBPIECES)*dX,\r\n\t\t\t\tfromY + railEasing((i)/World.SUBPIECES) * (toY - fromY) - World.TRACK_TIE_WIDTH2);\r\n\t\t\trailSprite.lineTo(fromX + ((i)/World.SUBPIECES)*dX,\r\n\t\t\t\tfromY + railEasing((i)/World.SUBPIECES) * (toY - fromY) + World.TRACK_TIE_WIDTH2);\r\n\t\t}\r\n\t\trailSprite.endFill();\r\n\t}\r\n\r\n\tupdateRailPiece(railsOffset, railIndex) {\r\n\t\tvar x = railsOffset * World.PIECE_WIDTH;\r\n\t\tvar y = railIndex * World.PIECE_HEIGHT;\r\n\t\tfor(var i=0; i<this.map.children.length; i++) {\r\n\t\t\tif(this.map.children[i].x === x && this.map.children[i].y === y) {\r\n\t\t\t\tthis.displayRailPiece(this.map.children[i], this.rails[railsOffset][railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetPath(railsOffset, railIndex, direction, path) {\r\n\t\tif(!path) {\r\n\t\t\tpath = [];\r\n\t\t}\r\n\t\tpath[railsOffset] = railIndex;\r\n\t\twhile(railsOffset < this.rails.length) {\r\n\t\t\tvar railPiece = this.rails[railsOffset][railIndex];\r\n\t\t\tif(!railPiece) {\r\n\t\t\t\tconsole.log(\"Wrong path!\", railsOffset, railIndex);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar next = (direction === 1) ? railPiece.getTo() : railPiece.getFrom();\r\n\r\n\t\t\tif(next === undefined) {\r\n\t\t\t\tbreak; //EOW\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\trailsOffset += direction;\r\n\t\t\t\r\n\t\t\tif(path[railsOffset] === next) {\r\n\t\t\t\tbreak; //already same path\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpath[railsOffset] = next;\r\n\t\t\trailIndex = next;\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\r\n\tgetTrain() {\r\n\t\treturn this.trains.children[0];\r\n\t}\r\n\r\n\tgetEnemyTrains() {\r\n\t\treturn this.trains.children.slice(1, this.trains.children.length);\r\n\t}\r\n}\r\n\r\nWorld.PIECE_WIDTH = 88;\r\nWorld.PIECE_HEIGHT = 16;\r\nWorld.PIECE_WIDTH2 = World.PIECE_WIDTH / 2;\r\nWorld.PIECE_HEIGHT2 = World.PIECE_HEIGHT / 2;\r\n\r\nWorld.SUBPIECES = 16;\r\nWorld.TRACK_WIDTH2 = 2;\r\nWorld.TRACK_TIE_WIDTH2 = 3;\r\n\r\nWorld.EMPTY_CART_COLOR = 0xE1303C;\r\nWorld.RAIL_COLOR = 0xE1303C;\n\n\n// WEBPACK FOOTER //\n// ./src/world/World.js","'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('not a function');\n  }\n  this._45 = 0;\n  this._81 = 0;\n  this._65 = null;\n  this._54 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._10 = null;\nPromise._97 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n};\nfunction handle(self, deferred) {\n  while (self._81 === 3) {\n    self = self._65;\n  }\n  if (Promise._10) {\n    Promise._10(self);\n  }\n  if (self._81 === 0) {\n    if (self._45 === 0) {\n      self._45 = 1;\n      self._54 = deferred;\n      return;\n    }\n    if (self._45 === 1) {\n      self._45 = 2;\n      self._54 = [self._54, deferred];\n      return;\n    }\n    self._54.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._81 === 1) {\n        resolve(deferred.promise, self._65);\n      } else {\n        reject(deferred.promise, self._65);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._65);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._81 = 3;\n      self._65 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._81 = 1;\n  self._65 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._81 = 2;\n  self._65 = newValue;\n  if (Promise._97) {\n    Promise._97(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._45 === 1) {\n    handle(self, self._54);\n    self._54 = null;\n  }\n  if (self._45 === 2) {\n    for (var i = 0; i < self._54.length; i++) {\n      handle(self, self._54[i]);\n    }\n    self._54 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  })\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/core.js\n// module id = 4\n// module chunks = 0","if (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/polyfills.js\n// module id = 5\n// module chunks = 0","import Stages from './common/Stages';\r\nimport StagePlay from './stages/Play';\r\nimport StageTopScore from './stages/TopScore';\r\n\r\nimport TopScore from './common/TopScore';\r\nimport Bumper from './common/Bumper';\r\nimport KeyListener from './common/KeyListener';\r\n\r\nexport default class App {\r\n\r\n\tconstructor(settings) {\r\n\t\tthis.settings = settings;\r\n\t\tthis.stages = new Stages();\r\n\t\tthis.topScore = new TopScore();\r\n\r\n\t\tvar bumperClose = () => {\r\n\t\t\tif(this.run) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.run = true;\r\n\t\t\tif(this.setuped) {\r\n\t\t\t\tthis.gameLoop();\r\n\t\t\t}\r\n\t\t\tthis.bumper.hide();\r\n\t\t};\r\n\r\n\t\tthis.bumper = new Bumper(bumperClose);\r\n\t\t\r\n\t\tthis.stages.addStage(\"play\", new StagePlay(this.stages, settings));\r\n\t\tthis.stages.addStage(\"topScore\", new StageTopScore(this.stages, this.topScore, settings));\r\n\t\tthis.stages.changeStage(\"play\");\r\n\r\n\t\tif(App.BUMPER) {\r\n\t\t\tthis.bumper.show();\r\n\t\t} else {\r\n\t\t\tthis.run = true;\r\n\t\t}\r\n\r\n\t\tnew KeyListener(32, bumperClose);\r\n\t}\r\n\r\n\tstart() {\r\n\t\tvar setup = () => {\r\n\t\t\tthis.setuped = true;\r\n\r\n\t\t\tthis.renderer = PIXI.autoDetectRenderer(this.settings.width, this.settings.height, {antialias: true});\r\n\t\t\tdocument.body.appendChild(this.renderer.view);\r\n\r\n\t\t\tthis.gameLoop = () => {\r\n\t\t\t\tthis.stages.beforeRender();\r\n\t\t\t\tthis.renderer.render(this.stages.current);\r\n\t\t\t\trequestAnimationFrame(this.gameLoop);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.run) {\r\n\t\t\t\tthis.gameLoop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tPIXI.loader\r\n\t\t.add(\"images/anyImage.png\")\r\n\t\t.load(setup);\r\n\t}\r\n}\r\n\r\nApp.BUMPER = true;\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","export default class Bumper {\r\n\r\n\tconstructor(onEnd) {\r\n\t\tthis.onEnd = onEnd;\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.video = document.createElement('video');\r\n\r\n\t\tthis.video.src = 'media/bumper.mov';\r\n\t\tthis.video.play();\r\n\r\n\t\tif(this.onEnd) {\r\n\t\t\tthis.video.addEventListener('ended', this.onEnd);\r\n\t\t}\r\n\r\n\t\tdocument.body.appendChild(this.video);\r\n\t}\r\n\r\n\thide() {\r\n\t\tif(this.video) {\r\n\t\t\tthis.video.style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/Bumper.js","export default class Stages {\r\n\r\n\tconstructor() {\r\n\t\tthis.current = undefined;\r\n\t\tthis.list = [];\r\n\t}\r\n\t\r\n\taddStage(name, stage) {\r\n\t\tthis.list[name] = stage;\r\n\t}\r\n\r\n\tchangeStage(name) {\r\n\t\tif(!this.list[name]) {\r\n\t\t\tthrow new Error(\"Illegal stage name.\");\r\n\t\t}\r\n\t\tif(this.current !== undefined) {\r\n\t\t\tthis.current.unload();\r\n\t\t}\r\n\t\tthis.current = this.list[name];\r\n\t\tthis.current.load();\r\n\t}\r\n\r\n\tgetStage(name) {\r\n\t\treturn this.list[name];\r\n\t}\r\n\r\n\tbeforeRender() {\r\n\t\tthis.current.tick();\r\n\t}\r\n}\r\n\r\n/*\r\nStage interface:\r\n{\r\n\tload = function()\r\n\tunload = function()\r\n\ttick = function()\r\n}\r\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/common/Stages.js","export default class TopScore {\r\n\r\n\tconstructor() {\r\n\t\tif(!window.localStorage.topScore) {\r\n\t\t\twindow.localStorage.topScore = JSON.stringify([]);\r\n\t\t}\r\n\t\tthis.topScore = JSON.parse(window.localStorage.topScore);\r\n\t}\r\n\r\n\taddScore(score) {\r\n\t\tthis.topScore.push(score);\r\n\t\tthis.topScore.sort((a, b) => {return parseInt(b, 10) - parseInt(a, 10)});\r\n\t\twindow.localStorage.topScore = JSON.stringify(this.topScore);\r\n\r\n\t\tif(window.ga) {\r\n\t\t\tga('send', 'event', 'Game', 'score', {\r\n\t\t\t\t\"metric5\": score\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgetTop(count) {\r\n\t\treturn this.topScore.slice(0, count);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/TopScore.js","import App from './App';\r\n\r\nvar settings = {\r\n\twidth: 960,\r\n\theight: 144\r\n}\r\n\r\nwindow.app = new App(settings);\r\nwindow.app.start();\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import World from '../world/World';\r\nimport Train from '../world/Train';\r\nimport SwitchCursor from '../world/SwitchCursor';\r\nimport KeyListener from '../common/KeyListener';\r\n\r\nexport default class StagePlay extends PIXI.Container {\r\n\r\n\tconstructor(stages, settings) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.stages = stages;\r\n\t\tthis.settings = settings;\r\n\t}\r\n\r\n\tload() {\r\n\t\tthis.camOffset = StagePlay.CAMERA_CENTER_PERC * this.settings.width;\r\n\r\n\t\tthis.background = new PIXI.Graphics();\r\n\t\tthis.background.beginFill(StagePlay.BACKGROUND_COLOR);\r\n\t\tthis.background.drawRect(0, 0, this.settings.width, this.settings.height);\r\n\t\t\r\n\t\tthis.world = new World();\r\n\t\tthis.world.y = this.settings.height / 2;\r\n\r\n\t\tthis.train = this.world.getTrain();\r\n\r\n\t\tthis.switchCursor = new SwitchCursor(this.train);\r\n\t\tthis.switchCursor.y = this.settings.height / 2;\r\n\r\n\t\tthis.cartsText = new PIXI.Text(\"0\", new PIXI.TextStyle({fontSize: 40, fill: '#9FBC12'}));\r\n\t\tthis.cartsText.x = 16;\r\n\t\tthis.cartsText.y = 16;\r\n\r\n\t\tthis.scoreText = new PIXI.Text(\"0\", new PIXI.TextStyle({fontSize: 21, fill: '#9FBC12'}));\r\n\t\tthis.scoreText.x = 64;\r\n\t\tthis.scoreText.y = 16;\r\n\r\n\t\tthis.crashedText = new PIXI.Text(\"Crashed\", new PIXI.TextStyle({fontSize: 40, fill: '#247192'}));\r\n\t\tthis.crashedText.x = this.settings.width / 2;\r\n\t\tthis.crashedText.y = this.settings.height / 2;\r\n\t\tthis.crashedText.anchor.x = 0.5;\r\n\t\tthis.crashedText.anchor.y = 0.5;\r\n\t\tthis.crashedText.visible = false;\r\n\r\n\t\tthis.crashedTextGuide = new PIXI.Text(\"Press space to continue\", new PIXI.TextStyle({fontSize: 14, fill: '#247192'}));\r\n\t\tthis.crashedTextGuide.x = this.settings.width / 2;\r\n\t\tthis.crashedTextGuide.y = this.settings.height / 2;\r\n\t\tthis.crashedTextGuide.anchor.x = 0.5;\r\n\t\tthis.crashedTextGuide.anchor.y = -0.9;\r\n\t\tthis.crashedTextGuide.visible = false;\r\n\r\n\t\tthis.quideText = new PIXI.Text(\"hold  and  to control train speed,  and  for railroad switches\", new PIXI.TextStyle({fontSize: 12, fill: '#9FBC12'}));\r\n\t\tthis.quideText.x = this.settings.width / 2;\r\n\t\tthis.quideText.y = 0;\r\n\t\tthis.quideText.anchor.x = 0.5;\r\n\t\tthis.quideText.anchor.y = -1.0;\r\n\r\n\t\tthis.addChild(this.background);\r\n\t\tthis.addChild(this.switchCursor);\r\n\t\tthis.addChild(this.world);\r\n\t\tthis.addChild(this.cartsText);\r\n\t\tthis.addChild(this.scoreText);\r\n\t\tthis.addChild(this.crashedText);\r\n\t\tthis.addChild(this.crashedTextGuide);\r\n\t\tthis.addChild(this.quideText);\r\n\r\n\t\tthis.keyUp = new KeyListener(38);\r\n\t\tthis.keyDown = new KeyListener(40);\r\n\t\tthis.keyLeft = new KeyListener(37);\r\n\t\tthis.keyRight = new KeyListener(39);\r\n\t\tthis.keySpace = new KeyListener(32);\r\n\t}\r\n\r\n\ttick() {\r\n\t\tthis.world.trains.children.forEach(train => train.move());\r\n\r\n\t\tif(!this.train.isCrashed) {\r\n\t\t\tthis.switchCursor.recalculatePosition();\r\n\t\t}\r\n\r\n\t\t//move camera\r\n\t\tvar camPos = this.train.locomotive.x - this.camOffset;\r\n\t\tif(this.train.isCrashed) {\r\n\t\t\tthis.camOffset += 0.8;\r\n\t\t}\r\n\t\tif(camPos < 0) {\r\n\t\t\tcamPos = 0;\r\n\t\t}\r\n\t\tcamPos += World.PIECE_WIDTH;\r\n\t\tthis.world.x = -camPos;\r\n\t\tthis.switchCursor.x = -camPos;\r\n\t\t\r\n\t\t//show/hide world\r\n\t\tvar c1 = camPos + this.settings.width + 5 * World.PIECE_WIDTH;\r\n\t\tvar c2 = camPos - 10 * World.PIECE_WIDTH;\r\n\t\tif(c1 > this.world.displayed.to * World.PIECE_WIDTH || c2 < this.world.displayed.from * World.PIECE_WIDTH) {\r\n\t\t\tvar from = Math.floor(camPos / World.PIECE_WIDTH) - 30;\r\n\t\t\tvar to = from + 100;\r\n\t\t\tvar oldTo = this.world.displayed.to;\r\n\r\n\t\t\tthis.world.clamp(from, to);\r\n\t\t\t\r\n\t\t\tif(to > oldTo) {\r\n\t\t\t\tthis.train.recalculatePath(oldTo);\r\n\t\t\t\tthis.switchCursor.displayPath();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//controls\r\n\t\tif(!this.train.isCrashed) {\r\n\t\t\tif(this.keyUp.isDown) {\r\n\t\t\t\tthis.switchCursor.switchCursor(0);\r\n\t\t\t}\r\n\t\t\tif(this.keyDown.isDown) {\r\n\t\t\t\tthis.switchCursor.switchCursor(1);\r\n\t\t\t}\r\n\t\t\tif(this.keyLeft.isDown) {\r\n\t\t\t\tif(Train.MIN_SPEED === undefined || this.train.speed > Train.MIN_SPEED) {\r\n\t\t\t\t\tthis.train.speed -= Train.SPEED_CHANGE_STEP;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.keyRight.isDown) {\r\n\t\t\t\tif(Train.MAX_SPEED === undefined || this.train.speed < Train.MAX_SPEED) {\r\n\t\t\t\t\tthis.train.speed += Train.SPEED_CHANGE_STEP;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.quideText.alpha > 0 && (this.keyUp.isDown || this.keyDown.isDown || this.keyLeft.isDown || this.keyRight.isDown)) {\r\n\t\t\tthis.quideText.alpha -= 0.01;\r\n\t\t}\r\n\t\t\r\n\t\tthis.cartsText.text = this.train.getCartCount();\r\n\t\tlet score = Math.floor(this.train.locomotive.x / (World.PIECE_WIDTH * StagePlay.SCORE_SPEED));\r\n\t\tthis.scoreText.text = score;\r\n\r\n\t\tif(this.train.isCrashed) {\r\n\t\t\tthis.crashedText.visible = true;\r\n\t\t\tthis.crashedTextGuide.visible = true;\r\n\t\t}\r\n\r\n\t\t//spawn enemy train\r\n\t\tif(Math.random() < StagePlay.ENEMY_SPAWN_RATE * this.train.speed) {\r\n\t\t\tvar x = Math.floor((this.train.locomotive.x + this.settings.width) / World.PIECE_WIDTH);\r\n\t\t\t\r\n\t\t\tvar ys = Object.keys(this.world.rails[x]);\r\n\t\t\tvar y = parseInt(ys[Math.floor(Math.random()*ys.length)], 10);\r\n\r\n\t\t\tvar enemyTrain = new Train(this.world, x, y, Train.LEFT, true);\r\n\t\t\t\r\n\t\t\twhile(Math.random() < StagePlay.ENEMY_SPAWN_CARTS_PROB) {\r\n\t\t\t\tenemyTrain.addCart();\r\n\t\t\t}\r\n\r\n\t\t\tthis.world.trains.addChild(enemyTrain);\r\n\t\t}\r\n\r\n\t\tif(this.keySpace.isDown) {\r\n\t\t\tif(this.train.isCrashed) {\r\n\t\t\t\tlet score = Math.floor(this.train.locomotive.x / (World.PIECE_WIDTH * StagePlay.SCORE_SPEED));\r\n\t\t\t\tthis.stages.getStage(\"topScore\").addScore(score);\r\n\t\t\t\tthis.stages.changeStage(\"topScore\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.restart();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trestart() {\r\n\t\tthis.unload();\r\n\t\tthis.load();\r\n\t}\r\n\r\n\tunload() {\r\n\t\tthis.removeChild(this.background);\r\n\t\tthis.removeChild(this.world);\r\n\t\tthis.removeChild(this.switchCursor);\r\n\t\tthis.removeChild(this.cartsText);\r\n\t\tthis.removeChild(this.scoreText);\r\n\t\tthis.removeChild(this.crashedText);\r\n\t\tthis.removeChild(this.crashedTextGuide);\r\n\t\tthis.removeChild(this.quideText);\r\n\t\t\r\n\t\tthis.keyUp.close();\r\n\t\tthis.keyDown.close();\r\n\t\tthis.keyLeft.close();\r\n\t\tthis.keyRight.close();\r\n\t\tthis.keySpace.close();\r\n\r\n\t\tthis.keyUp = undefined;\r\n\t\tthis.keyDown = undefined;\r\n\t\tthis.keyLeft = undefined;\r\n\t\tthis.keyRight = undefined;\r\n\t\tthis.keySpace = undefined;\r\n\r\n\t\tthis.background = undefined;\r\n\t\tthis.world = undefined;\r\n\t\tthis.train = undefined;\r\n\t\tthis.switchCursor = undefined;\r\n\t\tthis.cartsText = undefined;\r\n\t\tthis.scoreText = undefined;\r\n\t\tthis.crashedText = undefined;\r\n\t\tthis.crashedTextGuide = undefined;\r\n\t\tthis.quideText = undefined;\r\n\t}\r\n}\r\n\r\nStagePlay.SCORE_SPEED = 3;\r\nStagePlay.CAMERA_CENTER_PERC = 0.21;\r\nStagePlay.BACKGROUND_COLOR = 0xFFFFFF;\r\nStagePlay.ENEMY_SPAWN_RATE = 0.002;\r\nStagePlay.ENEMY_SPAWN_CARTS_PROB = 0.2;\n\n\n// WEBPACK FOOTER //\n// ./src/stages/Play.js","import KeyListener from '../common/KeyListener';\r\n\r\nexport default class StageTopScore extends PIXI.Container {\r\n\r\n\tconstructor(stages, topScore, settings) {\r\n\t\tsuper();\r\n\r\n\t\tthis.stages = stages;\r\n\t\tthis.topScore = topScore;\r\n\t\tthis.settings = settings;\r\n\r\n\t\tthis.myScore = -1;\r\n\t}\r\n\r\n\taddScore(score) {\r\n\t\tthis.topScore.addScore(score);\r\n\t\tthis.myScore = this.topScore.getTop(StageTopScore.TOP_COUNT).indexOf(score);\r\n\t}\r\n\r\n\tload() {\r\n\t\tthis.background = new PIXI.Graphics();\r\n\t\tthis.background.beginFill(StageTopScore.BACKGROUND_COLOR);\r\n\t\tthis.background.drawRect(0, 0, this.settings.width, this.settings.height);\r\n\t\t\r\n\t\tthis.scores = new PIXI.Container();\r\n\t\tvar i = 0;\r\n\t\tthis.topScore.getTop(StageTopScore.TOP_COUNT).forEach(score => {\r\n\r\n\t\t\tvar x = i % 10;\r\n\t\t\tvar y = Math.floor(i / 10);\r\n\r\n\t\t\tvar color = '#E1303C';\r\n\t\t\tif(this.myScore === i) {\r\n\t\t\t\tcolor = '#9FBC12';\r\n\t\t\t}\r\n\r\n\t\t\tvar scoreText = new PIXI.Text(score, new PIXI.TextStyle({fontSize: 14, fill: color}));\r\n\t\t\tscoreText.x = (x+1) * (this.settings.width / (10 + 1));\r\n\t\t\tscoreText.y = (y+1) * (this.settings.height / (5 + 1));\r\n\t\t\tscoreText.anchor.x = 0.5;\r\n\t\t\tscoreText.anchor.y = 0.5;\r\n\r\n\t\t\tthis.scores.addChild(scoreText);\r\n\t\t\ti++;\r\n\t\t});\r\n\t\t\r\n\t\tthis.crashedTextGuide = new PIXI.Text(\"Press space to continue\", new PIXI.TextStyle({fontSize: 14, fill: '#9FBC12'}));\r\n\t\tthis.crashedTextGuide.x = this.settings.width / 2;\r\n\t\tthis.crashedTextGuide.y = this.settings.height - 16;\r\n\t\tthis.crashedTextGuide.anchor.x = 0.5;\r\n\t\tthis.crashedTextGuide.anchor.y = 1;\r\n\r\n\t\tthis.gameByText = new PIXI.Text(\"Game by Dominik Gmiterko\", new PIXI.TextStyle({fontSize: 10, fill: '#9FBC12'}));\r\n\t\tthis.gameByText.x = 16;\r\n\t\tthis.gameByText.y = this.settings.height - 16;\r\n\t\tthis.gameByText.anchor.x = 0.0;\r\n\t\tthis.gameByText.anchor.y = 1.0;\r\n\r\n\t\tthis.gameAtText = new PIXI.Text(\"play at ienze.me/trainwreck\", new PIXI.TextStyle({fontSize: 10, fill: '#9FBC12'}));\r\n\t\tthis.gameAtText.x = this.settings.width - 16;\r\n\t\tthis.gameAtText.y = this.settings.height - 16;\r\n\t\tthis.gameAtText.anchor.x = 1.0;\r\n\t\tthis.gameAtText.anchor.y = 1.0;\r\n\r\n\t\tthis.addChild(this.background);\r\n\t\tthis.addChild(this.scores);\r\n\t\tthis.addChild(this.crashedTextGuide);\r\n\t\tthis.addChild(this.gameByText);\r\n\t\tthis.addChild(this.gameAtText);\r\n\r\n\t\tthis.keySpace = new KeyListener(32);\r\n\t}\r\n\r\n\ttick() {\r\n\t\tif(this.keySpace.isDown) {\r\n\t\t\tthis.stages.changeStage(\"play\");\r\n\t\t}\r\n\t}\r\n\r\n\tunload() {\r\n\t\tthis.removeChild(this.background);\r\n\t\tthis.removeChild(this.scores);\r\n\t\tthis.removeChild(this.crashedTextGuide);\r\n\t\tthis.removeChild(this.gameByText);\r\n\t\tthis.removeChild(this.gameAtText);\r\n\t\t\r\n\t\tthis.keySpace.close();\r\n\r\n\t\tthis.keySpace = undefined;\r\n\r\n\t\tthis.background = undefined;\r\n\t\tthis.scores = undefined;\r\n\t\tthis.crashedTextGuide = undefined;\r\n\t\tthis.gameByText = undefined;\r\n\t\tthis.gameAtText = undefined;\r\n\t}\r\n}\r\n\r\nStageTopScore.BACKGROUND_COLOR = 0xFFFFFF;\r\nStageTopScore.TOP_COUNT = 40;\n\n\n// WEBPACK FOOTER //\n// ./src/stages/TopScore.js","import Train from './Train';\r\n\r\nexport default class RailPiece {\r\n\r\n\tconstructor() {\r\n\t\tthis.to = [];\r\n\t\tthis.from = [];\r\n\t\tthis.isSwitch = false;\r\n\t\tthis.isEmpty = true;\r\n\t\tthis.isCart = false;\r\n\t\tthis.switched = {\r\n\t\t\tfrom: undefined,\r\n\t\t\tto: undefined\r\n\t\t}\r\n\t}\r\n\r\n\taddTo(railIndex) {\r\n\t\tthis.to.push(railIndex);\r\n\t\tthis.to.sort((a, b) => {return a-b;});\r\n\t\tthis.onRailAdded();\r\n\t}\r\n\r\n\taddFrom(railIndex) {\r\n\t\tthis.from.push(railIndex);\r\n\t\tthis.from.sort((a, b) => {return a-b;});\r\n\t\tthis.onRailAdded();\r\n\t}\r\n\r\n\tonRailAdded() {\r\n\t\tthis.isEmpty = false;\r\n\t\tthis.isSwitch = this.railsCount() > 2;\r\n\t\tif(this.isSwitch) {\r\n\t\t\tthis.switched = {\r\n\t\t\t\tfrom: Math.floor(Math.random() * this.from.length),\r\n\t\t\t\tto: Math.floor(Math.random() * this.to.length)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisConnectedTo(railIndex) {\r\n\t\treturn this.to.indexOf(railIndex) >= 0;\r\n\t}\r\n\r\n\tgetTo() {\r\n\t\tif(this.isSwitch) {\r\n\t\t\treturn this.to[this.switched.to];\r\n\t\t}\r\n\t\tif(this.to.length > 0) {\r\n\t\t\treturn this.to[0];\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tgetFrom() {\r\n\t\tif(this.isSwitch) {\r\n\t\t\treturn this.from[this.switched.from];\r\n\t\t}\r\n\t\tif(this.from.length > 0) {\r\n\t\t\treturn this.from[0];\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tswitchPrefered(preferedDirection, value) {\r\n\t\tif(preferedDirection === Train.RIGHT) {\r\n\t\t\tif(this.to.length >= 2) {\r\n\t\t\t\tthis.switchTo(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.switchFrom(value);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(this.from.length >= 2) {\r\n\t\t\t\tthis.switchFrom(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.switchTo(value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswitchTo(value) {\r\n\t\tthis.switched.to = value;\r\n\t}\r\n\r\n\tswitchFrom(value) {\r\n\t\tthis.switched.from = value;\r\n\t}\r\n\r\n\trailsCount() {\r\n\t\treturn this.from.length + this.to.length\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/world/RailPiece.js","import World from './World';\r\n\r\nexport default class SwitchCursor extends PIXI.Container {\r\n\r\n\tconstructor(train) {\r\n\t\tsuper();\r\n\r\n\t\tthis.train = train;\r\n\r\n\t\tthis.cursor = undefined;\r\n\t\tthis.cursorX = 0;\r\n\t\tthis.cursorY = 0;\r\n\r\n\t\tthis.path = undefined;\r\n\r\n\t\tthis.path = new PIXI.Graphics();\r\n\t\tthis.displayPath();\r\n\t\tthis.addChild(this.path);\r\n\r\n\t\tthis.display();\r\n\r\n\t\tthis.recalculatePosition();\r\n\t}\r\n\r\n\trecalculatePosition() {\r\n\t\tvar trainX = Math.floor(this.train.locomotive.x / World.PIECE_WIDTH);\r\n\t\t// var trainY = this.train.path[trainX];\r\n\r\n\t\t// if(this.cursorX === trainX && this.cursorY === trainY) {\r\n\t\t\t//find next switch\r\n\t\t\tvar newCursorX = trainX + 1;\r\n\t\t\twhile(newCursorX < this.train.world.rails.length\r\n\t\t\t\t&& newCursorX < this.train.path.length\r\n\t\t\t\t&& this.train.world.rails[newCursorX][this.train.path[newCursorX]]\r\n\t\t\t\t&& this.train.world.rails[newCursorX][this.train.path[newCursorX]].to.length < 2) {\r\n\t\t\t\tnewCursorX++;\r\n\t\t\t}\r\n\t\t\tthis.cursorX = newCursorX;\r\n\t\t\tthis.cursorY = this.train.path[newCursorX];\r\n\r\n\t\t\tthis.cursor.x = this.cursorX * World.PIECE_WIDTH + World.PIECE_WIDTH2;\r\n\t\t\tthis.cursor.y = this.cursorY * World.PIECE_HEIGHT + World.PIECE_HEIGHT2;\r\n\t\t// }\r\n\t}\r\n\r\n\tdisplay() {\r\n\t\tvar cursor = new PIXI.Graphics();\r\n\t\tcursor.width = SwitchCursor.SIZE;\r\n\t\tcursor.height = SwitchCursor.SIZE;\r\n\r\n\t\tcursor.lineStyle(SwitchCursor.WIDTH, SwitchCursor.CURSOR_COLOR);\r\n\t\tcursor.drawEllipse(0, 0, SwitchCursor.SIZE, SwitchCursor.SIZE);\r\n\t\tfor (var i=0; i < 4; i++) {\r\n\t\t\tvar x = Math.cos(i / 2 * Math.PI + Math.PI/4);\r\n\t\t\tvar y = Math.sin(i / 2 * Math.PI + Math.PI/4);\r\n\t\t\tcursor.moveTo(x * SwitchCursor.SIZE * 0.5, y * SwitchCursor.SIZE * 0.5);\r\n\t\t\tcursor.lineTo(x * SwitchCursor.SIZE * 1.3, y * SwitchCursor.SIZE * 1.3);\r\n\t\t}\r\n\t\tcursor.endFill();\r\n\r\n\t\tthis.cursor = cursor;\r\n\t\tthis.addChild(cursor);\r\n\t}\r\n\r\n\tdisplayPath() {\r\n\t\tthis.path.clear();\r\n\t\t\r\n\t\tthis.path.lineStyle(7, 0xE1303C, 0.5);\r\n\t\tthis.path.moveTo(World.PIECE_WIDTH, World.PIECE_HEIGHT2);\r\n\t\tfor (var i=0; i < this.train.path.length; i++) {\r\n\t\t\tthis.path.lineTo(World.PIECE_WIDTH * i + World.PIECE_WIDTH2, World.PIECE_HEIGHT * this.train.path[i] + World.PIECE_HEIGHT2);\r\n\t\t}\r\n\t\tthis.path.endFill();\r\n\t}\r\n\r\n\tswitchCursor(value) {\r\n\t\tif(this.cursorX !== undefined && this.cursorY !== undefined) {\r\n\t\t\tvar railPiece = this.train.world.rails[this.cursorX][this.cursorY];\r\n\r\n\t\t\tvar oldTo = railPiece.getTo();\r\n\t\t\tvar oldFrom = railPiece.getFrom();\r\n\t\t\t\r\n\t\t\trailPiece.switchPrefered(this.train.direction, value);\r\n\t\t\t\r\n\t\t\tif(oldTo !== railPiece.getTo() || oldFrom !== railPiece.getFrom()) {\r\n\t\t\t\tthis.train.recalculatePath(this.cursorX);\r\n\t\t\t\tthis.displayPath();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSwitchCursor.WIDTH = 2;\r\nSwitchCursor.SIZE = 15;\r\nSwitchCursor.CURSOR_COLOR = 0x9FBC12;\n\n\n// WEBPACK FOOTER //\n// ./src/world/SwitchCursor.js","import RailPiece from './RailPiece';\r\n\r\nexport default class WorldGenerator {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.rails = []\r\n\t\tthis.rails.push({0: new RailPiece()});\r\n\r\n\t\tthis.generated = {\r\n\t\t\tfrom: 0,\r\n\t\t\tto: 0\r\n\t\t};\r\n\r\n\t\tthis.initGenarator();\r\n\t}\r\n\r\n\t\r\n\tgenerateNext(width) {\r\n\t\tvar half = Math.floor(width / 2);\r\n\t\t\r\n\t\tvar rails = {};\r\n\t\tfor(var i=-half; i<=half; i++) {\r\n\t\t\trails[i] = new RailPiece();\r\n\t\t}\r\n\t\tthis.rails.push(rails);\r\n\r\n\t\t//rails\r\n\t\tvar railsBefore = this.rails[this.rails.length-2];\r\n\t\tObject.keys(railsBefore).forEach(railIndex => {\r\n\t\t\trailIndex = parseInt(railIndex, 10);\r\n\r\n\t\t\tvar usableGenerators = this.railGenerators.filter((railGenerator) => {\r\n\t\t\t\treturn railGenerator.canUse(railsBefore, rails, railIndex);\r\n\t\t\t})\r\n\r\n\t\t\tif(usableGenerators.length > 0) {\r\n\t\t\t\tvar railGenerator = usableGenerators[Math.floor(Math.random() * usableGenerators.length)];\r\n\t\t\t\trailGenerator.use(railsBefore, rails, railIndex);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//carts\r\n\t\tObject.keys(rails).forEach(railIndex => {\r\n\t\t\trailIndex = parseInt(railIndex, 10);\r\n\t\t\tvar railPiece = rails[railIndex];\r\n\r\n\t\t\tif(Math.random() < WorldGenerator.EMPTY_CART_PROBABILITY) {\r\n\t\t\t\trailPiece.isCart = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclamp(from, to) {\r\n\t\tfor(var i=this.generated.to; i<to; i++) {\r\n\r\n\t\t\tvar psin = (x, f) => {\r\n\t\t\t\tif(f === undefined) {\r\n\t\t\t\t\treturn Math.pow(Math.abs(Math.sin(x)), 2);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet r = Math.pow(Math.abs(Math.sin(x)), 2);\r\n\t\t\t\t\treturn f + r * (1-f);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar width = 5 * psin(i / 321, 0.3) * Math.min(1, psin((i + 1) / 10) + psin((i - 64 ) / 41)) * psin(Math.sin(i/ 51) * 10, 0.5);\r\n\t\t\twidth = Math.min(9, (2 * Math.floor(width)) + 1);\r\n\r\n\t\t\tthis.generateNext(width);\r\n\t\t}\r\n\t\tthis.generated.to = to;\r\n\t}\r\n\r\n\tinitGenarator() {\r\n\t\tthis.railGenerators = [];\r\n\r\n\t\tvar addRailType = (callback, rarity) => {\r\n\t\t\tfor(var i=0; i<rarity; i++) {\r\n\t\t\t\tthis.railGenerators.push(callback);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//straight\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 8);\r\n\r\n\t\t//up\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex + 1] !== undefined;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\r\n\t\t\t}\r\n\t\t}, 2);\r\n\r\n\t\t//down\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex - 1] !== undefined;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\r\n\t\t\t}\r\n\t\t}, 2);\r\n\r\n\t\t//split up\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t&& rails[railIndex + 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& rails[railIndex + 1].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2;\r\n\t\t\t\t},\r\n\t\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\r\n\t\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t\t}\r\n\t\t\t}, 3);\r\n\r\n\t\t//split down\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t&& rails[railIndex - 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& rails[railIndex - 1].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2;\r\n\t\t\t\t},\r\n\t\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\r\n\t\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t\t}\r\n\t\t\t}, 3);\r\n\r\n\t/*\r\n\t\t//backsplit up\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t\t&& railsBefore[railIndex + 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& railsBefore[railIndex + 1].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex + 1], railIndex + 1, rails[railIndex], railIndex);\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 2);\r\n\r\n\t\t//backsplit down\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t\t&& railsBefore[railIndex - 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& railsBefore[railIndex - 1].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex - 1], railIndex - 1, rails[railIndex], railIndex);\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 2);\r\n*/\r\n\t}\r\n\r\n\tconnectRails(railA, indexA, railB, indexB) {\r\n\t\trailA.addTo(indexB);\r\n\t\trailB.addFrom(indexA);\r\n\t}\r\n}\r\n\r\nWorldGenerator.EMPTY_CART_PROBABILITY = 0.1;\n\n\n// WEBPACK FOOTER //\n// ./src/world/WorldGenerator.js","\n/**\n * @license\n *\n * chroma.js - JavaScript library for color conversions\n * \n * Copyright (c) 2011-2017, Gregor Aisch\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n * \n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * \n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n * \n * 3. The name Gregor Aisch may not be used to endorse or promote products\n *    derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n */\n\n(function() {\n  var Color, DEG2RAD, LAB_CONSTANTS, PI, PITHIRD, RAD2DEG, TWOPI, _guess_formats, _guess_formats_sorted, _input, _interpolators, abs, atan2, bezier, blend, blend_f, brewer, burn, chroma, clip_rgb, cmyk2rgb, colors, cos, css2rgb, darken, dodge, each, floor, hcg2rgb, hex2rgb, hsi2rgb, hsl2css, hsl2rgb, hsv2rgb, interpolate, interpolate_hsx, interpolate_lab, interpolate_num, interpolate_rgb, lab2lch, lab2rgb, lab_xyz, lch2lab, lch2rgb, lighten, limit, log, luminance_x, m, max, multiply, normal, num2rgb, overlay, pow, rgb2cmyk, rgb2css, rgb2hcg, rgb2hex, rgb2hsi, rgb2hsl, rgb2hsv, rgb2lab, rgb2lch, rgb2luminance, rgb2num, rgb2temperature, rgb2xyz, rgb_xyz, rnd, root, round, screen, sin, sqrt, temperature2rgb, type, unpack, w3cx11, xyz_lab, xyz_rgb,\n    slice = [].slice;\n\n  type = (function() {\n\n    /*\n    for browser-safe type checking+\n    ported from jQuery's $.type\n     */\n    var classToType, len, name, o, ref;\n    classToType = {};\n    ref = \"Boolean Number String Function Array Date RegExp Undefined Null\".split(\" \");\n    for (o = 0, len = ref.length; o < len; o++) {\n      name = ref[o];\n      classToType[\"[object \" + name + \"]\"] = name.toLowerCase();\n    }\n    return function(obj) {\n      var strType;\n      strType = Object.prototype.toString.call(obj);\n      return classToType[strType] || \"object\";\n    };\n  })();\n\n  limit = function(x, min, max) {\n    if (min == null) {\n      min = 0;\n    }\n    if (max == null) {\n      max = 1;\n    }\n    if (x < min) {\n      x = min;\n    }\n    if (x > max) {\n      x = max;\n    }\n    return x;\n  };\n\n  unpack = function(args) {\n    if (args.length >= 3) {\n      return [].slice.call(args);\n    } else {\n      return args[0];\n    }\n  };\n\n  clip_rgb = function(rgb) {\n    var i, o;\n    rgb._clipped = false;\n    rgb._unclipped = rgb.slice(0);\n    for (i = o = 0; o < 3; i = ++o) {\n      if (i < 3) {\n        if (rgb[i] < 0 || rgb[i] > 255) {\n          rgb._clipped = true;\n        }\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 255) {\n          rgb[i] = 255;\n        }\n      } else if (i === 3) {\n        if (rgb[i] < 0) {\n          rgb[i] = 0;\n        }\n        if (rgb[i] > 1) {\n          rgb[i] = 1;\n        }\n      }\n    }\n    if (!rgb._clipped) {\n      delete rgb._unclipped;\n    }\n    return rgb;\n  };\n\n  PI = Math.PI, round = Math.round, cos = Math.cos, floor = Math.floor, pow = Math.pow, log = Math.log, sin = Math.sin, sqrt = Math.sqrt, atan2 = Math.atan2, max = Math.max, abs = Math.abs;\n\n  TWOPI = PI * 2;\n\n  PITHIRD = PI / 3;\n\n  DEG2RAD = PI / 180;\n\n  RAD2DEG = 180 / PI;\n\n  chroma = function() {\n    if (arguments[0] instanceof Color) {\n      return arguments[0];\n    }\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, arguments, function(){});\n  };\n\n  _interpolators = [];\n\n  if ((typeof module !== \"undefined\" && module !== null) && (module.exports != null)) {\n    module.exports = chroma;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return chroma;\n    });\n  } else {\n    root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n    root.chroma = chroma;\n  }\n\n  chroma.version = '1.3.3';\n\n  _input = {};\n\n  _guess_formats = [];\n\n  _guess_formats_sorted = false;\n\n  Color = (function() {\n    function Color() {\n      var arg, args, chk, len, len1, me, mode, o, w;\n      me = this;\n      args = [];\n      for (o = 0, len = arguments.length; o < len; o++) {\n        arg = arguments[o];\n        if (arg != null) {\n          args.push(arg);\n        }\n      }\n      mode = args[args.length - 1];\n      if (_input[mode] != null) {\n        me._rgb = clip_rgb(_input[mode](unpack(args.slice(0, -1))));\n      } else {\n        if (!_guess_formats_sorted) {\n          _guess_formats = _guess_formats.sort(function(a, b) {\n            return b.p - a.p;\n          });\n          _guess_formats_sorted = true;\n        }\n        for (w = 0, len1 = _guess_formats.length; w < len1; w++) {\n          chk = _guess_formats[w];\n          mode = chk.test.apply(chk, args);\n          if (mode) {\n            break;\n          }\n        }\n        if (mode) {\n          me._rgb = clip_rgb(_input[mode].apply(_input, args));\n        }\n      }\n      if (me._rgb == null) {\n        console.warn('unknown format: ' + args);\n      }\n      if (me._rgb == null) {\n        me._rgb = [0, 0, 0];\n      }\n      if (me._rgb.length === 3) {\n        me._rgb.push(1);\n      }\n    }\n\n    Color.prototype.toString = function() {\n      return this.hex();\n    };\n\n    return Color;\n\n  })();\n\n  chroma._input = _input;\n\n\n  /**\n  \tColorBrewer colors for chroma.js\n  \n  \tCopyright (c) 2002 Cynthia Brewer, Mark Harrower, and The \n  \tPennsylvania State University.\n  \n  \tLicensed under the Apache License, Version 2.0 (the \"License\"); \n  \tyou may not use this file except in compliance with the License.\n  \tYou may obtain a copy of the License at\t\n  \thttp://www.apache.org/licenses/LICENSE-2.0\n  \n  \tUnless required by applicable law or agreed to in writing, software distributed\n  \tunder the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n  \tCONDITIONS OF ANY KIND, either express or implied. See the License for the\n  \tspecific language governing permissions and limitations under the License.\n  \n      @preserve\n   */\n\n  chroma.brewer = brewer = {\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  };\n\n  (function() {\n    var key, results;\n    results = [];\n    for (key in brewer) {\n      results.push(brewer[key.toLowerCase()] = brewer[key]);\n    }\n    return results;\n  })();\n\n\n  /**\n  \tX11 color names\n  \n  \thttp://www.w3.org/TR/css3-color/#svg-color\n   */\n\n  w3cx11 = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflower: '#6495ed',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    laserlemon: '#ffff54',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrod: '#fafad2',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    maroon2: '#7f0000',\n    maroon3: '#b03060',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    purple2: '#7f007f',\n    purple3: '#a020f0',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32'\n  };\n\n  chroma.colors = colors = w3cx11;\n\n  lab2rgb = function() {\n    var a, args, b, g, l, r, x, y, z;\n    args = unpack(arguments);\n    l = args[0], a = args[1], b = args[2];\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z);\n    g = xyz_rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z);\n    b = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  xyz_rgb = function(r) {\n    return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055);\n  };\n\n  lab_xyz = function(t) {\n    if (t > LAB_CONSTANTS.t1) {\n      return t * t * t;\n    } else {\n      return LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n    }\n  };\n\n  LAB_CONSTANTS = {\n    Kn: 18,\n    Xn: 0.950470,\n    Yn: 1,\n    Zn: 1.088830,\n    t0: 0.137931034,\n    t1: 0.206896552,\n    t2: 0.12841855,\n    t3: 0.008856452\n  };\n\n  rgb2lab = function() {\n    var b, g, r, ref, ref1, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2xyz(r, g, b), x = ref1[0], y = ref1[1], z = ref1[2];\n    return [116 * y - 16, 500 * (x - y), 200 * (y - z)];\n  };\n\n  rgb_xyz = function(r) {\n    if ((r /= 255) <= 0.04045) {\n      return r / 12.92;\n    } else {\n      return pow((r + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  xyz_lab = function(t) {\n    if (t > LAB_CONSTANTS.t3) {\n      return pow(t, 1 / 3);\n    } else {\n      return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n    }\n  };\n\n  rgb2xyz = function() {\n    var b, g, r, ref, x, y, z;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    x = xyz_lab((0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn);\n    y = xyz_lab((0.2126729 * r + 0.7151522 * g + 0.0721750 * b) / LAB_CONSTANTS.Yn);\n    z = xyz_lab((0.0193339 * r + 0.1191920 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn);\n    return [x, y, z];\n  };\n\n  chroma.lab = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['lab']), function(){});\n  };\n\n  _input.lab = lab2rgb;\n\n  Color.prototype.lab = function() {\n    return rgb2lab(this._rgb);\n  };\n\n  bezier = function(colors) {\n    var I, I0, I1, c, lab0, lab1, lab2, lab3, ref, ref1, ref2;\n    colors = (function() {\n      var len, o, results;\n      results = [];\n      for (o = 0, len = colors.length; o < len; o++) {\n        c = colors[o];\n        results.push(chroma(c));\n      }\n      return results;\n    })();\n    if (colors.length === 2) {\n      ref = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref[0], lab1 = ref[1];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push(lab0[i] + t * (lab1[i] - lab0[i]));\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 3) {\n      ref1 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref1[0], lab1 = ref1[1], lab2 = ref1[2];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * lab0[i] + 2 * (1 - t) * t * lab1[i] + t * t * lab2[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 4) {\n      ref2 = (function() {\n        var len, o, results;\n        results = [];\n        for (o = 0, len = colors.length; o < len; o++) {\n          c = colors[o];\n          results.push(c.lab());\n        }\n        return results;\n      })(), lab0 = ref2[0], lab1 = ref2[1], lab2 = ref2[2], lab3 = ref2[3];\n      I = function(t) {\n        var i, lab;\n        lab = (function() {\n          var o, results;\n          results = [];\n          for (i = o = 0; o <= 2; i = ++o) {\n            results.push((1 - t) * (1 - t) * (1 - t) * lab0[i] + 3 * (1 - t) * (1 - t) * t * lab1[i] + 3 * (1 - t) * t * t * lab2[i] + t * t * t * lab3[i]);\n          }\n          return results;\n        })();\n        return chroma.lab.apply(chroma, lab);\n      };\n    } else if (colors.length === 5) {\n      I0 = bezier(colors.slice(0, 3));\n      I1 = bezier(colors.slice(2, 5));\n      I = function(t) {\n        if (t < 0.5) {\n          return I0(t * 2);\n        } else {\n          return I1((t - 0.5) * 2);\n        }\n      };\n    }\n    return I;\n  };\n\n  chroma.bezier = function(colors) {\n    var f;\n    f = bezier(colors);\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    return f;\n  };\n\n\n  /*\n      chroma.js\n  \n      Copyright (c) 2011-2013, Gregor Aisch\n      All rights reserved.\n  \n      Redistribution and use in source and binary forms, with or without\n      modification, are permitted provided that the following conditions are met:\n  \n      * Redistributions of source code must retain the above copyright notice, this\n        list of conditions and the following disclaimer.\n  \n      * Redistributions in binary form must reproduce the above copyright notice,\n        this list of conditions and the following disclaimer in the documentation\n        and/or other materials provided with the distribution.\n  \n      * The name Gregor Aisch may not be used to endorse or promote products\n        derived from this software without specific prior written permission.\n  \n      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n  \n      @source: https://github.com/gka/chroma.js\n   */\n\n  chroma.cubehelix = function(start, rotations, hue, gamma, lightness) {\n    var dh, dl, f;\n    if (start == null) {\n      start = 300;\n    }\n    if (rotations == null) {\n      rotations = -1.5;\n    }\n    if (hue == null) {\n      hue = 1;\n    }\n    if (gamma == null) {\n      gamma = 1;\n    }\n    if (lightness == null) {\n      lightness = [0, 1];\n    }\n    dh = 0;\n    if (type(lightness) === 'array') {\n      dl = lightness[1] - lightness[0];\n    } else {\n      dl = 0;\n      lightness = [lightness, lightness];\n    }\n    f = function(fract) {\n      var a, amp, b, cos_a, g, h, l, r, sin_a;\n      a = TWOPI * ((start + 120) / 360 + rotations * fract);\n      l = pow(lightness[0] + dl * fract, gamma);\n      h = dh !== 0 ? hue[0] + fract * dh : hue;\n      amp = h * l * (1 - l) / 2;\n      cos_a = cos(a);\n      sin_a = sin(a);\n      r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n      g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n      b = l + amp * (+1.97294 * cos_a);\n      return chroma(clip_rgb([r * 255, g * 255, b * 255]));\n    };\n    f.start = function(s) {\n      if (s == null) {\n        return start;\n      }\n      start = s;\n      return f;\n    };\n    f.rotations = function(r) {\n      if (r == null) {\n        return rotations;\n      }\n      rotations = r;\n      return f;\n    };\n    f.gamma = function(g) {\n      if (g == null) {\n        return gamma;\n      }\n      gamma = g;\n      return f;\n    };\n    f.hue = function(h) {\n      if (h == null) {\n        return hue;\n      }\n      hue = h;\n      if (type(hue) === 'array') {\n        dh = hue[1] - hue[0];\n        if (dh === 0) {\n          hue = hue[1];\n        }\n      } else {\n        dh = 0;\n      }\n      return f;\n    };\n    f.lightness = function(h) {\n      if (h == null) {\n        return lightness;\n      }\n      if (type(h) === 'array') {\n        lightness = h;\n        dl = h[1] - h[0];\n      } else {\n        lightness = [h, h];\n        dl = 0;\n      }\n      return f;\n    };\n    f.scale = function() {\n      return chroma.scale(f);\n    };\n    f.hue(hue);\n    return f;\n  };\n\n  chroma.random = function() {\n    var code, digits, i, o;\n    digits = '0123456789abcdef';\n    code = '#';\n    for (i = o = 0; o < 6; i = ++o) {\n      code += digits.charAt(floor(Math.random() * 16));\n    }\n    return new Color(code);\n  };\n\n  chroma.average = function(colors, mode) {\n    var A, alpha, c, cnt, dx, dy, first, i, l, len, o, xyz, xyz2;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    l = colors.length;\n    colors = colors.map(function(c) {\n      return chroma(c);\n    });\n    first = colors.splice(0, 1)[0];\n    xyz = first.get(mode);\n    cnt = [];\n    dx = 0;\n    dy = 0;\n    for (i in xyz) {\n      xyz[i] = xyz[i] || 0;\n      cnt.push(!isNaN(xyz[i]) ? 1 : 0);\n      if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n        A = xyz[i] / 180 * PI;\n        dx += cos(A);\n        dy += sin(A);\n      }\n    }\n    alpha = first.alpha();\n    for (o = 0, len = colors.length; o < len; o++) {\n      c = colors[o];\n      xyz2 = c.get(mode);\n      alpha += c.alpha();\n      for (i in xyz) {\n        if (!isNaN(xyz2[i])) {\n          xyz[i] += xyz2[i];\n          cnt[i] += 1;\n          if (mode.charAt(i) === 'h') {\n            A = xyz[i] / 180 * PI;\n            dx += cos(A);\n            dy += sin(A);\n          }\n        }\n      }\n    }\n    for (i in xyz) {\n      xyz[i] = xyz[i] / cnt[i];\n      if (mode.charAt(i) === 'h') {\n        A = atan2(dy / cnt[i], dx / cnt[i]) / PI * 180;\n        while (A < 0) {\n          A += 360;\n        }\n        while (A >= 360) {\n          A -= 360;\n        }\n        xyz[i] = A;\n      }\n    }\n    return chroma(xyz, mode).alpha(alpha / l);\n  };\n\n  _input.rgb = function() {\n    var k, ref, results, v;\n    ref = unpack(arguments);\n    results = [];\n    for (k in ref) {\n      v = ref[k];\n      results.push(v);\n    }\n    return results;\n  };\n\n  chroma.rgb = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['rgb']), function(){});\n  };\n\n  Color.prototype.rgb = function(round) {\n    if (round == null) {\n      round = true;\n    }\n    if (round) {\n      return this._rgb.map(Math.round).slice(0, 3);\n    } else {\n      return this._rgb.slice(0, 3);\n    }\n  };\n\n  Color.prototype.rgba = function(round) {\n    if (round == null) {\n      round = true;\n    }\n    if (!round) {\n      return this._rgb.slice(0);\n    }\n    return [Math.round(this._rgb[0]), Math.round(this._rgb[1]), Math.round(this._rgb[2]), this._rgb[3]];\n  };\n\n  _guess_formats.push({\n    p: 3,\n    test: function(n) {\n      var a;\n      a = unpack(arguments);\n      if (type(a) === 'array' && a.length === 3) {\n        return 'rgb';\n      }\n      if (a.length === 4 && type(a[3]) === \"number\" && a[3] >= 0 && a[3] <= 1) {\n        return 'rgb';\n      }\n    }\n  });\n\n  hex2rgb = function(hex) {\n    var a, b, g, r, rgb, u;\n    if (hex.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)) {\n      if (hex.length === 4 || hex.length === 7) {\n        hex = hex.substr(1);\n      }\n      if (hex.length === 3) {\n        hex = hex.split(\"\");\n        hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n      u = parseInt(hex, 16);\n      r = u >> 16;\n      g = u >> 8 & 0xFF;\n      b = u & 0xFF;\n      return [r, g, b, 1];\n    }\n    if (hex.match(/^#?([A-Fa-f0-9]{8})$/)) {\n      if (hex.length === 9) {\n        hex = hex.substr(1);\n      }\n      u = parseInt(hex, 16);\n      r = u >> 24 & 0xFF;\n      g = u >> 16 & 0xFF;\n      b = u >> 8 & 0xFF;\n      a = round((u & 0xFF) / 0xFF * 100) / 100;\n      return [r, g, b, a];\n    }\n    if ((_input.css != null) && (rgb = _input.css(hex))) {\n      return rgb;\n    }\n    throw \"unknown color: \" + hex;\n  };\n\n  rgb2hex = function(channels, mode) {\n    var a, b, g, hxa, r, str, u;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    r = channels[0], g = channels[1], b = channels[2], a = channels[3];\n    r = Math.round(r);\n    g = Math.round(g);\n    b = Math.round(b);\n    u = r << 16 | g << 8 | b;\n    str = \"000000\" + u.toString(16);\n    str = str.substr(str.length - 6);\n    hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    return \"#\" + (function() {\n      switch (mode.toLowerCase()) {\n        case 'rgba':\n          return str + hxa;\n        case 'argb':\n          return hxa + str;\n        default:\n          return str;\n      }\n    })();\n  };\n\n  _input.hex = function(h) {\n    return hex2rgb(h);\n  };\n\n  chroma.hex = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hex']), function(){});\n  };\n\n  Color.prototype.hex = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    return rgb2hex(this._rgb, mode);\n  };\n\n  _guess_formats.push({\n    p: 4,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"string\") {\n        return 'hex';\n      }\n    }\n  });\n\n  hsl2rgb = function() {\n    var args, b, c, g, h, i, l, o, r, ref, s, t1, t2, t3;\n    args = unpack(arguments);\n    h = args[0], s = args[1], l = args[2];\n    if (s === 0) {\n      r = g = b = l * 255;\n    } else {\n      t3 = [0, 0, 0];\n      c = [0, 0, 0];\n      t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      t1 = 2 * l - t2;\n      h /= 360;\n      t3[0] = h + 1 / 3;\n      t3[1] = h;\n      t3[2] = h - 1 / 3;\n      for (i = o = 0; o <= 2; i = ++o) {\n        if (t3[i] < 0) {\n          t3[i] += 1;\n        }\n        if (t3[i] > 1) {\n          t3[i] -= 1;\n        }\n        if (6 * t3[i] < 1) {\n          c[i] = t1 + (t2 - t1) * 6 * t3[i];\n        } else if (2 * t3[i] < 1) {\n          c[i] = t2;\n        } else if (3 * t3[i] < 2) {\n          c[i] = t1 + (t2 - t1) * ((2 / 3) - t3[i]) * 6;\n        } else {\n          c[i] = t1;\n        }\n      }\n      ref = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)], r = ref[0], g = ref[1], b = ref[2];\n    }\n    if (args.length > 3) {\n      return [r, g, b, args[3]];\n    } else {\n      return [r, g, b];\n    }\n  };\n\n  rgb2hsl = function(r, g, b) {\n    var h, l, min, ref, s;\n    if (r !== void 0 && r.length >= 3) {\n      ref = r, r = ref[0], g = ref[1], b = ref[2];\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    l = (max + min) / 2;\n    if (max === min) {\n      s = 0;\n      h = Number.NaN;\n    } else {\n      s = l < 0.5 ? (max - min) / (max + min) : (max - min) / (2 - max - min);\n    }\n    if (r === max) {\n      h = (g - b) / (max - min);\n    } else if (g === max) {\n      h = 2 + (b - r) / (max - min);\n    } else if (b === max) {\n      h = 4 + (r - g) / (max - min);\n    }\n    h *= 60;\n    if (h < 0) {\n      h += 360;\n    }\n    return [h, s, l];\n  };\n\n  chroma.hsl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsl']), function(){});\n  };\n\n  _input.hsl = hsl2rgb;\n\n  Color.prototype.hsl = function() {\n    return rgb2hsl(this._rgb);\n  };\n\n  hsv2rgb = function() {\n    var args, b, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, s, t, v;\n    args = unpack(arguments);\n    h = args[0], s = args[1], v = args[2];\n    v *= 255;\n    if (s === 0) {\n      r = g = b = v;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = v * (1 - s);\n      q = v * (1 - s * f);\n      t = v * (1 - s * (1 - f));\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsv = function() {\n    var b, delta, g, h, min, r, ref, s, v;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    v = max / 255.0;\n    if (max === 0) {\n      h = Number.NaN;\n      s = 0;\n    } else {\n      s = delta / max;\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, s, v];\n  };\n\n  chroma.hsv = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsv']), function(){});\n  };\n\n  _input.hsv = hsv2rgb;\n\n  Color.prototype.hsv = function() {\n    return rgb2hsv(this._rgb);\n  };\n\n  num2rgb = function(num) {\n    var b, g, r;\n    if (type(num) === \"number\" && num >= 0 && num <= 0xFFFFFF) {\n      r = num >> 16;\n      g = (num >> 8) & 0xFF;\n      b = num & 0xFF;\n      return [r, g, b, 1];\n    }\n    console.warn(\"unknown num color: \" + num);\n    return [0, 0, 0, 1];\n  };\n\n  rgb2num = function() {\n    var b, g, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    return (r << 16) + (g << 8) + b;\n  };\n\n  chroma.num = function(num) {\n    return new Color(num, 'num');\n  };\n\n  Color.prototype.num = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    return rgb2num(this._rgb, mode);\n  };\n\n  _input.num = num2rgb;\n\n  _guess_formats.push({\n    p: 1,\n    test: function(n) {\n      if (arguments.length === 1 && type(n) === \"number\" && n >= 0 && n <= 0xFFFFFF) {\n        return 'num';\n      }\n    }\n  });\n\n  hcg2rgb = function() {\n    var _c, _g, args, b, c, f, g, h, i, p, q, r, ref, ref1, ref2, ref3, ref4, ref5, t, v;\n    args = unpack(arguments);\n    h = args[0], c = args[1], _g = args[2];\n    c = c / 100;\n    g = g / 100 * 255;\n    _c = c * 255;\n    if (c === 0) {\n      r = g = b = _g;\n    } else {\n      if (h === 360) {\n        h = 0;\n      }\n      if (h > 360) {\n        h -= 360;\n      }\n      if (h < 0) {\n        h += 360;\n      }\n      h /= 60;\n      i = floor(h);\n      f = h - i;\n      p = _g * (1 - c);\n      q = p + _c * (1 - f);\n      t = p + _c * f;\n      v = p + _c;\n      switch (i) {\n        case 0:\n          ref = [v, t, p], r = ref[0], g = ref[1], b = ref[2];\n          break;\n        case 1:\n          ref1 = [q, v, p], r = ref1[0], g = ref1[1], b = ref1[2];\n          break;\n        case 2:\n          ref2 = [p, v, t], r = ref2[0], g = ref2[1], b = ref2[2];\n          break;\n        case 3:\n          ref3 = [p, q, v], r = ref3[0], g = ref3[1], b = ref3[2];\n          break;\n        case 4:\n          ref4 = [t, p, v], r = ref4[0], g = ref4[1], b = ref4[2];\n          break;\n        case 5:\n          ref5 = [v, p, q], r = ref5[0], g = ref5[1], b = ref5[2];\n      }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hcg = function() {\n    var _g, b, c, delta, g, h, min, r, ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    min = Math.min(r, g, b);\n    max = Math.max(r, g, b);\n    delta = max - min;\n    c = delta * 100 / 255;\n    _g = min / (255 - delta) * 100;\n    if (delta === 0) {\n      h = Number.NaN;\n    } else {\n      if (r === max) {\n        h = (g - b) / delta;\n      }\n      if (g === max) {\n        h = 2 + (b - r) / delta;\n      }\n      if (b === max) {\n        h = 4 + (r - g) / delta;\n      }\n      h *= 60;\n      if (h < 0) {\n        h += 360;\n      }\n    }\n    return [h, c, _g];\n  };\n\n  chroma.hcg = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hcg']), function(){});\n  };\n\n  _input.hcg = hcg2rgb;\n\n  Color.prototype.hcg = function() {\n    return rgb2hcg(this._rgb);\n  };\n\n  css2rgb = function(css) {\n    var aa, ab, hsl, i, m, o, rgb, w;\n    css = css.toLowerCase();\n    if ((chroma.colors != null) && chroma.colors[css]) {\n      return hex2rgb(chroma.colors[css]);\n    }\n    if (m = css.match(/rgb\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = o = 0; o <= 2; i = ++o) {\n        rgb[i] = +rgb[i];\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+),\\s*(\\-?\\d+)\\s*,\\s*(\\-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = w = 0; w <= 3; i = ++w) {\n        rgb[i] = +rgb[i];\n      }\n    } else if (m = css.match(/rgb\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      rgb = m.slice(1, 4);\n      for (i = aa = 0; aa <= 2; i = ++aa) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = 1;\n    } else if (m = css.match(/rgba\\(\\s*(\\-?\\d+(?:\\.\\d+)?)%,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      rgb = m.slice(1, 5);\n      for (i = ab = 0; ab <= 2; i = ++ab) {\n        rgb[i] = round(rgb[i] * 2.55);\n      }\n      rgb[3] = +rgb[3];\n    } else if (m = css.match(/hsl\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = 1;\n    } else if (m = css.match(/hsla\\(\\s*(\\-?\\d+(?:\\.\\d+)?),\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(\\-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)/)) {\n      hsl = m.slice(1, 4);\n      hsl[1] *= 0.01;\n      hsl[2] *= 0.01;\n      rgb = hsl2rgb(hsl);\n      rgb[3] = +m[4];\n    }\n    return rgb;\n  };\n\n  rgb2css = function(rgba) {\n    var mode;\n    mode = rgba[3] < 1 ? 'rgba' : 'rgb';\n    if (mode === 'rgb') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ')';\n    } else if (mode === 'rgba') {\n      return mode + '(' + rgba.slice(0, 3).map(round).join(',') + ',' + rgba[3] + ')';\n    } else {\n\n    }\n  };\n\n  rnd = function(a) {\n    return round(a * 100) / 100;\n  };\n\n  hsl2css = function(hsl, alpha) {\n    var mode;\n    mode = alpha < 1 ? 'hsla' : 'hsl';\n    hsl[0] = rnd(hsl[0] || 0);\n    hsl[1] = rnd(hsl[1] * 100) + '%';\n    hsl[2] = rnd(hsl[2] * 100) + '%';\n    if (mode === 'hsla') {\n      hsl[3] = alpha;\n    }\n    return mode + '(' + hsl.join(',') + ')';\n  };\n\n  _input.css = function(h) {\n    return css2rgb(h);\n  };\n\n  chroma.css = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['css']), function(){});\n  };\n\n  Color.prototype.css = function(mode) {\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (mode.slice(0, 3) === 'rgb') {\n      return rgb2css(this._rgb);\n    } else if (mode.slice(0, 3) === 'hsl') {\n      return hsl2css(this.hsl(), this.alpha());\n    }\n  };\n\n  _input.named = function(name) {\n    return hex2rgb(w3cx11[name]);\n  };\n\n  _guess_formats.push({\n    p: 5,\n    test: function(n) {\n      if (arguments.length === 1 && (w3cx11[n] != null)) {\n        return 'named';\n      }\n    }\n  });\n\n  Color.prototype.name = function(n) {\n    var h, k;\n    if (arguments.length) {\n      if (w3cx11[n]) {\n        this._rgb = hex2rgb(w3cx11[n]);\n      }\n      this._rgb[3] = 1;\n      this;\n    }\n    h = this.hex();\n    for (k in w3cx11) {\n      if (h === w3cx11[k]) {\n        return k;\n      }\n    }\n    return h;\n  };\n\n  lch2lab = function() {\n\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n    \n    A saturation multiplier was added by Gregor Aisch\n     */\n    var c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], c = ref[1], h = ref[2];\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n  };\n\n  lch2rgb = function() {\n    var L, a, args, b, c, g, h, l, r, ref, ref1;\n    args = unpack(arguments);\n    l = args[0], c = args[1], h = args[2];\n    ref = lch2lab(l, c, h), L = ref[0], a = ref[1], b = ref[2];\n    ref1 = lab2rgb(L, a, b), r = ref1[0], g = ref1[1], b = ref1[2];\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n  };\n\n  lab2lch = function() {\n    var a, b, c, h, l, ref;\n    ref = unpack(arguments), l = ref[0], a = ref[1], b = ref[2];\n    c = sqrt(a * a + b * b);\n    h = (atan2(b, a) * RAD2DEG + 360) % 360;\n    if (round(c * 10000) === 0) {\n      h = Number.NaN;\n    }\n    return [l, c, h];\n  };\n\n  rgb2lch = function() {\n    var a, b, g, l, r, ref, ref1;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    ref1 = rgb2lab(r, g, b), l = ref1[0], a = ref1[1], b = ref1[2];\n    return lab2lch(l, a, b);\n  };\n\n  chroma.lch = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'lch');\n  };\n\n  chroma.hcl = function() {\n    var args;\n    args = unpack(arguments);\n    return new Color(args, 'hcl');\n  };\n\n  _input.lch = lch2rgb;\n\n  _input.hcl = function() {\n    var c, h, l, ref;\n    ref = unpack(arguments), h = ref[0], c = ref[1], l = ref[2];\n    return lch2rgb([l, c, h]);\n  };\n\n  Color.prototype.lch = function() {\n    return rgb2lch(this._rgb);\n  };\n\n  Color.prototype.hcl = function() {\n    return rgb2lch(this._rgb).reverse();\n  };\n\n  rgb2cmyk = function(mode) {\n    var b, c, f, g, k, m, r, ref, y;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    k = 1 - Math.max(r, Math.max(g, b));\n    f = k < 1 ? 1 / (1 - k) : 0;\n    c = (1 - r - k) * f;\n    m = (1 - g - k) * f;\n    y = (1 - b - k) * f;\n    return [c, m, y, k];\n  };\n\n  cmyk2rgb = function() {\n    var alpha, args, b, c, g, k, m, r, y;\n    args = unpack(arguments);\n    c = args[0], m = args[1], y = args[2], k = args[3];\n    alpha = args.length > 4 ? args[4] : 1;\n    if (k === 1) {\n      return [0, 0, 0, alpha];\n    }\n    r = c >= 1 ? 0 : 255 * (1 - c) * (1 - k);\n    g = m >= 1 ? 0 : 255 * (1 - m) * (1 - k);\n    b = y >= 1 ? 0 : 255 * (1 - y) * (1 - k);\n    return [r, g, b, alpha];\n  };\n\n  _input.cmyk = function() {\n    return cmyk2rgb(unpack(arguments));\n  };\n\n  chroma.cmyk = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['cmyk']), function(){});\n  };\n\n  Color.prototype.cmyk = function() {\n    return rgb2cmyk(this._rgb);\n  };\n\n  _input.gl = function() {\n    var i, k, o, rgb, v;\n    rgb = (function() {\n      var ref, results;\n      ref = unpack(arguments);\n      results = [];\n      for (k in ref) {\n        v = ref[k];\n        results.push(v);\n      }\n      return results;\n    }).apply(this, arguments);\n    for (i = o = 0; o <= 2; i = ++o) {\n      rgb[i] *= 255;\n    }\n    return rgb;\n  };\n\n  chroma.gl = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['gl']), function(){});\n  };\n\n  Color.prototype.gl = function() {\n    var rgb;\n    rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n  };\n\n  rgb2luminance = function(r, g, b) {\n    var ref;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n  };\n\n  luminance_x = function(x) {\n    x /= 255;\n    if (x <= 0.03928) {\n      return x / 12.92;\n    } else {\n      return pow((x + 0.055) / 1.055, 2.4);\n    }\n  };\n\n  _interpolators = [];\n\n  interpolate = function(col1, col2, f, m) {\n    var interpol, len, o, res;\n    if (f == null) {\n      f = 0.5;\n    }\n    if (m == null) {\n      m = 'rgb';\n    }\n\n    /*\n    interpolates between colors\n    f = 0 --> me\n    f = 1 --> col\n     */\n    if (type(col1) !== 'object') {\n      col1 = chroma(col1);\n    }\n    if (type(col2) !== 'object') {\n      col2 = chroma(col2);\n    }\n    for (o = 0, len = _interpolators.length; o < len; o++) {\n      interpol = _interpolators[o];\n      if (m === interpol[0]) {\n        res = interpol[1](col1, col2, f, m);\n        break;\n      }\n    }\n    if (res == null) {\n      throw \"color mode \" + m + \" is not supported\";\n    }\n    return res.alpha(col1.alpha() + f * (col2.alpha() - col1.alpha()));\n  };\n\n  chroma.interpolate = interpolate;\n\n  Color.prototype.interpolate = function(col2, f, m) {\n    return interpolate(this, col2, f, m);\n  };\n\n  chroma.mix = interpolate;\n\n  Color.prototype.mix = Color.prototype.interpolate;\n\n  interpolate_rgb = function(col1, col2, f, m) {\n    var xyz0, xyz1;\n    xyz0 = col1._rgb;\n    xyz1 = col2._rgb;\n    return new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['rgb', interpolate_rgb]);\n\n  Color.prototype.luminance = function(lum, mode) {\n    var cur_lum, eps, max_iter, test;\n    if (mode == null) {\n      mode = 'rgb';\n    }\n    if (!arguments.length) {\n      return rgb2luminance(this._rgb);\n    }\n    if (lum === 0) {\n      this._rgb = [0, 0, 0, this._rgb[3]];\n    } else if (lum === 1) {\n      this._rgb = [255, 255, 255, this._rgb[3]];\n    } else {\n      eps = 1e-7;\n      max_iter = 20;\n      test = function(l, h) {\n        var lm, m;\n        m = l.interpolate(h, 0.5, mode);\n        lm = m.luminance();\n        if (Math.abs(lum - lm) < eps || !max_iter--) {\n          return m;\n        }\n        if (lm > lum) {\n          return test(l, m);\n        }\n        return test(m, h);\n      };\n      cur_lum = rgb2luminance(this._rgb);\n      this._rgb = (cur_lum > lum ? test(chroma('black'), this) : test(this, chroma('white'))).rgba();\n    }\n    return this;\n  };\n\n  temperature2rgb = function(kelvin) {\n    var b, g, r, temp;\n    temp = kelvin / 100;\n    if (temp < 66) {\n      r = 255;\n      g = -155.25485562709179 - 0.44596950469579133 * (g = temp - 2) + 104.49216199393888 * log(g);\n      b = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b = temp - 10) + 115.67994401066147 * log(b);\n    } else {\n      r = 351.97690566805693 + 0.114206453784165 * (r = temp - 55) - 40.25366309332127 * log(r);\n      g = 325.4494125711974 + 0.07943456536662342 * (g = temp - 50) - 28.0852963507957 * log(g);\n      b = 255;\n    }\n    return [r, g, b];\n  };\n\n  rgb2temperature = function() {\n    var b, eps, g, maxTemp, minTemp, r, ref, rgb, temp;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    minTemp = 1000;\n    maxTemp = 40000;\n    eps = 0.4;\n    while (maxTemp - minTemp > eps) {\n      temp = (maxTemp + minTemp) * 0.5;\n      rgb = temperature2rgb(temp);\n      if ((rgb[2] / rgb[0]) >= (b / r)) {\n        maxTemp = temp;\n      } else {\n        minTemp = temp;\n      }\n    }\n    return round(temp);\n  };\n\n  chroma.temperature = chroma.kelvin = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['temperature']), function(){});\n  };\n\n  _input.temperature = _input.kelvin = _input.K = temperature2rgb;\n\n  Color.prototype.temperature = function() {\n    return rgb2temperature(this._rgb);\n  };\n\n  Color.prototype.kelvin = Color.prototype.temperature;\n\n  chroma.contrast = function(a, b) {\n    var l1, l2, ref, ref1;\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.luminance();\n    l2 = b.luminance();\n    if (l1 > l2) {\n      return (l1 + 0.05) / (l2 + 0.05);\n    } else {\n      return (l2 + 0.05) / (l1 + 0.05);\n    }\n  };\n\n  chroma.distance = function(a, b, mode) {\n    var d, i, l1, l2, ref, ref1, sum_sq;\n    if (mode == null) {\n      mode = 'lab';\n    }\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    l1 = a.get(mode);\n    l2 = b.get(mode);\n    sum_sq = 0;\n    for (i in l1) {\n      d = (l1[i] || 0) - (l2[i] || 0);\n      sum_sq += d * d;\n    }\n    return Math.sqrt(sum_sq);\n  };\n\n  chroma.deltaE = function(a, b, L, C) {\n    var L1, L2, a1, a2, b1, b2, c1, c2, c4, dH2, delA, delB, delC, delL, f, h1, ref, ref1, ref2, ref3, sc, sh, sl, t, v1, v2, v3;\n    if (L == null) {\n      L = 1;\n    }\n    if (C == null) {\n      C = 1;\n    }\n    if ((ref = type(a)) === 'string' || ref === 'number') {\n      a = new Color(a);\n    }\n    if ((ref1 = type(b)) === 'string' || ref1 === 'number') {\n      b = new Color(b);\n    }\n    ref2 = a.lab(), L1 = ref2[0], a1 = ref2[1], b1 = ref2[2];\n    ref3 = b.lab(), L2 = ref3[0], a2 = ref3[1], b2 = ref3[2];\n    c1 = sqrt(a1 * a1 + b1 * b1);\n    c2 = sqrt(a2 * a2 + b2 * b2);\n    sl = L1 < 16.0 ? 0.511 : (0.040975 * L1) / (1.0 + 0.01765 * L1);\n    sc = (0.0638 * c1) / (1.0 + 0.0131 * c1) + 0.638;\n    h1 = c1 < 0.000001 ? 0.0 : (atan2(b1, a1) * 180.0) / PI;\n    while (h1 < 0) {\n      h1 += 360;\n    }\n    while (h1 >= 360) {\n      h1 -= 360;\n    }\n    t = (h1 >= 164.0) && (h1 <= 345.0) ? 0.56 + abs(0.2 * cos((PI * (h1 + 168.0)) / 180.0)) : 0.36 + abs(0.4 * cos((PI * (h1 + 35.0)) / 180.0));\n    c4 = c1 * c1 * c1 * c1;\n    f = sqrt(c4 / (c4 + 1900.0));\n    sh = sc * (f * t + 1.0 - f);\n    delL = L1 - L2;\n    delC = c1 - c2;\n    delA = a1 - a2;\n    delB = b1 - b2;\n    dH2 = delA * delA + delB * delB - delC * delC;\n    v1 = delL / (L * sl);\n    v2 = delC / (C * sc);\n    v3 = sh;\n    return sqrt(v1 * v1 + v2 * v2 + (dH2 / (v3 * v3)));\n  };\n\n  Color.prototype.get = function(modechan) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    src = me[mode]();\n    if (channel) {\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        return src[i];\n      } else {\n        return console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      return src;\n    }\n  };\n\n  Color.prototype.set = function(modechan, value) {\n    var channel, i, me, mode, ref, src;\n    me = this;\n    ref = modechan.split('.'), mode = ref[0], channel = ref[1];\n    if (channel) {\n      src = me[mode]();\n      i = mode.indexOf(channel);\n      if (i > -1) {\n        if (type(value) === 'string') {\n          switch (value.charAt(0)) {\n            case '+':\n              src[i] += +value;\n              break;\n            case '-':\n              src[i] += +value;\n              break;\n            case '*':\n              src[i] *= +(value.substr(1));\n              break;\n            case '/':\n              src[i] /= +(value.substr(1));\n              break;\n            default:\n              src[i] = +value;\n          }\n        } else {\n          src[i] = value;\n        }\n      } else {\n        console.warn('unknown channel ' + channel + ' in mode ' + mode);\n      }\n    } else {\n      src = value;\n    }\n    return chroma(src, mode).alpha(me.alpha());\n  };\n\n  Color.prototype.clipped = function() {\n    return this._rgb._clipped || false;\n  };\n\n  Color.prototype.alpha = function(a) {\n    if (arguments.length) {\n      return chroma.rgb([this._rgb[0], this._rgb[1], this._rgb[2], a]);\n    }\n    return this._rgb[3];\n  };\n\n  Color.prototype.darken = function(amount) {\n    var lab, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return chroma.lab(lab).alpha(me.alpha());\n  };\n\n  Color.prototype.brighten = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.darken(-amount);\n  };\n\n  Color.prototype.darker = Color.prototype.darken;\n\n  Color.prototype.brighter = Color.prototype.brighten;\n\n  Color.prototype.saturate = function(amount) {\n    var lch, me;\n    if (amount == null) {\n      amount = 1;\n    }\n    me = this;\n    lch = me.lch();\n    lch[1] += amount * LAB_CONSTANTS.Kn;\n    if (lch[1] < 0) {\n      lch[1] = 0;\n    }\n    return chroma.lch(lch).alpha(me.alpha());\n  };\n\n  Color.prototype.desaturate = function(amount) {\n    if (amount == null) {\n      amount = 1;\n    }\n    return this.saturate(-amount);\n  };\n\n  Color.prototype.premultiply = function() {\n    var a, rgb;\n    rgb = this.rgb();\n    a = this.alpha();\n    return chroma(rgb[0] * a, rgb[1] * a, rgb[2] * a, a);\n  };\n\n  blend = function(bottom, top, mode) {\n    if (!blend[mode]) {\n      throw 'unknown blend mode ' + mode;\n    }\n    return blend[mode](bottom, top);\n  };\n\n  blend_f = function(f) {\n    return function(bottom, top) {\n      var c0, c1;\n      c0 = chroma(top).rgb();\n      c1 = chroma(bottom).rgb();\n      return chroma(f(c0, c1), 'rgb');\n    };\n  };\n\n  each = function(f) {\n    return function(c0, c1) {\n      var i, o, out;\n      out = [];\n      for (i = o = 0; o <= 3; i = ++o) {\n        out[i] = f(c0[i], c1[i]);\n      }\n      return out;\n    };\n  };\n\n  normal = function(a, b) {\n    return a;\n  };\n\n  multiply = function(a, b) {\n    return a * b / 255;\n  };\n\n  darken = function(a, b) {\n    if (a > b) {\n      return b;\n    } else {\n      return a;\n    }\n  };\n\n  lighten = function(a, b) {\n    if (a > b) {\n      return a;\n    } else {\n      return b;\n    }\n  };\n\n  screen = function(a, b) {\n    return 255 * (1 - (1 - a / 255) * (1 - b / 255));\n  };\n\n  overlay = function(a, b) {\n    if (b < 128) {\n      return 2 * a * b / 255;\n    } else {\n      return 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\n    }\n  };\n\n  burn = function(a, b) {\n    return 255 * (1 - (1 - b / 255) / (a / 255));\n  };\n\n  dodge = function(a, b) {\n    if (a === 255) {\n      return 255;\n    }\n    a = 255 * (b / 255) / (1 - a / 255);\n    if (a > 255) {\n      return 255;\n    } else {\n      return a;\n    }\n  };\n\n  blend.normal = blend_f(each(normal));\n\n  blend.multiply = blend_f(each(multiply));\n\n  blend.screen = blend_f(each(screen));\n\n  blend.overlay = blend_f(each(overlay));\n\n  blend.darken = blend_f(each(darken));\n\n  blend.lighten = blend_f(each(lighten));\n\n  blend.dodge = blend_f(each(dodge));\n\n  blend.burn = blend_f(each(burn));\n\n  chroma.blend = blend;\n\n  chroma.analyze = function(data) {\n    var len, o, r, val;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    for (o = 0, len = data.length; o < len; o++) {\n      val = data[o];\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.scale = function(colors, positions) {\n    var _classes, _colorCache, _colors, _correctLightness, _domain, _fixed, _max, _min, _mode, _nacol, _out, _padding, _pos, _spread, _useCache, classifyValue, f, getClass, getColor, resetCache, setColors, tmap;\n    _mode = 'rgb';\n    _nacol = chroma('#ccc');\n    _spread = 0;\n    _fixed = false;\n    _domain = [0, 1];\n    _pos = [];\n    _padding = [0, 0];\n    _classes = false;\n    _colors = [];\n    _out = false;\n    _min = 0;\n    _max = 1;\n    _correctLightness = false;\n    _colorCache = {};\n    _useCache = true;\n    setColors = function(colors) {\n      var c, col, o, ref, ref1, w;\n      if (colors == null) {\n        colors = ['#fff', '#000'];\n      }\n      if ((colors != null) && type(colors) === 'string' && (chroma.brewer != null)) {\n        colors = chroma.brewer[colors] || chroma.brewer[colors.toLowerCase()] || colors;\n      }\n      if (type(colors) === 'array') {\n        colors = colors.slice(0);\n        for (c = o = 0, ref = colors.length - 1; 0 <= ref ? o <= ref : o >= ref; c = 0 <= ref ? ++o : --o) {\n          col = colors[c];\n          if (type(col) === \"string\") {\n            colors[c] = chroma(col);\n          }\n        }\n        _pos.length = 0;\n        for (c = w = 0, ref1 = colors.length - 1; 0 <= ref1 ? w <= ref1 : w >= ref1; c = 0 <= ref1 ? ++w : --w) {\n          _pos.push(c / (colors.length - 1));\n        }\n      }\n      resetCache();\n      return _colors = colors;\n    };\n    getClass = function(value) {\n      var i, n;\n      if (_classes != null) {\n        n = _classes.length - 1;\n        i = 0;\n        while (i < n && value >= _classes[i]) {\n          i++;\n        }\n        return i - 1;\n      }\n      return 0;\n    };\n    tmap = function(t) {\n      return t;\n    };\n    classifyValue = function(value) {\n      var i, maxc, minc, n, val;\n      val = value;\n      if (_classes.length > 2) {\n        n = _classes.length - 1;\n        i = getClass(value);\n        minc = _classes[0] + (_classes[1] - _classes[0]) * (0 + _spread * 0.5);\n        maxc = _classes[n - 1] + (_classes[n] - _classes[n - 1]) * (1 - _spread * 0.5);\n        val = _min + ((_classes[i] + (_classes[i + 1] - _classes[i]) * 0.5 - minc) / (maxc - minc)) * (_max - _min);\n      }\n      return val;\n    };\n    getColor = function(val, bypassMap) {\n      var c, col, i, k, o, p, ref, t;\n      if (bypassMap == null) {\n        bypassMap = false;\n      }\n      if (isNaN(val)) {\n        return _nacol;\n      }\n      if (!bypassMap) {\n        if (_classes && _classes.length > 2) {\n          c = getClass(val);\n          t = c / (_classes.length - 2);\n          t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n        } else if (_max !== _min) {\n          t = (val - _min) / (_max - _min);\n          t = _padding[0] + (t * (1 - _padding[0] - _padding[1]));\n          t = Math.min(1, Math.max(0, t));\n        } else {\n          t = 1;\n        }\n      } else {\n        t = val;\n      }\n      if (!bypassMap) {\n        t = tmap(t);\n      }\n      k = Math.floor(t * 10000);\n      if (_useCache && _colorCache[k]) {\n        col = _colorCache[k];\n      } else {\n        if (type(_colors) === 'array') {\n          for (i = o = 0, ref = _pos.length - 1; 0 <= ref ? o <= ref : o >= ref; i = 0 <= ref ? ++o : --o) {\n            p = _pos[i];\n            if (t <= p) {\n              col = _colors[i];\n              break;\n            }\n            if (t >= p && i === _pos.length - 1) {\n              col = _colors[i];\n              break;\n            }\n            if (t > p && t < _pos[i + 1]) {\n              t = (t - p) / (_pos[i + 1] - p);\n              col = chroma.interpolate(_colors[i], _colors[i + 1], t, _mode);\n              break;\n            }\n          }\n        } else if (type(_colors) === 'function') {\n          col = _colors(t);\n        }\n        if (_useCache) {\n          _colorCache[k] = col;\n        }\n      }\n      return col;\n    };\n    resetCache = function() {\n      return _colorCache = {};\n    };\n    setColors(colors);\n    f = function(v) {\n      var c;\n      c = chroma(getColor(v));\n      if (_out && c[_out]) {\n        return c[_out]();\n      } else {\n        return c;\n      }\n    };\n    f.classes = function(classes) {\n      var d;\n      if (classes != null) {\n        if (type(classes) === 'array') {\n          _classes = classes;\n          _domain = [classes[0], classes[classes.length - 1]];\n        } else {\n          d = chroma.analyze(_domain);\n          if (classes === 0) {\n            _classes = [d.min, d.max];\n          } else {\n            _classes = chroma.limits(d, 'e', classes);\n          }\n        }\n        return f;\n      }\n      return _classes;\n    };\n    f.domain = function(domain) {\n      var c, d, k, len, o, ref, w;\n      if (!arguments.length) {\n        return _domain;\n      }\n      _min = domain[0];\n      _max = domain[domain.length - 1];\n      _pos = [];\n      k = _colors.length;\n      if (domain.length === k && _min !== _max) {\n        for (o = 0, len = domain.length; o < len; o++) {\n          d = domain[o];\n          _pos.push((d - _min) / (_max - _min));\n        }\n      } else {\n        for (c = w = 0, ref = k - 1; 0 <= ref ? w <= ref : w >= ref; c = 0 <= ref ? ++w : --w) {\n          _pos.push(c / (k - 1));\n        }\n      }\n      _domain = [_min, _max];\n      return f;\n    };\n    f.mode = function(_m) {\n      if (!arguments.length) {\n        return _mode;\n      }\n      _mode = _m;\n      resetCache();\n      return f;\n    };\n    f.range = function(colors, _pos) {\n      setColors(colors, _pos);\n      return f;\n    };\n    f.out = function(_o) {\n      _out = _o;\n      return f;\n    };\n    f.spread = function(val) {\n      if (!arguments.length) {\n        return _spread;\n      }\n      _spread = val;\n      return f;\n    };\n    f.correctLightness = function(v) {\n      if (v == null) {\n        v = true;\n      }\n      _correctLightness = v;\n      resetCache();\n      if (_correctLightness) {\n        tmap = function(t) {\n          var L0, L1, L_actual, L_diff, L_ideal, max_iter, pol, t0, t1;\n          L0 = getColor(0, true).lab()[0];\n          L1 = getColor(1, true).lab()[0];\n          pol = L0 > L1;\n          L_actual = getColor(t, true).lab()[0];\n          L_ideal = L0 + (L1 - L0) * t;\n          L_diff = L_actual - L_ideal;\n          t0 = 0;\n          t1 = 1;\n          max_iter = 20;\n          while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n            (function() {\n              if (pol) {\n                L_diff *= -1;\n              }\n              if (L_diff < 0) {\n                t0 = t;\n                t += (t1 - t) * 0.5;\n              } else {\n                t1 = t;\n                t += (t0 - t) * 0.5;\n              }\n              L_actual = getColor(t, true).lab()[0];\n              return L_diff = L_actual - L_ideal;\n            })();\n          }\n          return t;\n        };\n      } else {\n        tmap = function(t) {\n          return t;\n        };\n      }\n      return f;\n    };\n    f.padding = function(p) {\n      if (p != null) {\n        if (type(p) === 'number') {\n          p = [p, p];\n        }\n        _padding = p;\n        return f;\n      } else {\n        return _padding;\n      }\n    };\n    f.colors = function(numColors, out) {\n      var dd, dm, i, o, ref, results, samples, w;\n      if (out == null) {\n        out = 'hex';\n      }\n      if (arguments.length === 0) {\n        return _colors.map(function(c) {\n          return c[out]();\n        });\n      }\n      if (numColors) {\n        if (numColors === 1) {\n          return f(0.5)[out]();\n        }\n        dm = _domain[0];\n        dd = _domain[1] - dm;\n        return (function() {\n          results = [];\n          for (var o = 0; 0 <= numColors ? o < numColors : o > numColors; 0 <= numColors ? o++ : o--){ results.push(o); }\n          return results;\n        }).apply(this).map(function(i) {\n          return f(dm + i / (numColors - 1) * dd)[out]();\n        });\n      }\n      colors = [];\n      samples = [];\n      if (_classes && _classes.length > 2) {\n        for (i = w = 1, ref = _classes.length; 1 <= ref ? w < ref : w > ref; i = 1 <= ref ? ++w : --w) {\n          samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n        }\n      } else {\n        samples = _domain;\n      }\n      return samples.map(function(v) {\n        return f(v)[out]();\n      });\n    };\n    f.cache = function(c) {\n      if (c != null) {\n        return _useCache = c;\n      } else {\n        return _useCache;\n      }\n    };\n    return f;\n  };\n\n  if (chroma.scales == null) {\n    chroma.scales = {};\n  }\n\n  chroma.scales.cool = function() {\n    return chroma.scale([chroma.hsl(180, 1, .9), chroma.hsl(250, .7, .4)]);\n  };\n\n  chroma.scales.hot = function() {\n    return chroma.scale(['#000', '#f00', '#ff0', '#fff'], [0, .25, .75, 1]).mode('rgb');\n  };\n\n  chroma.analyze = function(data, key, filter) {\n    var add, k, len, o, r, val, visit;\n    r = {\n      min: Number.MAX_VALUE,\n      max: Number.MAX_VALUE * -1,\n      sum: 0,\n      values: [],\n      count: 0\n    };\n    if (filter == null) {\n      filter = function() {\n        return true;\n      };\n    }\n    add = function(val) {\n      if ((val != null) && !isNaN(val)) {\n        r.values.push(val);\n        r.sum += val;\n        if (val < r.min) {\n          r.min = val;\n        }\n        if (val > r.max) {\n          r.max = val;\n        }\n        r.count += 1;\n      }\n    };\n    visit = function(val, k) {\n      if (filter(val, k)) {\n        if ((key != null) && type(key) === 'function') {\n          return add(key(val));\n        } else if ((key != null) && type(key) === 'string' || type(key) === 'number') {\n          return add(val[key]);\n        } else {\n          return add(val);\n        }\n      }\n    };\n    if (type(data) === 'array') {\n      for (o = 0, len = data.length; o < len; o++) {\n        val = data[o];\n        visit(val);\n      }\n    } else {\n      for (k in data) {\n        val = data[k];\n        visit(val, k);\n      }\n    }\n    r.domain = [r.min, r.max];\n    r.limits = function(mode, num) {\n      return chroma.limits(r, mode, num);\n    };\n    return r;\n  };\n\n  chroma.limits = function(data, mode, num) {\n    var aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, assignments, best, centroids, cluster, clusterSizes, dist, i, j, kClusters, limits, max_log, min, min_log, mindist, n, nb_iters, newCentroids, o, p, pb, pr, ref, ref1, ref10, ref11, ref12, ref13, ref14, ref2, ref3, ref4, ref5, ref6, ref7, ref8, ref9, repeat, sum, tmpKMeansBreaks, v, value, values, w;\n    if (mode == null) {\n      mode = 'equal';\n    }\n    if (num == null) {\n      num = 7;\n    }\n    if (type(data) === 'array') {\n      data = chroma.analyze(data);\n    }\n    min = data.min;\n    max = data.max;\n    sum = data.sum;\n    values = data.values.sort(function(a, b) {\n      return a - b;\n    });\n    if (num === 1) {\n      return [min, max];\n    }\n    limits = [];\n    if (mode.substr(0, 1) === 'c') {\n      limits.push(min);\n      limits.push(max);\n    }\n    if (mode.substr(0, 1) === 'e') {\n      limits.push(min);\n      for (i = o = 1, ref = num - 1; 1 <= ref ? o <= ref : o >= ref; i = 1 <= ref ? ++o : --o) {\n        limits.push(min + (i / num) * (max - min));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n      if (min <= 0) {\n        throw 'Logarithmic scales are only possible for values > 0';\n      }\n      min_log = Math.LOG10E * log(min);\n      max_log = Math.LOG10E * log(max);\n      limits.push(min);\n      for (i = w = 1, ref1 = num - 1; 1 <= ref1 ? w <= ref1 : w >= ref1; i = 1 <= ref1 ? ++w : --w) {\n        limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n      limits.push(min);\n      for (i = aa = 1, ref2 = num - 1; 1 <= ref2 ? aa <= ref2 : aa >= ref2; i = 1 <= ref2 ? ++aa : --aa) {\n        p = (values.length - 1) * i / num;\n        pb = floor(p);\n        if (pb === p) {\n          limits.push(values[pb]);\n        } else {\n          pr = p - pb;\n          limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n        }\n      }\n      limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n\n      /*\n      implementation based on\n      http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n      simplified for 1-d input values\n       */\n      n = values.length;\n      assignments = new Array(n);\n      clusterSizes = new Array(num);\n      repeat = true;\n      nb_iters = 0;\n      centroids = null;\n      centroids = [];\n      centroids.push(min);\n      for (i = ab = 1, ref3 = num - 1; 1 <= ref3 ? ab <= ref3 : ab >= ref3; i = 1 <= ref3 ? ++ab : --ab) {\n        centroids.push(min + (i / num) * (max - min));\n      }\n      centroids.push(max);\n      while (repeat) {\n        for (j = ac = 0, ref4 = num - 1; 0 <= ref4 ? ac <= ref4 : ac >= ref4; j = 0 <= ref4 ? ++ac : --ac) {\n          clusterSizes[j] = 0;\n        }\n        for (i = ad = 0, ref5 = n - 1; 0 <= ref5 ? ad <= ref5 : ad >= ref5; i = 0 <= ref5 ? ++ad : --ad) {\n          value = values[i];\n          mindist = Number.MAX_VALUE;\n          for (j = ae = 0, ref6 = num - 1; 0 <= ref6 ? ae <= ref6 : ae >= ref6; j = 0 <= ref6 ? ++ae : --ae) {\n            dist = abs(centroids[j] - value);\n            if (dist < mindist) {\n              mindist = dist;\n              best = j;\n            }\n          }\n          clusterSizes[best]++;\n          assignments[i] = best;\n        }\n        newCentroids = new Array(num);\n        for (j = af = 0, ref7 = num - 1; 0 <= ref7 ? af <= ref7 : af >= ref7; j = 0 <= ref7 ? ++af : --af) {\n          newCentroids[j] = null;\n        }\n        for (i = ag = 0, ref8 = n - 1; 0 <= ref8 ? ag <= ref8 : ag >= ref8; i = 0 <= ref8 ? ++ag : --ag) {\n          cluster = assignments[i];\n          if (newCentroids[cluster] === null) {\n            newCentroids[cluster] = values[i];\n          } else {\n            newCentroids[cluster] += values[i];\n          }\n        }\n        for (j = ah = 0, ref9 = num - 1; 0 <= ref9 ? ah <= ref9 : ah >= ref9; j = 0 <= ref9 ? ++ah : --ah) {\n          newCentroids[j] *= 1 / clusterSizes[j];\n        }\n        repeat = false;\n        for (j = ai = 0, ref10 = num - 1; 0 <= ref10 ? ai <= ref10 : ai >= ref10; j = 0 <= ref10 ? ++ai : --ai) {\n          if (newCentroids[j] !== centroids[i]) {\n            repeat = true;\n            break;\n          }\n        }\n        centroids = newCentroids;\n        nb_iters++;\n        if (nb_iters > 200) {\n          repeat = false;\n        }\n      }\n      kClusters = {};\n      for (j = aj = 0, ref11 = num - 1; 0 <= ref11 ? aj <= ref11 : aj >= ref11; j = 0 <= ref11 ? ++aj : --aj) {\n        kClusters[j] = [];\n      }\n      for (i = ak = 0, ref12 = n - 1; 0 <= ref12 ? ak <= ref12 : ak >= ref12; i = 0 <= ref12 ? ++ak : --ak) {\n        cluster = assignments[i];\n        kClusters[cluster].push(values[i]);\n      }\n      tmpKMeansBreaks = [];\n      for (j = al = 0, ref13 = num - 1; 0 <= ref13 ? al <= ref13 : al >= ref13; j = 0 <= ref13 ? ++al : --al) {\n        tmpKMeansBreaks.push(kClusters[j][0]);\n        tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n      }\n      tmpKMeansBreaks = tmpKMeansBreaks.sort(function(a, b) {\n        return a - b;\n      });\n      limits.push(tmpKMeansBreaks[0]);\n      for (i = am = 1, ref14 = tmpKMeansBreaks.length - 1; am <= ref14; i = am += 2) {\n        v = tmpKMeansBreaks[i];\n        if (!isNaN(v) && limits.indexOf(v) === -1) {\n          limits.push(v);\n        }\n      }\n    }\n    return limits;\n  };\n\n  hsi2rgb = function(h, s, i) {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n     */\n    var args, b, g, r;\n    args = unpack(arguments);\n    h = args[0], s = args[1], i = args[2];\n    if (isNaN(h)) {\n      h = 0;\n    }\n    h /= 360;\n    if (h < 1 / 3) {\n      b = (1 - s) / 3;\n      r = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n      h -= 1 / 3;\n      r = (1 - s) / 3;\n      g = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      b = 1 - (r + g);\n    } else {\n      h -= 2 / 3;\n      g = (1 - s) / 3;\n      b = (1 + s * cos(TWOPI * h) / cos(PITHIRD - TWOPI * h)) / 3;\n      r = 1 - (g + b);\n    }\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n  };\n\n  rgb2hsi = function() {\n\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n     */\n    var b, g, h, i, min, r, ref, s;\n    ref = unpack(arguments), r = ref[0], g = ref[1], b = ref[2];\n    TWOPI = Math.PI * 2;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    min = Math.min(r, g, b);\n    i = (r + g + b) / 3;\n    s = 1 - min / i;\n    if (s === 0) {\n      h = 0;\n    } else {\n      h = ((r - g) + (r - b)) / 2;\n      h /= Math.sqrt((r - g) * (r - g) + (r - b) * (g - b));\n      h = Math.acos(h);\n      if (b > g) {\n        h = TWOPI - h;\n      }\n      h /= TWOPI;\n    }\n    return [h * 360, s, i];\n  };\n\n  chroma.hsi = function() {\n    return (function(func, args, ctor) {\n      ctor.prototype = func.prototype;\n      var child = new ctor, result = func.apply(child, args);\n      return Object(result) === result ? result : child;\n    })(Color, slice.call(arguments).concat(['hsi']), function(){});\n  };\n\n  _input.hsi = hsi2rgb;\n\n  Color.prototype.hsi = function() {\n    return rgb2hsi(this._rgb);\n  };\n\n  interpolate_hsx = function(col1, col2, f, m) {\n    var dh, hue, hue0, hue1, lbv, lbv0, lbv1, res, sat, sat0, sat1, xyz0, xyz1;\n    if (m === 'hsl') {\n      xyz0 = col1.hsl();\n      xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n      xyz0 = col1.hsv();\n      xyz1 = col2.hsv();\n    } else if (m === 'hcg') {\n      xyz0 = col1.hcg();\n      xyz1 = col2.hcg();\n    } else if (m === 'hsi') {\n      xyz0 = col1.hsi();\n      xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n      m = 'hcl';\n      xyz0 = col1.hcl();\n      xyz1 = col2.hcl();\n    }\n    if (m.substr(0, 1) === 'h') {\n      hue0 = xyz0[0], sat0 = xyz0[1], lbv0 = xyz0[2];\n      hue1 = xyz1[0], sat1 = xyz1[1], lbv1 = xyz1[2];\n    }\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n      if (hue1 > hue0 && hue1 - hue0 > 180) {\n        dh = hue1 - (hue0 + 360);\n      } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n        dh = hue1 + 360 - hue0;\n      } else {\n        dh = hue1 - hue0;\n      }\n      hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n      hue = hue0;\n      if ((lbv1 === 1 || lbv1 === 0) && m !== 'hsv') {\n        sat = sat0;\n      }\n    } else if (!isNaN(hue1)) {\n      hue = hue1;\n      if ((lbv0 === 1 || lbv0 === 0) && m !== 'hsv') {\n        sat = sat1;\n      }\n    } else {\n      hue = Number.NaN;\n    }\n    if (sat == null) {\n      sat = sat0 + f * (sat1 - sat0);\n    }\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return res = chroma[m](hue, sat, lbv);\n  };\n\n  _interpolators = _interpolators.concat((function() {\n    var len, o, ref, results;\n    ref = ['hsv', 'hsl', 'hsi', 'hcl', 'lch', 'hcg'];\n    results = [];\n    for (o = 0, len = ref.length; o < len; o++) {\n      m = ref[o];\n      results.push([m, interpolate_hsx]);\n    }\n    return results;\n  })());\n\n  interpolate_num = function(col1, col2, f, m) {\n    var n1, n2;\n    n1 = col1.num();\n    n2 = col2.num();\n    return chroma.num(n1 + (n2 - n1) * f, 'num');\n  };\n\n  _interpolators.push(['num', interpolate_num]);\n\n  interpolate_lab = function(col1, col2, f, m) {\n    var res, xyz0, xyz1;\n    xyz0 = col1.lab();\n    xyz1 = col2.lab();\n    return res = new Color(xyz0[0] + f * (xyz1[0] - xyz0[0]), xyz0[1] + f * (xyz1[1] - xyz0[1]), xyz0[2] + f * (xyz1[2] - xyz0[2]), m);\n  };\n\n  _interpolators.push(['lab', interpolate_lab]);\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/chroma-js/chroma.js\n// module id = 16\n// module chunks = 0","function sineIn (t) {\n  var v = Math.cos(t * Math.PI * 0.5)\n  if (Math.abs(v) < 1e-14) return 1\n  else return 1 - v\n}\n\nmodule.exports = sineIn\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/eases/sine-in.js\n// module id = 17\n// module chunks = 0","function sineOut(t) {\n  return Math.sin(t * Math.PI/2)\n}\n\nmodule.exports = sineOut\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/eases/sine-out.js\n// module id = 18\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 19\n// module chunks = 0","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._81 = 1;\n  p._65 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._81 === 3) {\n            val = val._65;\n          }\n          if (val._81 === 1) return res(i, val._65);\n          if (val._81 === 2) reject(val._65);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/es6-extensions.js\n// module id = 20\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core');\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._10 = null;\n  Promise._97 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._10 = function (promise) {\n    if (\n      promise._81 === 2 && // IS REJECTED\n      rejections[promise._72]\n    ) {\n      if (rejections[promise._72].logged) {\n        onHandled(promise._72);\n      } else {\n        clearTimeout(rejections[promise._72].timeout);\n      }\n      delete rejections[promise._72];\n    }\n  };\n  Promise._97 = function (promise, err) {\n    if (promise._45 === 0) { // not yet handled\n      promise._72 = id++;\n      rejections[promise._72] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._72),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/rejection-tracking.js\n// module id = 21\n// module chunks = 0","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/~/asap/browser-raw.js\n// module id = 22\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 23\n// module chunks = 0","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 24\n// module chunks = 0"],"sourceRoot":""}