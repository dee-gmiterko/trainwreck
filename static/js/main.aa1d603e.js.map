{"version":3,"sources":["webpack:///static/js/main.aa1d603e.js","webpack:///webpack/bootstrap e57b228e2d9871498b9b","webpack:///./src/world/Train.js","webpack:///./src/world/World.js","webpack:///./~/promise/lib/core.js","webpack:///./config/polyfills.js","webpack:///./src/App.js","webpack:///./src/common/KeyListener.js","webpack:///./src/common/Stages.js","webpack:///./src/index.js","webpack:///./src/stages/Menu.js","webpack:///./src/stages/Play.js","webpack:///./src/world/RailPiece.js","webpack:///./src/world/SwitchCursor.js","webpack:///./~/object-assign/index.js","webpack:///./~/promise/lib/es6-extensions.js","webpack:///./~/promise/lib/rejection-tracking.js","webpack:///./~/promise/~/asap/browser-raw.js","webpack:///./~/whatwg-fetch/fetch.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_World","_World2","Train","_PIXI$Container","world","x","y","direction","this","_this","getPrototypeOf","speed","INITIAL_SPEED","isCrashed","addCart","locomotive","children","PIECE_WIDTH","PIECE_HEIGHT","path","getPath","_this2","pieceX","Math","floor","pieceY","getY","y1","y2","is","NaN","t","getAngle","CART_WIDTH2","atan","CART_WIDTH","rotation","rails","isCart","updateRailPiece","dx","dy","l","CART_DELAY","sqrt","skew","abs","CART_MAX_SKEW","sign","CART_HEIGHT2","min","random","cos","sin","max","cartContainer","PIXI","Sprite","cartBottom","Graphics","width","height","CART_HEIGHT","beginFill","drawRect","addChild","cartTop","removeChild","from","undefined","Container","LEFT","RIGHT","SPEED_CHANGE_STEP","_RailPiece","_RailPiece2","_Train","_Train2","World","initGenarator","push","0","displayed","to","railA","indexA","railB","indexB","addTo","addFrom","half","railsBefore","keys","forEach","railIndex","parseInt","usableGenerators","railGenerators","filter","railGenerator","canUse","use","railPiece","generateNext","display","_this3","addRailType","callback","rarity","connectRails","railsCount","removeFrom","removeTo","isEmpty","railSprite","displayRailPiece","clear","h","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","toRailIndex","lineStyle","moveTo","PIECE_WIDTH2","PIECE_HEIGHT2","lineTo","endFill","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","fromRailIndex","railsOffset","getTo","getFrom","noop","getThen","then","ex","LAST_ERROR","IS_ERROR","tryCallOne","fn","a","tryCallTwo","b","Promise","_45","_81","_65","_54","doResolve","safeThen","onFulfilled","onRejected","resolve","reject","res","handle","Handler","deferred","_10","handleResolved","asap","cb","promise","ret","newValue","finale","bind","_97","reason","_61","enable","window","assign","_Stages","_Stages2","_Menu","_Menu2","_Play","_Play2","App","settings","stages","addStage","changeStage","setup","renderer","autoDetectRenderer","document","body","appendChild","view","gameLoop","requestAnimationFrame","beforeRender","render","current","loader","add","load","KeyListener","keyCode","press","release","code","isDown","isUp","downHandler","event","preventDefault","upHandler","addEventListener","removeEventListener","Stages","list","nextTick","name","stage","Error","unload","Date","now","tick","_App","_App2","app","start","StageMenu","_SwitchCursor","_SwitchCursor2","_KeyListener","_KeyListener2","StagePlay","cameraPosPercentage","train","switchCursor","cartsText","Text","TextStyle","fontSize","fill","crashedText","anchor","visible","keyUp","keyDown","keyLeft","keyRight","keySpace","oldTo","clamp","recalculatePath","displayPath","move","recalculatePosition","camPos","restart","text","getCartCount","close","RailPiece","isSwitch","switched","sort","onRailAdded","indexOf","preferedDirection","switchTo","switchFrom","SwitchCursor","cursorX","cursorY","trainX","newCursorX","console","log","cursor","SIZE","WIDTH","drawEllipse","oldFrom","switchPrefered","toObject","val","shouldUseNative","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","map","n","join","test3","split","letter","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","source","symbols","s","arguments","valuePromise","TRUE","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","all","arr","args","Array","slice","remaining","race","values","disable","enabled","options","onUnhandled","allRejections","matchWhitelist","rejections","error","whitelist","DEFAULT_WHITELIST","displayId","logged","logError","onHandled","warn","_72","clearTimeout","timeout","setTimeout","errStr","stack","line","some","cls","RangeError","global","rawAsap","task","queue","requestFlush","flushing","flush","index","currentIndex","capacity","scan","newLength","makeRequestCallFromMutationObserver","toggle","observer","BrowserMutationObserver","node","createTextNode","observe","characterData","data","makeRequestCallFromTimer","handleTimer","timeoutHandle","clearInterval","intervalHandle","setInterval","scope","MutationObserver","WebKitMutationObserver","normalizeName","test","toLowerCase","normalizeValue","iteratorFor","items","shift","support","iterable","Headers","headers","append","consumed","bodyUsed","fileReaderReady","reader","onload","result","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","Uint8Array","chars","bufferClone","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","toString","arrayBuffer","isDataView","_bodyArrayBuffer","ArrayBuffer","isArrayBufferView","get","type","rejected","decode","json","JSON","parse","normalizeMethod","method","upcased","toUpperCase","methods","Request","input","url","credentials","mode","referrer","form","trim","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","parts","Response","bodyInit","status","ok","statusText","fetch","e","viewClasses","DataView","isView","oldValue","has","thisArg","entries","clone","response","redirectStatuses","redirect","location","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill"],"mappings":"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","file":"static/js/main.aa1d603e.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/trainwreck/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(4);\n\tmodule.exports = __webpack_require__(8);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _World = __webpack_require__(2);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Train = function (_PIXI$Container) {\n\t\t_inherits(Train, _PIXI$Container);\n\t\n\t\tfunction Train(world, x, y, direction) {\n\t\t\t_classCallCheck(this, Train);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (Train.__proto__ || Object.getPrototypeOf(Train)).call(this));\n\t\n\t\t\t_this.world = world;\n\t\t\t_this.direction = direction;\n\t\t\t_this.speed = Train.INITIAL_SPEED;\n\t\t\t_this.isCrashed = false;\n\t\n\t\t\t_this.addCart();\n\t\n\t\t\t_this.locomotive = _this.children[0];\n\t\t\t_this.locomotive.x = x * _World2.default.PIECE_WIDTH;\n\t\t\t_this.locomotive.y = y * _World2.default.PIECE_HEIGHT;\n\t\n\t\t\t_this.path = _this.world.getPath(0, 0, _this.direction);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(Train, [{\n\t\t\tkey: 'move',\n\t\t\tvalue: function move() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar pieceX = Math.floor(this.locomotive.x / _World2.default.PIECE_WIDTH);\n\t\n\t\t\t\tif (!this.isCrashed && pieceX < this.path.length - 1) {\n\t\t\t\t\tvar pieceY = this.path[pieceX];\n\t\n\t\t\t\t\tvar getY = function getY(x) {\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar y1 = _World2.default.PIECE_HEIGHT * _this2.path[Math.floor(x / _World2.default.PIECE_WIDTH)];\n\t\t\t\t\t\tvar y2 = _World2.default.PIECE_HEIGHT * _this2.path[Math.floor(x / _World2.default.PIECE_WIDTH) + 1];\n\t\t\t\t\t\tif (Object.is(y2, NaN)) {\n\t\t\t\t\t\t\ty2 = y1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar t = x % _World2.default.PIECE_WIDTH / _World2.default.PIECE_WIDTH;\n\t\t\t\t\t\treturn y1 + t * (y2 - y1);\n\t\t\t\t\t};\n\t\t\t\t\tvar getAngle = function getAngle(x) {\n\t\t\t\t\t\tif (x < 0) {\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar y1 = getY(x - Train.CART_WIDTH2);\n\t\t\t\t\t\tvar y2 = getY(x + Train.CART_WIDTH2);\n\t\t\t\t\t\treturn Math.atan((y2 - y1) / Train.CART_WIDTH);\n\t\t\t\t\t};\n\t\n\t\t\t\t\t//move locomotive\n\t\t\t\t\tthis.locomotive.x += this.direction * this.speed;\n\t\t\t\t\tthis.locomotive.y = getY(this.locomotive.x);\n\t\t\t\t\tthis.locomotive.rotation = getAngle(this.locomotive.x);\n\t\n\t\t\t\t\t//check for cart on rail\n\t\t\t\t\tif (this.world.rails[pieceX][pieceY].isCart) {\n\t\t\t\t\t\tthis.addCart();\n\t\t\t\t\t\tthis.world.rails[pieceX][pieceY].isCart = false;\n\t\t\t\t\t\tthis.world.updateRailPiece(pieceX, pieceY);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//move other carts\n\t\t\t\t\tfor (var i = 1; i < this.children.length; i++) {\n\t\t\t\t\t\tvar dx = this.children[i].x - this.children[i - 1].x;\n\t\t\t\t\t\tvar dy = this.children[i].y - this.children[i - 1].y;\n\t\t\t\t\t\tvar l = Train.CART_DELAY / Math.sqrt(dx * dx + dy * dy);\n\t\t\t\t\t\tdx *= l;\n\t\t\t\t\t\tdy *= l;\n\t\t\t\t\t\tthis.children[i].x = this.children[i - 1].x + dx;\n\t\t\t\t\t\tthis.children[i].y = this.children[i - 1].y + dy;\n\t\t\t\t\t\tthis.children[i].rotation = getAngle(this.children[i].x);\n\t\n\t\t\t\t\t\tvar skew = this.children[i].y - getY(this.children[i].x);\n\t\n\t\t\t\t\t\tif (Math.abs(skew) > Train.CART_MAX_SKEW) {\n\t\t\t\t\t\t\tthis.children[i].y = getY(this.children[i].x) + Math.sign(skew) * Train.CART_MAX_SKEW;\n\t\t\t\t\t\t\tskew = Math.sign(skew) * Train.CART_MAX_SKEW;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tthis.children[i].children[0].y = -Train.CART_HEIGHT2 - skew;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.isCrashed = true;\n\t\n\t\t\t\t\t//move locomotive\n\t\t\t\t\tthis.speed *= 0.92;\n\t\t\t\t\tthis.locomotive.rotation += Math.min(3, this.speed) * (Math.random() - 0.5) * 0.2;\n\t\t\t\t\tthis.locomotive.x += this.speed * Math.cos(this.locomotive.rotation);\n\t\t\t\t\tthis.locomotive.y += this.speed * Math.sin(this.locomotive.rotation);\n\t\n\t\t\t\t\t//move other carts\n\t\t\t\t\tfor (var _i = 1; _i < this.children.length; _i++) {\n\t\t\t\t\t\tvar _dx = this.children[_i].x - this.children[_i - 1].x;\n\t\t\t\t\t\tvar _dy = this.children[_i].y - this.children[_i - 1].y;\n\t\t\t\t\t\tvar _l = Train.CART_DELAY / Math.sqrt(_dx * _dx + _dy * _dy);\n\t\t\t\t\t\t_dx *= _l;\n\t\t\t\t\t\t_dy *= _l;\n\t\t\t\t\t\tthis.children[_i].x = this.children[_i - 1].x + _dx;\n\t\t\t\t\t\tthis.children[_i].y = this.children[_i - 1].y + _dy;\n\t\t\t\t\t\tthis.children[_i].rotation = Math.min(Math.max(Math.atan(_dy / _dx), -1), 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addCart',\n\t\t\tvalue: function addCart() {\n\t\t\t\tvar cartContainer = new PIXI.Sprite();\n\t\n\t\t\t\tvar cartBottom = new PIXI.Graphics();\n\t\t\t\tcartBottom.width = Train.CART_WIDTH;\n\t\t\t\tcartBottom.height = Train.CART_HEIGHT;\n\t\t\t\tcartBottom.beginFill(0x999900);\n\t\t\t\tcartBottom.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\n\t\n\t\t\t\tcartBottom.x = -Train.CART_WIDTH2;\n\t\t\t\tcartBottom.y = -Train.CART_HEIGHT2;\n\t\n\t\t\t\tcartContainer.addChild(cartBottom);\n\t\n\t\t\t\tvar cartTop = new PIXI.Graphics();\n\t\t\t\tcartTop.width = Train.CART_WIDTH;\n\t\t\t\tcartTop.height = Train.CART_HEIGHT;\n\t\t\t\tcartTop.beginFill(0xFFFF00);\n\t\t\t\tcartTop.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\n\t\n\t\t\t\tcartTop.x = -Train.CART_WIDTH2;\n\t\t\t\tcartTop.y = -Train.CART_HEIGHT2;\n\t\n\t\t\t\tcartContainer.addChild(cartTop);\n\t\n\t\t\t\tcartContainer.x = -9999999;\n\t\t\t\tcartContainer.y = 0;\n\t\n\t\t\t\tthis.addChild(cartContainer);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'removeCart',\n\t\t\tvalue: function removeCart() {\n\t\t\t\tthis.removeChild(this.children[this.children.length - 1]);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'recalculatePath',\n\t\t\tvalue: function recalculatePath(from) {\n\t\t\t\tif (from === undefined) {\n\t\t\t\t\tfrom = Math.floor(this.children[0].x / _World2.default.PIECE_WIDTH);\n\t\t\t\t}\n\t\t\t\tthis.world.getPath(from, this.path[from], this.direction, this.path);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getCartCount',\n\t\t\tvalue: function getCartCount() {\n\t\t\t\treturn this.children.length;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Train;\n\t}(PIXI.Container);\n\t\n\texports.default = Train;\n\t\n\t\n\tTrain.LEFT = -1;\n\tTrain.RIGHT = 1;\n\t\n\tTrain.CART_WIDTH = 30;\n\tTrain.CART_HEIGHT = 10;\n\tTrain.CART_WIDTH2 = Train.CART_WIDTH / 2;\n\tTrain.CART_HEIGHT2 = Train.CART_HEIGHT / 2;\n\tTrain.CART_DELAY = 32;\n\tTrain.CART_MAX_SKEW = Train.CART_HEIGHT / 3;\n\tTrain.INITIAL_SPEED = 0.4;\n\tTrain.SPEED_CHANGE_STEP = 0.03;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _RailPiece = __webpack_require__(11);\n\t\n\tvar _RailPiece2 = _interopRequireDefault(_RailPiece);\n\t\n\tvar _Train = __webpack_require__(1);\n\t\n\tvar _Train2 = _interopRequireDefault(_Train);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar World = function (_PIXI$Container) {\n\t\t_inherits(World, _PIXI$Container);\n\t\n\t\tfunction World() {\n\t\t\t_classCallCheck(this, World);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (World.__proto__ || Object.getPrototypeOf(World)).call(this));\n\t\n\t\t\t_this.rails = [];\n\t\n\t\t\t_this.initGenarator();\n\t\n\t\t\t//init\n\t\t\t_this.rails.push({ 0: new _RailPiece2.default() });\n\t\n\t\t\t_this.displayed = {\n\t\t\t\tfrom: 0,\n\t\t\t\tto: 0\n\t\t\t};\n\t\n\t\t\t// this.clamp(0, 60);\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(World, [{\n\t\t\tkey: 'connectRails',\n\t\t\tvalue: function connectRails(railA, indexA, railB, indexB) {\n\t\t\t\trailA.addTo(indexB);\n\t\t\t\trailB.addFrom(indexA);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'generateNext',\n\t\t\tvalue: function generateNext(width) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar half = Math.floor(width / 2);\n\t\n\t\t\t\tvar rails = {};\n\t\t\t\tfor (var i = -half; i <= half; i++) {\n\t\t\t\t\trails[i] = new _RailPiece2.default();\n\t\t\t\t}\n\t\t\t\tthis.rails.push(rails);\n\t\n\t\t\t\t//rails\n\t\t\t\tvar railsBefore = this.rails[this.rails.length - 2];\n\t\t\t\tObject.keys(railsBefore).forEach(function (railIndex) {\n\t\t\t\t\trailIndex = parseInt(railIndex, 10);\n\t\n\t\t\t\t\tvar usableGenerators = _this2.railGenerators.filter(function (railGenerator) {\n\t\t\t\t\t\treturn railGenerator.canUse(railsBefore, rails, railIndex);\n\t\t\t\t\t});\n\t\n\t\t\t\t\tif (usableGenerators.length > 0) {\n\t\t\t\t\t\tvar railGenerator = usableGenerators[Math.floor(Math.random() * usableGenerators.length)];\n\t\t\t\t\t\trailGenerator.use(railsBefore, rails, railIndex);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\t//carts\n\t\t\t\tObject.keys(rails).forEach(function (railIndex) {\n\t\t\t\t\trailIndex = parseInt(railIndex, 10);\n\t\t\t\t\tvar railPiece = rails[railIndex];\n\t\n\t\t\t\t\tif (Math.random() < 0.05) {\n\t\t\t\t\t\trailPiece.isCart = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clamp',\n\t\t\tvalue: function clamp(from, to) {\n\t\t\t\tfor (var i = this.displayed.to; i < to; i++) {\n\t\t\t\t\tthis.generateNext(Math.min(7, 2 * Math.floor(Math.abs(Math.sin(i / 10)) * i / 7) + 1));\n\t\t\t\t}\n\t\t\t\tthis.display(from, to);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initGenarator',\n\t\t\tvalue: function initGenarator() {\n\t\t\t\tvar _this3 = this;\n\t\n\t\t\t\tthis.railGenerators = [];\n\t\n\t\t\t\tvar addRailType = function addRailType(callback, rarity) {\n\t\t\t\t\tfor (var i = 0; i < rarity; i++) {\n\t\t\t\t\t\t_this3.railGenerators.push(callback);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\t//straight\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex] !== undefined;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}, 6);\n\t\n\t\t\t\t//up\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex + 1] !== undefined;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\n\t\t\t\t\t}\n\t\t\t\t}, 2);\n\t\n\t\t\t\t//down\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex - 1] !== undefined;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\n\t\t\t\t\t}\n\t\t\t\t}, 2);\n\t\n\t\t\t\t//split up\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex] !== undefined && rails[railIndex + 1] !== undefined\n\t\t\t\t\t\t//max one switch\n\t\t\t\t\t\t&& rails[railIndex + 1].railsCount() <= 2 && rails[railIndex].railsCount() <= 2 && railsBefore[railIndex].railsCount() <= 2;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\n\t\t\t\t//split down\n\t\t\t\taddRailType({\n\t\t\t\t\tcanUse: function canUse(railsBefore, rails, railIndex) {\n\t\t\t\t\t\treturn rails[railIndex] !== undefined && rails[railIndex - 1] !== undefined\n\t\t\t\t\t\t//max one switch\n\t\t\t\t\t\t&& rails[railIndex - 1].railsCount() <= 2 && rails[railIndex].railsCount() <= 2 && railsBefore[railIndex].railsCount() <= 2;\n\t\t\t\t\t},\n\t\t\t\t\tuse: function use(railsBefore, rails, railIndex) {\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\n\t\t\t\t\t\t_this3.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\n\t\t\t\t/*\r\n\t   \t\t//backsplit up\r\n\t   \t\taddRailType({\r\n\t   \t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\t\treturn rails[railIndex] !== undefined\r\n\t   \t\t\t\t\t&& railsBefore[railIndex + 1] !== undefined\r\n\t   \t\t\t\t\t//max one switch\r\n\t   \t\t\t\t\t&& railsBefore[railIndex + 1].railsCount() <= 2\r\n\t   \t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t   \t\t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t   \t\t\t},\r\n\t   \t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\t\tthis.connectRails(railsBefore[railIndex + 1], railIndex + 1, rails[railIndex], railIndex);\r\n\t   \t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t   \t\t\t}\r\n\t   \t\t}, 1);\r\n\t   \r\n\t   \t\t//backsplit down\r\n\t   \t\taddRailType({\r\n\t   \t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\t\treturn rails[railIndex] !== undefined\r\n\t   \t\t\t\t\t&& railsBefore[railIndex - 1] !== undefined\r\n\t   \t\t\t\t\t//max one switch\r\n\t   \t\t\t\t\t&& railsBefore[railIndex - 1].railsCount() <= 2\r\n\t   \t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t   \t\t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t   \t\t\t},\r\n\t   \t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t   \t\t\t\tthis.connectRails(railsBefore[railIndex - 1], railIndex - 1, rails[railIndex], railIndex);\r\n\t   \t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t   \t\t\t}\r\n\t   \t\t}, 1);\r\n\t   */\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'display',\n\t\t\tvalue: function display(from, to) {\n\t\t\t\tif (from === undefined) {\n\t\t\t\t\tfrom = 0;\n\t\t\t\t}\n\t\t\t\tif (to === undefined) {\n\t\t\t\t\tto = this.rails.length;\n\t\t\t\t}\n\t\n\t\t\t\t//remove before from\n\t\t\t\tvar removeFrom = World.PIECE_WIDTH * this.displayed.from;\n\t\t\t\tvar removeTo = World.PIECE_WIDTH * from;\n\t\t\t\tfor (var i = this.children.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (this.children[i].x >= removeFrom || this.children[i].x < removeTo) {\n\t\t\t\t\t\tthis.removeChild(this.children[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t//add rails\n\t\t\t\tfor (i = this.displayed.to; i < to; i++) {\n\t\t\t\t\tvar rails = this.rails[i];\n\t\t\t\t\tfor (var railIndex in rails) {\n\t\t\t\t\t\tvar railPiece = rails[railIndex];\n\t\n\t\t\t\t\t\tif (!railPiece.isEmpty) {\n\t\t\t\t\t\t\tvar railSprite = new PIXI.Graphics();\n\t\n\t\t\t\t\t\t\trailSprite.x = i * World.PIECE_WIDTH;\n\t\t\t\t\t\t\trailSprite.y = railIndex * World.PIECE_HEIGHT;\n\t\t\t\t\t\t\trailSprite.width = World.PIECE_WIDTH;\n\t\t\t\t\t\t\trailSprite.height = World.PIECE_HEIGHT;\n\t\n\t\t\t\t\t\t\tthis.displayRailPiece(railSprite, railPiece, railIndex);\n\t\n\t\t\t\t\t\t\tthis.addChild(railSprite);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tthis.displayed.from = from;\n\t\t\t\tthis.displayed.to = to;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'displayRailPiece',\n\t\t\tvalue: function displayRailPiece(railSprite, railPiece, railIndex) {\n\t\t\t\trailSprite.clear();\n\t\n\t\t\t\tvar h;\n\t\n\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\tvar _didIteratorError = false;\n\t\t\t\tvar _iteratorError = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator = railPiece.to[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tvar toRailIndex = _step.value;\n\t\n\t\t\t\t\t\th = toRailIndex - railIndex;\n\t\t\t\t\t\trailSprite.lineStyle(5, 0xffffff, 0.5);\n\t\t\t\t\t\trailSprite.moveTo(World.PIECE_WIDTH2, World.PIECE_HEIGHT2);\n\t\t\t\t\t\trailSprite.lineTo(World.PIECE_WIDTH, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2);\n\t\t\t\t\t\trailSprite.endFill();\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\tvar _iteratorError2 = undefined;\n\t\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator2 = railPiece.from[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\tvar fromRailIndex = _step2.value;\n\t\n\t\t\t\t\t\th = fromRailIndex - railIndex;\n\t\t\t\t\t\trailSprite.lineStyle(5, 0xffffff, 0.5);\n\t\t\t\t\t\trailSprite.moveTo(World.PIECE_WIDTH2, World.PIECE_HEIGHT2);\n\t\t\t\t\t\trailSprite.lineTo(0, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2);\n\t\t\t\t\t\trailSprite.endFill();\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (railPiece.isCart) {\n\t\t\t\t\trailSprite.beginFill(0xFFFF00);\n\t\t\t\t\trailSprite.lineStyle();\n\t\t\t\t\trailSprite.drawRect(World.PIECE_WIDTH2 - _Train2.default.CART_WIDTH2, World.PIECE_HEIGHT2 - _Train2.default.CART_HEIGHT2, _Train2.default.CART_WIDTH, _Train2.default.CART_HEIGHT);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'updateRailPiece',\n\t\t\tvalue: function updateRailPiece(railsOffset, railIndex) {\n\t\t\t\tvar x = railsOffset * World.PIECE_WIDTH;\n\t\t\t\tvar y = railIndex * World.PIECE_HEIGHT;\n\t\t\t\tfor (var i = 0; i < this.children.length; i++) {\n\t\t\t\t\tif (this.children[i].x == x && this.children[i].y == y) {\n\t\t\t\t\t\tthis.displayRailPiece(this.children[i], this.rails[railsOffset][railIndex], railIndex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getPath',\n\t\t\tvalue: function getPath(railsOffset, railIndex, direction, path) {\n\t\t\t\tif (!path) {\n\t\t\t\t\tpath = [];\n\t\t\t\t}\n\t\t\t\tpath[railsOffset] = railIndex;\n\t\t\t\twhile (railsOffset < this.rails.length) {\n\t\t\t\t\tvar railPiece = this.rails[railsOffset][railIndex];\n\t\t\t\t\tvar next = direction === 1 ? railPiece.getTo() : railPiece.getFrom();\n\t\n\t\t\t\t\tif (next === undefined) {\n\t\t\t\t\t\tbreak; //EOW\n\t\t\t\t\t}\n\t\n\t\t\t\t\trailsOffset += direction;\n\t\n\t\t\t\t\tif (path[railsOffset] === next) {\n\t\t\t\t\t\tbreak; //already same path\n\t\t\t\t\t}\n\t\n\t\t\t\t\tpath[railsOffset] = next;\n\t\t\t\t\trailIndex = next;\n\t\t\t\t}\n\t\t\t\treturn path;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn World;\n\t}(PIXI.Container);\n\t\n\texports.default = World;\n\t\n\t\n\tWorld.PIECE_WIDTH = 50;\n\tWorld.PIECE_HEIGHT = 20;\n\tWorld.PIECE_WIDTH2 = World.PIECE_WIDTH / 2;\n\tWorld.PIECE_HEIGHT2 = World.PIECE_HEIGHT / 2;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar asap = __webpack_require__(16);\n\t\n\tfunction noop() {}\n\t\n\t// States:\n\t//\n\t// 0 - pending\n\t// 1 - fulfilled with _value\n\t// 2 - rejected with _value\n\t// 3 - adopted the state of another promise, _value\n\t//\n\t// once the state is no longer pending (0) it is immutable\n\t\n\t// All `_` prefixed properties will be reduced to `_{random number}`\n\t// at build time to obfuscate them and discourage their use.\n\t// We don't use symbols or Object.defineProperty to fully hide them\n\t// because the performance isn't good enough.\n\t\n\t\n\t// to avoid using try/catch inside critical functions, we\n\t// extract them to here.\n\tvar LAST_ERROR = null;\n\tvar IS_ERROR = {};\n\tfunction getThen(obj) {\n\t  try {\n\t    return obj.then;\n\t  } catch (ex) {\n\t    LAST_ERROR = ex;\n\t    return IS_ERROR;\n\t  }\n\t}\n\t\n\tfunction tryCallOne(fn, a) {\n\t  try {\n\t    return fn(a);\n\t  } catch (ex) {\n\t    LAST_ERROR = ex;\n\t    return IS_ERROR;\n\t  }\n\t}\n\tfunction tryCallTwo(fn, a, b) {\n\t  try {\n\t    fn(a, b);\n\t  } catch (ex) {\n\t    LAST_ERROR = ex;\n\t    return IS_ERROR;\n\t  }\n\t}\n\t\n\tmodule.exports = Promise;\n\t\n\tfunction Promise(fn) {\n\t  if (typeof this !== 'object') {\n\t    throw new TypeError('Promises must be constructed via new');\n\t  }\n\t  if (typeof fn !== 'function') {\n\t    throw new TypeError('not a function');\n\t  }\n\t  this._45 = 0;\n\t  this._81 = 0;\n\t  this._65 = null;\n\t  this._54 = null;\n\t  if (fn === noop) return;\n\t  doResolve(fn, this);\n\t}\n\tPromise._10 = null;\n\tPromise._97 = null;\n\tPromise._61 = noop;\n\t\n\tPromise.prototype.then = function(onFulfilled, onRejected) {\n\t  if (this.constructor !== Promise) {\n\t    return safeThen(this, onFulfilled, onRejected);\n\t  }\n\t  var res = new Promise(noop);\n\t  handle(this, new Handler(onFulfilled, onRejected, res));\n\t  return res;\n\t};\n\t\n\tfunction safeThen(self, onFulfilled, onRejected) {\n\t  return new self.constructor(function (resolve, reject) {\n\t    var res = new Promise(noop);\n\t    res.then(resolve, reject);\n\t    handle(self, new Handler(onFulfilled, onRejected, res));\n\t  });\n\t};\n\tfunction handle(self, deferred) {\n\t  while (self._81 === 3) {\n\t    self = self._65;\n\t  }\n\t  if (Promise._10) {\n\t    Promise._10(self);\n\t  }\n\t  if (self._81 === 0) {\n\t    if (self._45 === 0) {\n\t      self._45 = 1;\n\t      self._54 = deferred;\n\t      return;\n\t    }\n\t    if (self._45 === 1) {\n\t      self._45 = 2;\n\t      self._54 = [self._54, deferred];\n\t      return;\n\t    }\n\t    self._54.push(deferred);\n\t    return;\n\t  }\n\t  handleResolved(self, deferred);\n\t}\n\t\n\tfunction handleResolved(self, deferred) {\n\t  asap(function() {\n\t    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n\t    if (cb === null) {\n\t      if (self._81 === 1) {\n\t        resolve(deferred.promise, self._65);\n\t      } else {\n\t        reject(deferred.promise, self._65);\n\t      }\n\t      return;\n\t    }\n\t    var ret = tryCallOne(cb, self._65);\n\t    if (ret === IS_ERROR) {\n\t      reject(deferred.promise, LAST_ERROR);\n\t    } else {\n\t      resolve(deferred.promise, ret);\n\t    }\n\t  });\n\t}\n\tfunction resolve(self, newValue) {\n\t  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n\t  if (newValue === self) {\n\t    return reject(\n\t      self,\n\t      new TypeError('A promise cannot be resolved with itself.')\n\t    );\n\t  }\n\t  if (\n\t    newValue &&\n\t    (typeof newValue === 'object' || typeof newValue === 'function')\n\t  ) {\n\t    var then = getThen(newValue);\n\t    if (then === IS_ERROR) {\n\t      return reject(self, LAST_ERROR);\n\t    }\n\t    if (\n\t      then === self.then &&\n\t      newValue instanceof Promise\n\t    ) {\n\t      self._81 = 3;\n\t      self._65 = newValue;\n\t      finale(self);\n\t      return;\n\t    } else if (typeof then === 'function') {\n\t      doResolve(then.bind(newValue), self);\n\t      return;\n\t    }\n\t  }\n\t  self._81 = 1;\n\t  self._65 = newValue;\n\t  finale(self);\n\t}\n\t\n\tfunction reject(self, newValue) {\n\t  self._81 = 2;\n\t  self._65 = newValue;\n\t  if (Promise._97) {\n\t    Promise._97(self, newValue);\n\t  }\n\t  finale(self);\n\t}\n\tfunction finale(self) {\n\t  if (self._45 === 1) {\n\t    handle(self, self._54);\n\t    self._54 = null;\n\t  }\n\t  if (self._45 === 2) {\n\t    for (var i = 0; i < self._54.length; i++) {\n\t      handle(self, self._54[i]);\n\t    }\n\t    self._54 = null;\n\t  }\n\t}\n\t\n\tfunction Handler(onFulfilled, onRejected, promise){\n\t  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n\t  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n\t  this.promise = promise;\n\t}\n\t\n\t/**\n\t * Take a potentially misbehaving resolver function and make sure\n\t * onFulfilled and onRejected are only called once.\n\t *\n\t * Makes no guarantees about asynchrony.\n\t */\n\tfunction doResolve(fn, promise) {\n\t  var done = false;\n\t  var res = tryCallTwo(fn, function (value) {\n\t    if (done) return;\n\t    done = true;\n\t    resolve(promise, value);\n\t  }, function (reason) {\n\t    if (done) return;\n\t    done = true;\n\t    reject(promise, reason);\n\t  })\n\t  if (!done && res === IS_ERROR) {\n\t    done = true;\n\t    reject(promise, LAST_ERROR);\n\t  }\n\t}\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tif (typeof Promise === 'undefined') {\n\t  // Rejection tracking prevents a common issue where React gets into an\n\t  // inconsistent state due to an error, but it gets swallowed by a Promise,\n\t  // and the user has no idea what causes React's erratic future behavior.\n\t  __webpack_require__(15).enable();\n\t  window.Promise = __webpack_require__(14);\n\t}\n\t\n\t// fetch() polyfill for making API calls.\n\t__webpack_require__(17);\n\t\n\t// Object.assign() is commonly used with React.\n\t// It will use the native implementation if it's present and isn't buggy.\n\tObject.assign = __webpack_require__(13);\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Stages = __webpack_require__(7);\n\t\n\tvar _Stages2 = _interopRequireDefault(_Stages);\n\t\n\tvar _Menu = __webpack_require__(9);\n\t\n\tvar _Menu2 = _interopRequireDefault(_Menu);\n\t\n\tvar _Play = __webpack_require__(10);\n\t\n\tvar _Play2 = _interopRequireDefault(_Play);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar App = function () {\n\t\tfunction App(settings) {\n\t\t\t_classCallCheck(this, App);\n\t\n\t\t\tthis.settings = settings;\n\t\t\tthis.stages = new _Stages2.default();\n\t\n\t\t\tthis.stages.addStage(\"menu\", new _Menu2.default(this.stages, settings));\n\t\t\tthis.stages.addStage(\"play\", new _Play2.default(this.stages, settings));\n\t\t\tthis.stages.changeStage(\"play\");\n\t\t}\n\t\n\t\t_createClass(App, [{\n\t\t\tkey: 'start',\n\t\t\tvalue: function start() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar setup = function setup() {\n\t\t\t\t\tvar renderer = PIXI.autoDetectRenderer(_this.settings.width, _this.settings.height);\n\t\t\t\t\tdocument.body.appendChild(renderer.view);\n\t\n\t\t\t\t\tvar gameLoop = function gameLoop() {\n\t\t\t\t\t\trequestAnimationFrame(gameLoop);\n\t\t\t\t\t\t_this.stages.beforeRender();\n\t\t\t\t\t\trenderer.render(_this.stages.current);\n\t\t\t\t\t};\n\t\t\t\t\tgameLoop();\n\t\t\t\t};\n\t\n\t\t\t\tPIXI.loader.add(\"images/anyImage.png\").load(setup);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn App;\n\t}();\n\t\n\texports.default = App;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar KeyListener = function () {\n\t\tfunction KeyListener(keyCode, press, release) {\n\t\t\tvar _this = this;\n\t\n\t\t\t_classCallCheck(this, KeyListener);\n\t\n\t\t\tthis.code = keyCode;\n\t\t\tthis.isDown = false;\n\t\t\tthis.isUp = true;\n\t\t\tthis.press = press;\n\t\t\tthis.release = release;\n\t\n\t\t\tthis.downHandler = function (event) {\n\t\t\t\tif (event.keyCode === _this.code) {\n\t\t\t\t\tif (_this.isUp && _this.press) _this.press();\n\t\t\t\t\t_this.isDown = true;\n\t\t\t\t\t_this.isUp = false;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis.upHandler = function (event) {\n\t\t\t\tif (event.keyCode === _this.code) {\n\t\t\t\t\tif (_this.isDown && _this.release) _this.release();\n\t\t\t\t\t_this.isDown = false;\n\t\t\t\t\t_this.isUp = true;\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\twindow.addEventListener(\"keydown\", this.downHandler, false);\n\t\t\twindow.addEventListener(\"keyup\", this.upHandler, false);\n\t\t}\n\t\n\t\t_createClass(KeyListener, [{\n\t\t\tkey: \"close\",\n\t\t\tvalue: function close() {\n\t\t\t\twindow.removeEventListener(\"keydown\", this.downHandler);\n\t\t\t\twindow.removeEventListener(\"keyup\", this.upHandler);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn KeyListener;\n\t}();\n\t\n\texports.default = KeyListener;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Stages = function () {\n\t\tfunction Stages() {\n\t\t\t_classCallCheck(this, Stages);\n\t\n\t\t\tthis.current = undefined;\n\t\t\tthis.list = [];\n\t\t\tthis.nextTick = 0;\n\t\t}\n\t\n\t\t_createClass(Stages, [{\n\t\t\tkey: \"addStage\",\n\t\t\tvalue: function addStage(name, stage) {\n\t\t\t\tthis.list[name] = stage;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"changeStage\",\n\t\t\tvalue: function changeStage(name) {\n\t\t\t\tif (!this.list[name]) {\n\t\t\t\t\tthrow new Error(\"Illegal stage name.\");\n\t\t\t\t}\n\t\t\t\tif (this.current !== undefined) {\n\t\t\t\t\tthis.current.unload();\n\t\t\t\t}\n\t\t\t\tthis.current = this.list[name];\n\t\t\t\tthis.current.load();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"getStage\",\n\t\t\tvalue: function getStage(name) {\n\t\t\t\treturn this.list[name];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: \"beforeRender\",\n\t\t\tvalue: function beforeRender() {\n\t\t\t\tif (this.nextTick <= Date.now()) {\n\t\t\t\t\tthis.nextTick = Date.now() + 10;\n\t\t\t\t\tthis.current.tick();\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Stages;\n\t}();\n\t\n\t/*\r\n\tStage interface:\r\n\t{\r\n\t\tload = function()\r\n\t\tunload = function()\r\n\t\ttick = function()\r\n\t}\r\n\t*/\n\t\n\t\n\texports.default = Stages;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _App = __webpack_require__(5);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar settings = {\n\t\twidth: 960,\n\t\theight: 144\n\t};\n\t\n\twindow.app = new _App2.default(settings);\n\twindow.app.start();\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar StageMenu = function (_PIXI$Container) {\n\t\t_inherits(StageMenu, _PIXI$Container);\n\t\n\t\tfunction StageMenu(stages, settings) {\n\t\t\t_classCallCheck(this, StageMenu);\n\t\n\t\t\treturn _possibleConstructorReturn(this, (StageMenu.__proto__ || Object.getPrototypeOf(StageMenu)).call(this));\n\t\t}\n\t\n\t\t_createClass(StageMenu, [{\n\t\t\tkey: \"load\",\n\t\t\tvalue: function load() {}\n\t\t}, {\n\t\t\tkey: \"tick\",\n\t\t\tvalue: function tick() {}\n\t\t}, {\n\t\t\tkey: \"unload\",\n\t\t\tvalue: function unload() {}\n\t\t}]);\n\t\n\t\treturn StageMenu;\n\t}(PIXI.Container);\n\t\n\texports.default = StageMenu;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _World = __webpack_require__(2);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tvar _Train = __webpack_require__(1);\n\t\n\tvar _Train2 = _interopRequireDefault(_Train);\n\t\n\tvar _SwitchCursor = __webpack_require__(12);\n\t\n\tvar _SwitchCursor2 = _interopRequireDefault(_SwitchCursor);\n\t\n\tvar _KeyListener = __webpack_require__(6);\n\t\n\tvar _KeyListener2 = _interopRequireDefault(_KeyListener);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar StagePlay = function (_PIXI$Container) {\n\t\t_inherits(StagePlay, _PIXI$Container);\n\t\n\t\tfunction StagePlay(stages, settings) {\n\t\t\t_classCallCheck(this, StagePlay);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (StagePlay.__proto__ || Object.getPrototypeOf(StagePlay)).call(this));\n\t\n\t\t\t_this.stages = stages;\n\t\t\t_this.settings = settings;\n\t\t\t_this.cameraPosPercentage = 0.21;\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(StagePlay, [{\n\t\t\tkey: 'load',\n\t\t\tvalue: function load() {\n\t\t\t\tthis.world = new _World2.default();\n\t\t\t\tthis.world.y = this.settings.height / 2;\n\t\n\t\t\t\tthis.train = new _Train2.default(this.world, 0, 0, _Train2.default.RIGHT);\n\t\t\t\tthis.train.x = _World2.default.PIECE_WIDTH2;\n\t\t\t\tthis.train.y = this.settings.height / 2 + _World2.default.PIECE_HEIGHT2;\n\t\n\t\t\t\tthis.switchCursor = new _SwitchCursor2.default(this.train);\n\t\t\t\tthis.switchCursor.y = this.settings.height / 2;\n\t\n\t\t\t\tthis.cartsText = new PIXI.Text(\"0\", new PIXI.TextStyle({ fontSize: 40, fill: '#FFFFFF' }));\n\t\t\t\tthis.cartsText.x = 16;\n\t\t\t\tthis.cartsText.y = 16;\n\t\n\t\t\t\tthis.crashedText = new PIXI.Text(\"Crashed\", new PIXI.TextStyle({ fontSize: 40, fill: '#FFFFFF' }));\n\t\t\t\tthis.crashedText.x = this.settings.width / 2;\n\t\t\t\tthis.crashedText.y = this.settings.height / 2;\n\t\t\t\tthis.crashedText.anchor.x = 0.5;\n\t\t\t\tthis.crashedText.anchor.y = 0.5;\n\t\t\t\tthis.crashedText.visible = false;\n\t\n\t\t\t\tthis.addChild(this.world);\n\t\t\t\tthis.addChild(this.train);\n\t\t\t\tthis.addChild(this.switchCursor);\n\t\t\t\tthis.addChild(this.cartsText);\n\t\t\t\tthis.addChild(this.crashedText);\n\t\n\t\t\t\tthis.keyUp = new _KeyListener2.default(38);\n\t\t\t\tthis.keyDown = new _KeyListener2.default(40);\n\t\t\t\tthis.keyLeft = new _KeyListener2.default(37);\n\t\t\t\tthis.keyRight = new _KeyListener2.default(39);\n\t\t\t\tthis.keySpace = new _KeyListener2.default(32);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'tick',\n\t\t\tvalue: function tick() {\n\t\t\t\tif (this.train.locomotive.x + this.settings.width > this.world.displayed.to * _World2.default.PIECE_WIDTH) {\n\t\t\t\t\tvar from = Math.floor(this.train.locomotive.x / _World2.default.PIECE_WIDTH);\n\t\t\t\t\tvar oldTo = this.world.displayed.to;\n\t\t\t\t\tthis.world.clamp(from, from + 100);\n\t\t\t\t\tthis.train.recalculatePath(oldTo);\n\t\t\t\t\tthis.switchCursor.displayPath();\n\t\t\t\t}\n\t\n\t\t\t\tthis.train.move();\n\t\t\t\tthis.switchCursor.recalculatePosition();\n\t\n\t\t\t\t//move camera\n\t\t\t\tvar camPos = this.cameraPosPercentage * this.settings.width - this.train.locomotive.x;\n\t\t\t\tif (camPos > 0) {\n\t\t\t\t\tcamPos = 0;\n\t\t\t\t}\n\t\t\t\tcamPos -= _World2.default.PIECE_WIDTH;\n\t\t\t\tthis.world.x = camPos;\n\t\t\t\tthis.train.x = camPos + _World2.default.PIECE_WIDTH2;\n\t\t\t\tthis.switchCursor.x = camPos;\n\t\n\t\t\t\tif (!this.train.isCrashed) {\n\t\t\t\t\tif (this.keyUp.isDown) {\n\t\t\t\t\t\tthis.switchCursor.switchCursor(0);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keyDown.isDown) {\n\t\t\t\t\t\tthis.switchCursor.switchCursor(1);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keyLeft.isDown) {\n\t\t\t\t\t\tthis.train.speed -= _Train2.default.SPEED_CHANGE_STEP;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keyRight.isDown) {\n\t\t\t\t\t\tthis.train.speed += _Train2.default.SPEED_CHANGE_STEP;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.keySpace.isDown) {\n\t\t\t\t\t\tthis.restart();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tthis.cartsText.text = this.train.getCartCount();\n\t\n\t\t\t\tif (this.train.isCrashed) {\n\t\t\t\t\tthis.crashedText.visible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'restart',\n\t\t\tvalue: function restart() {\n\t\t\t\tthis.unload();\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'unload',\n\t\t\tvalue: function unload() {\n\t\t\t\tthis.removeChild(this.world);\n\t\t\t\tthis.removeChild(this.train);\n\t\t\t\tthis.removeChild(this.switchCursor);\n\t\t\t\tthis.removeChild(this.cartsText);\n\t\t\t\tthis.removeChild(this.crashedText);\n\t\n\t\t\t\tthis.keyUp.close();\n\t\t\t\tthis.keyDown.close();\n\t\t\t\tthis.keyLeft.close();\n\t\t\t\tthis.keyRight.close();\n\t\t\t\tthis.keySpace.close();\n\t\n\t\t\t\tthis.keyUp = undefined;\n\t\t\t\tthis.keyDown = undefined;\n\t\t\t\tthis.keyLeft = undefined;\n\t\t\t\tthis.keyRight = undefined;\n\t\t\t\tthis.keySpace = undefined;\n\t\n\t\t\t\tthis.world = undefined;\n\t\t\t\tthis.train = undefined;\n\t\t\t\tthis.switchCursor = undefined;\n\t\t\t\tthis.cartsText = undefined;\n\t\t\t\tthis.crashedText = undefined;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn StagePlay;\n\t}(PIXI.Container);\n\t\n\texports.default = StagePlay;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Train = __webpack_require__(1);\n\t\n\tvar _Train2 = _interopRequireDefault(_Train);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar RailPiece = function () {\n\t\tfunction RailPiece() {\n\t\t\t_classCallCheck(this, RailPiece);\n\t\n\t\t\tthis.to = [];\n\t\t\tthis.from = [];\n\t\t\tthis.isSwitch = false;\n\t\t\tthis.isEmpty = true;\n\t\t\tthis.isCart = false;\n\t\t\tthis.switched = {\n\t\t\t\tfrom: undefined,\n\t\t\t\tto: undefined\n\t\t\t};\n\t\t}\n\t\n\t\t_createClass(RailPiece, [{\n\t\t\tkey: 'addTo',\n\t\t\tvalue: function addTo(railIndex) {\n\t\t\t\tthis.to.push(railIndex);\n\t\t\t\tthis.to.sort(function (a, b) {\n\t\t\t\t\treturn a - b;\n\t\t\t\t});\n\t\t\t\tthis.onRailAdded();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addFrom',\n\t\t\tvalue: function addFrom(railIndex) {\n\t\t\t\tthis.from.push(railIndex);\n\t\t\t\tthis.from.sort(function (a, b) {\n\t\t\t\t\treturn a - b;\n\t\t\t\t});\n\t\t\t\tthis.onRailAdded();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'onRailAdded',\n\t\t\tvalue: function onRailAdded() {\n\t\t\t\tthis.isEmpty = false;\n\t\t\t\tthis.isSwitch = this.railsCount() > 2;\n\t\t\t\tif (this.isSwitch) {\n\t\t\t\t\tthis.switched = {\n\t\t\t\t\t\tfrom: Math.floor(Math.random() * this.from.length),\n\t\t\t\t\t\tto: Math.floor(Math.random() * this.to.length)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isConnectedTo',\n\t\t\tvalue: function isConnectedTo(railIndex) {\n\t\t\t\treturn this.to.indexOf(railIndex) >= 0;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getTo',\n\t\t\tvalue: function getTo() {\n\t\t\t\tif (this.isSwitch) {\n\t\t\t\t\treturn this.to[this.switched.to];\n\t\t\t\t}\n\t\t\t\tif (this.to.length > 0) {\n\t\t\t\t\treturn this.to[0];\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getFrom',\n\t\t\tvalue: function getFrom() {\n\t\t\t\tif (this.isSwitch) {\n\t\t\t\t\treturn this.from[this.switched.from];\n\t\t\t\t}\n\t\t\t\tif (this.from.length > 0) {\n\t\t\t\t\treturn this.from[0];\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchPrefered',\n\t\t\tvalue: function switchPrefered(preferedDirection, value) {\n\t\t\t\tif (preferedDirection == _Train2.default.RIGHT) {\n\t\t\t\t\tif (this.to.length >= 2) {\n\t\t\t\t\t\tthis.switchTo(value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.switchFrom(value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (this.from.length >= 2) {\n\t\t\t\t\t\tthis.switchFrom(value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.switchTo(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchTo',\n\t\t\tvalue: function switchTo(value) {\n\t\t\t\tthis.switched.to = value;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchFrom',\n\t\t\tvalue: function switchFrom(value) {\n\t\t\t\tthis.switched.from = value;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'railsCount',\n\t\t\tvalue: function railsCount() {\n\t\t\t\treturn this.from.length + this.to.length;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn RailPiece;\n\t}();\n\t\n\texports.default = RailPiece;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _World = __webpack_require__(2);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar SwitchCursor = function (_PIXI$Container) {\n\t\t_inherits(SwitchCursor, _PIXI$Container);\n\t\n\t\tfunction SwitchCursor(train) {\n\t\t\t_classCallCheck(this, SwitchCursor);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (SwitchCursor.__proto__ || Object.getPrototypeOf(SwitchCursor)).call(this));\n\t\n\t\t\t_this.train = train;\n\t\t\t_this.cursorX = 0;\n\t\t\t_this.cursorY = 0;\n\t\n\t\t\t_this.display();\n\t\t\t_this.displayPath();\n\t\n\t\t\t_this.recalculatePosition();\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(SwitchCursor, [{\n\t\t\tkey: 'recalculatePosition',\n\t\t\tvalue: function recalculatePosition() {\n\t\t\t\tvar trainX = Math.floor(this.train.locomotive.x / _World2.default.PIECE_WIDTH);\n\t\t\t\tvar trainY = this.train.path[trainX];\n\t\n\t\t\t\t// if(this.cursorX === trainX && this.cursorY === trainY) {\n\t\t\t\t//find next switch\n\t\t\t\tvar newCursorX = trainX + 1;\n\t\t\t\twhile (newCursorX < this.train.world.rails.length && newCursorX < this.train.path.length && this.train.world.rails[newCursorX][this.train.path[newCursorX]].to.length < 2) {\n\t\t\t\t\tnewCursorX++;\n\t\t\t\t}\n\t\t\t\tconsole.log(newCursorX);\n\t\t\t\tthis.cursorX = newCursorX;\n\t\t\t\tthis.cursorY = this.train.path[newCursorX];\n\t\n\t\t\t\tthis.cursor.x = this.cursorX * _World2.default.PIECE_WIDTH + _World2.default.PIECE_WIDTH2;\n\t\t\t\tthis.cursor.y = this.cursorY * _World2.default.PIECE_HEIGHT + _World2.default.PIECE_HEIGHT2;\n\t\t\t\t// }\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'display',\n\t\t\tvalue: function display() {\n\t\t\t\tvar cursor = new PIXI.Graphics();\n\t\t\t\tcursor.width = SwitchCursor.SIZE;\n\t\t\t\tcursor.height = SwitchCursor.SIZE;\n\t\n\t\t\t\tcursor.lineStyle(SwitchCursor.WIDTH, 0xff0000, 0.8);\n\t\t\t\tcursor.drawEllipse(0, 0, SwitchCursor.SIZE, SwitchCursor.SIZE);\n\t\n\t\t\t\tthis.cursor = cursor;\n\t\t\t\tthis.addChild(cursor);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'displayPath',\n\t\t\tvalue: function displayPath() {\n\t\t\t\tif (this.path) {\n\t\t\t\t\tthis.removeChild(this.path);\n\t\t\t\t}\n\t\t\t\tvar path = new PIXI.Graphics();\n\t\n\t\t\t\tpath.lineStyle(SwitchCursor.WIDTH, 0xffff00, 0.5);\n\t\t\t\tpath.moveTo(_World2.default.PIECE_WIDTH, _World2.default.PIECE_HEIGHT2);\n\t\t\t\tfor (var i = 0; i < this.train.path.length; i++) {\n\t\t\t\t\tpath.lineTo(_World2.default.PIECE_WIDTH * i + _World2.default.PIECE_WIDTH2, _World2.default.PIECE_HEIGHT * this.train.path[i] + _World2.default.PIECE_HEIGHT2);\n\t\t\t\t}\n\t\t\t\tpath.endFill();\n\t\n\t\t\t\tthis.path = path;\n\t\t\t\tthis.addChild(path);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'switchCursor',\n\t\t\tvalue: function switchCursor(value) {\n\t\t\t\tif (this.cursorX !== undefined && this.cursorY !== undefined) {\n\t\t\t\t\tvar railPiece = this.train.world.rails[this.cursorX][this.cursorY];\n\t\n\t\t\t\t\tvar oldTo = railPiece.getTo();\n\t\t\t\t\tvar oldFrom = railPiece.getFrom();\n\t\n\t\t\t\t\trailPiece.switchPrefered(this.train.direction, value);\n\t\n\t\t\t\t\tif (oldTo != railPiece.getTo() || oldFrom != railPiece.getFrom()) {\n\t\t\t\t\t\tthis.train.recalculatePath(this.cursorX);\n\t\t\t\t\t\tthis.displayPath();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn SwitchCursor;\n\t}(PIXI.Container);\n\t\n\texports.default = SwitchCursor;\n\t\n\t\n\tSwitchCursor.WIDTH = 4;\n\tSwitchCursor.SIZE = 12;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t//This file contains the ES6 extensions to the core Promises/A+ API\n\t\n\tvar Promise = __webpack_require__(3);\n\t\n\tmodule.exports = Promise;\n\t\n\t/* Static Functions */\n\t\n\tvar TRUE = valuePromise(true);\n\tvar FALSE = valuePromise(false);\n\tvar NULL = valuePromise(null);\n\tvar UNDEFINED = valuePromise(undefined);\n\tvar ZERO = valuePromise(0);\n\tvar EMPTYSTRING = valuePromise('');\n\t\n\tfunction valuePromise(value) {\n\t  var p = new Promise(Promise._61);\n\t  p._81 = 1;\n\t  p._65 = value;\n\t  return p;\n\t}\n\tPromise.resolve = function (value) {\n\t  if (value instanceof Promise) return value;\n\t\n\t  if (value === null) return NULL;\n\t  if (value === undefined) return UNDEFINED;\n\t  if (value === true) return TRUE;\n\t  if (value === false) return FALSE;\n\t  if (value === 0) return ZERO;\n\t  if (value === '') return EMPTYSTRING;\n\t\n\t  if (typeof value === 'object' || typeof value === 'function') {\n\t    try {\n\t      var then = value.then;\n\t      if (typeof then === 'function') {\n\t        return new Promise(then.bind(value));\n\t      }\n\t    } catch (ex) {\n\t      return new Promise(function (resolve, reject) {\n\t        reject(ex);\n\t      });\n\t    }\n\t  }\n\t  return valuePromise(value);\n\t};\n\t\n\tPromise.all = function (arr) {\n\t  var args = Array.prototype.slice.call(arr);\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    if (args.length === 0) return resolve([]);\n\t    var remaining = args.length;\n\t    function res(i, val) {\n\t      if (val && (typeof val === 'object' || typeof val === 'function')) {\n\t        if (val instanceof Promise && val.then === Promise.prototype.then) {\n\t          while (val._81 === 3) {\n\t            val = val._65;\n\t          }\n\t          if (val._81 === 1) return res(i, val._65);\n\t          if (val._81 === 2) reject(val._65);\n\t          val.then(function (val) {\n\t            res(i, val);\n\t          }, reject);\n\t          return;\n\t        } else {\n\t          var then = val.then;\n\t          if (typeof then === 'function') {\n\t            var p = new Promise(then.bind(val));\n\t            p.then(function (val) {\n\t              res(i, val);\n\t            }, reject);\n\t            return;\n\t          }\n\t        }\n\t      }\n\t      args[i] = val;\n\t      if (--remaining === 0) {\n\t        resolve(args);\n\t      }\n\t    }\n\t    for (var i = 0; i < args.length; i++) {\n\t      res(i, args[i]);\n\t    }\n\t  });\n\t};\n\t\n\tPromise.reject = function (value) {\n\t  return new Promise(function (resolve, reject) {\n\t    reject(value);\n\t  });\n\t};\n\t\n\tPromise.race = function (values) {\n\t  return new Promise(function (resolve, reject) {\n\t    values.forEach(function(value){\n\t      Promise.resolve(value).then(resolve, reject);\n\t    });\n\t  });\n\t};\n\t\n\t/* Prototype Methods */\n\t\n\tPromise.prototype['catch'] = function (onRejected) {\n\t  return this.then(null, onRejected);\n\t};\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Promise = __webpack_require__(3);\n\t\n\tvar DEFAULT_WHITELIST = [\n\t  ReferenceError,\n\t  TypeError,\n\t  RangeError\n\t];\n\t\n\tvar enabled = false;\n\texports.disable = disable;\n\tfunction disable() {\n\t  enabled = false;\n\t  Promise._10 = null;\n\t  Promise._97 = null;\n\t}\n\t\n\texports.enable = enable;\n\tfunction enable(options) {\n\t  options = options || {};\n\t  if (enabled) disable();\n\t  enabled = true;\n\t  var id = 0;\n\t  var displayId = 0;\n\t  var rejections = {};\n\t  Promise._10 = function (promise) {\n\t    if (\n\t      promise._81 === 2 && // IS REJECTED\n\t      rejections[promise._72]\n\t    ) {\n\t      if (rejections[promise._72].logged) {\n\t        onHandled(promise._72);\n\t      } else {\n\t        clearTimeout(rejections[promise._72].timeout);\n\t      }\n\t      delete rejections[promise._72];\n\t    }\n\t  };\n\t  Promise._97 = function (promise, err) {\n\t    if (promise._45 === 0) { // not yet handled\n\t      promise._72 = id++;\n\t      rejections[promise._72] = {\n\t        displayId: null,\n\t        error: err,\n\t        timeout: setTimeout(\n\t          onUnhandled.bind(null, promise._72),\n\t          // For reference errors and type errors, this almost always\n\t          // means the programmer made a mistake, so log them after just\n\t          // 100ms\n\t          // otherwise, wait 2 seconds to see if they get handled\n\t          matchWhitelist(err, DEFAULT_WHITELIST)\n\t            ? 100\n\t            : 2000\n\t        ),\n\t        logged: false\n\t      };\n\t    }\n\t  };\n\t  function onUnhandled(id) {\n\t    if (\n\t      options.allRejections ||\n\t      matchWhitelist(\n\t        rejections[id].error,\n\t        options.whitelist || DEFAULT_WHITELIST\n\t      )\n\t    ) {\n\t      rejections[id].displayId = displayId++;\n\t      if (options.onUnhandled) {\n\t        rejections[id].logged = true;\n\t        options.onUnhandled(\n\t          rejections[id].displayId,\n\t          rejections[id].error\n\t        );\n\t      } else {\n\t        rejections[id].logged = true;\n\t        logError(\n\t          rejections[id].displayId,\n\t          rejections[id].error\n\t        );\n\t      }\n\t    }\n\t  }\n\t  function onHandled(id) {\n\t    if (rejections[id].logged) {\n\t      if (options.onHandled) {\n\t        options.onHandled(rejections[id].displayId, rejections[id].error);\n\t      } else if (!rejections[id].onUnhandled) {\n\t        console.warn(\n\t          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n\t        );\n\t        console.warn(\n\t          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n\t          rejections[id].displayId + '.'\n\t        );\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tfunction logError(id, error) {\n\t  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n\t  var errStr = (error && (error.stack || error)) + '';\n\t  errStr.split('\\n').forEach(function (line) {\n\t    console.warn('  ' + line);\n\t  });\n\t}\n\t\n\tfunction matchWhitelist(error, list) {\n\t  return list.some(function (cls) {\n\t    return error instanceof cls;\n\t  });\n\t}\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {\"use strict\";\n\t\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tmodule.exports = rawAsap;\n\tfunction rawAsap(task) {\n\t    if (!queue.length) {\n\t        requestFlush();\n\t        flushing = true;\n\t    }\n\t    // Equivalent to push, but avoids a function call.\n\t    queue[queue.length] = task;\n\t}\n\t\n\tvar queue = [];\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\tvar flushing = false;\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tvar requestFlush;\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tvar index = 0;\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tvar capacity = 1024;\n\t\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tfunction flush() {\n\t    while (index < queue.length) {\n\t        var currentIndex = index;\n\t        // Advance the index before calling the task. This ensures that we will\n\t        // begin flushing on the next task the task throws an error.\n\t        index = index + 1;\n\t        queue[currentIndex].call();\n\t        // Prevent leaking memory for long chains of recursive calls to `asap`.\n\t        // If we call `asap` within tasks scheduled by `asap`, the queue will\n\t        // grow, but to avoid an O(n) walk for every task we execute, we don't\n\t        // shift tasks off the queue after they have been executed.\n\t        // Instead, we periodically shift 1024 tasks off the queue.\n\t        if (index > capacity) {\n\t            // Manually shift all values starting at the index back to the\n\t            // beginning of the queue.\n\t            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n\t                queue[scan] = queue[scan + index];\n\t            }\n\t            queue.length -= index;\n\t            index = 0;\n\t        }\n\t    }\n\t    queue.length = 0;\n\t    index = 0;\n\t    flushing = false;\n\t}\n\t\n\t// `requestFlush` is implemented using a strategy based on data collected from\n\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\n\t// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n\t// have WebKitMutationObserver but not un-prefixed MutationObserver.\n\t// Must use `global` or `self` instead of `window` to work in both frames and web\n\t// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\t\n\t/* globals self */\n\tvar scope = typeof global !== \"undefined\" ? global : self;\n\tvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\t\n\t// MutationObservers are desirable because they have high priority and work\n\t// reliably everywhere they are implemented.\n\t// They are implemented in all modern browsers.\n\t//\n\t// - Android 4-4.3\n\t// - Chrome 26-34\n\t// - Firefox 14-29\n\t// - Internet Explorer 11\n\t// - iPad Safari 6-7.1\n\t// - iPhone Safari 7-7.1\n\t// - Safari 6-7\n\tif (typeof BrowserMutationObserver === \"function\") {\n\t    requestFlush = makeRequestCallFromMutationObserver(flush);\n\t\n\t// MessageChannels are desirable because they give direct access to the HTML\n\t// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t// 11-12, and in web workers in many engines.\n\t// Although message channels yield to any queued rendering and IO tasks, they\n\t// would be better than imposing the 4ms delay of timers.\n\t// However, they do not work reliably in Internet Explorer or Safari.\n\t\n\t// Internet Explorer 10 is the only browser that has setImmediate but does\n\t// not have MutationObservers.\n\t// Although setImmediate yields to the browser's renderer, it would be\n\t// preferrable to falling back to setTimeout since it does not have\n\t// the minimum 4ms penalty.\n\t// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t// Desktop to a lesser extent) that renders both setImmediate and\n\t// MessageChannel useless for the purposes of ASAP.\n\t// https://github.com/kriskowal/q/issues/396\n\t\n\t// Timers are implemented universally.\n\t// We fall back to timers in workers in most engines, and in foreground\n\t// contexts in the following browsers.\n\t// However, note that even this simple case requires nuances to operate in a\n\t// broad spectrum of browsers.\n\t//\n\t// - Firefox 3-13\n\t// - Internet Explorer 6-9\n\t// - iPad Safari 4.3\n\t// - Lynx 2.8.7\n\t} else {\n\t    requestFlush = makeRequestCallFromTimer(flush);\n\t}\n\t\n\t// `requestFlush` requests that the high priority event queue be flushed as\n\t// soon as possible.\n\t// This is useful to prevent an error thrown in a task from stalling the event\n\t// queue if the exception handled by Node.jss\n\t// `process.on(\"uncaughtException\")` or by a domain.\n\trawAsap.requestFlush = requestFlush;\n\t\n\t// To request a high priority event, we induce a mutation observer by toggling\n\t// the text of a text node between \"1\" and \"-1\".\n\tfunction makeRequestCallFromMutationObserver(callback) {\n\t    var toggle = 1;\n\t    var observer = new BrowserMutationObserver(callback);\n\t    var node = document.createTextNode(\"\");\n\t    observer.observe(node, {characterData: true});\n\t    return function requestCall() {\n\t        toggle = -toggle;\n\t        node.data = toggle;\n\t    };\n\t}\n\t\n\t// The message channel technique was discovered by Malte Ubl and was the\n\t// original foundation for this library.\n\t// http://www.nonblocking.io/2011/06/windownexttick.html\n\t\n\t// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n\t// page's first load. Thankfully, this version of Safari supports\n\t// MutationObservers, so we don't need to fall back in that case.\n\t\n\t// function makeRequestCallFromMessageChannel(callback) {\n\t//     var channel = new MessageChannel();\n\t//     channel.port1.onmessage = callback;\n\t//     return function requestCall() {\n\t//         channel.port2.postMessage(0);\n\t//     };\n\t// }\n\t\n\t// For reasons explained above, we are also unable to use `setImmediate`\n\t// under any circumstances.\n\t// Even if we were, there is another bug in Internet Explorer 10.\n\t// It is not sufficient to assign `setImmediate` to `requestFlush` because\n\t// `setImmediate` must be called *by name* and therefore must be wrapped in a\n\t// closure.\n\t// Never forget.\n\t\n\t// function makeRequestCallFromSetImmediate(callback) {\n\t//     return function requestCall() {\n\t//         setImmediate(callback);\n\t//     };\n\t// }\n\t\n\t// Safari 6.0 has a problem where timers will get lost while the user is\n\t// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n\t// mutation observers, so that implementation is used instead.\n\t// However, if we ever elect to use timers in Safari, the prevalent work-around\n\t// is to add a scroll event listener that calls for a flush.\n\t\n\t// `setTimeout` does not call the passed callback if the delay is less than\n\t// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n\t// even then.\n\t\n\tfunction makeRequestCallFromTimer(callback) {\n\t    return function requestCall() {\n\t        // We dispatch a timeout with a specified delay of 0 for engines that\n\t        // can reliably accommodate that request. This will usually be snapped\n\t        // to a 4 milisecond delay, but once we're flushing, there's no delay\n\t        // between events.\n\t        var timeoutHandle = setTimeout(handleTimer, 0);\n\t        // However, since this timer gets frequently dropped in Firefox\n\t        // workers, we enlist an interval handle that will try to fire\n\t        // an event 20 times per second until it succeeds.\n\t        var intervalHandle = setInterval(handleTimer, 50);\n\t\n\t        function handleTimer() {\n\t            // Whichever timer succeeds will cancel both timers and\n\t            // execute the callback.\n\t            clearTimeout(timeoutHandle);\n\t            clearInterval(intervalHandle);\n\t            callback();\n\t        }\n\t    };\n\t}\n\t\n\t// This is for `asap.js` only.\n\t// Its name will be periodically randomized to break any code that depends on\n\t// its existence.\n\trawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\t\n\t// ASAP was originally a nextTick shim included in Q. This was factored out\n\t// into this ASAP package. It was later adapted to RSVP which made further\n\t// amendments. These decisions, particularly to marginalize MessageChannel and\n\t// to capture the MutationObserver implementation in a closure, were integrated\n\t// back into ASAP proper.\n\t// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t(function(self) {\n\t  'use strict';\n\t\n\t  if (self.fetch) {\n\t    return\n\t  }\n\t\n\t  var support = {\n\t    searchParams: 'URLSearchParams' in self,\n\t    iterable: 'Symbol' in self && 'iterator' in Symbol,\n\t    blob: 'FileReader' in self && 'Blob' in self && (function() {\n\t      try {\n\t        new Blob()\n\t        return true\n\t      } catch(e) {\n\t        return false\n\t      }\n\t    })(),\n\t    formData: 'FormData' in self,\n\t    arrayBuffer: 'ArrayBuffer' in self\n\t  }\n\t\n\t  if (support.arrayBuffer) {\n\t    var viewClasses = [\n\t      '[object Int8Array]',\n\t      '[object Uint8Array]',\n\t      '[object Uint8ClampedArray]',\n\t      '[object Int16Array]',\n\t      '[object Uint16Array]',\n\t      '[object Int32Array]',\n\t      '[object Uint32Array]',\n\t      '[object Float32Array]',\n\t      '[object Float64Array]'\n\t    ]\n\t\n\t    var isDataView = function(obj) {\n\t      return obj && DataView.prototype.isPrototypeOf(obj)\n\t    }\n\t\n\t    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n\t      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n\t    }\n\t  }\n\t\n\t  function normalizeName(name) {\n\t    if (typeof name !== 'string') {\n\t      name = String(name)\n\t    }\n\t    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n\t      throw new TypeError('Invalid character in header field name')\n\t    }\n\t    return name.toLowerCase()\n\t  }\n\t\n\t  function normalizeValue(value) {\n\t    if (typeof value !== 'string') {\n\t      value = String(value)\n\t    }\n\t    return value\n\t  }\n\t\n\t  // Build a destructive iterator for the value list\n\t  function iteratorFor(items) {\n\t    var iterator = {\n\t      next: function() {\n\t        var value = items.shift()\n\t        return {done: value === undefined, value: value}\n\t      }\n\t    }\n\t\n\t    if (support.iterable) {\n\t      iterator[Symbol.iterator] = function() {\n\t        return iterator\n\t      }\n\t    }\n\t\n\t    return iterator\n\t  }\n\t\n\t  function Headers(headers) {\n\t    this.map = {}\n\t\n\t    if (headers instanceof Headers) {\n\t      headers.forEach(function(value, name) {\n\t        this.append(name, value)\n\t      }, this)\n\t\n\t    } else if (headers) {\n\t      Object.getOwnPropertyNames(headers).forEach(function(name) {\n\t        this.append(name, headers[name])\n\t      }, this)\n\t    }\n\t  }\n\t\n\t  Headers.prototype.append = function(name, value) {\n\t    name = normalizeName(name)\n\t    value = normalizeValue(value)\n\t    var oldValue = this.map[name]\n\t    this.map[name] = oldValue ? oldValue+','+value : value\n\t  }\n\t\n\t  Headers.prototype['delete'] = function(name) {\n\t    delete this.map[normalizeName(name)]\n\t  }\n\t\n\t  Headers.prototype.get = function(name) {\n\t    name = normalizeName(name)\n\t    return this.has(name) ? this.map[name] : null\n\t  }\n\t\n\t  Headers.prototype.has = function(name) {\n\t    return this.map.hasOwnProperty(normalizeName(name))\n\t  }\n\t\n\t  Headers.prototype.set = function(name, value) {\n\t    this.map[normalizeName(name)] = normalizeValue(value)\n\t  }\n\t\n\t  Headers.prototype.forEach = function(callback, thisArg) {\n\t    for (var name in this.map) {\n\t      if (this.map.hasOwnProperty(name)) {\n\t        callback.call(thisArg, this.map[name], name, this)\n\t      }\n\t    }\n\t  }\n\t\n\t  Headers.prototype.keys = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push(name) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.values = function() {\n\t    var items = []\n\t    this.forEach(function(value) { items.push(value) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.entries = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push([name, value]) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  if (support.iterable) {\n\t    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n\t  }\n\t\n\t  function consumed(body) {\n\t    if (body.bodyUsed) {\n\t      return Promise.reject(new TypeError('Already read'))\n\t    }\n\t    body.bodyUsed = true\n\t  }\n\t\n\t  function fileReaderReady(reader) {\n\t    return new Promise(function(resolve, reject) {\n\t      reader.onload = function() {\n\t        resolve(reader.result)\n\t      }\n\t      reader.onerror = function() {\n\t        reject(reader.error)\n\t      }\n\t    })\n\t  }\n\t\n\t  function readBlobAsArrayBuffer(blob) {\n\t    var reader = new FileReader()\n\t    var promise = fileReaderReady(reader)\n\t    reader.readAsArrayBuffer(blob)\n\t    return promise\n\t  }\n\t\n\t  function readBlobAsText(blob) {\n\t    var reader = new FileReader()\n\t    var promise = fileReaderReady(reader)\n\t    reader.readAsText(blob)\n\t    return promise\n\t  }\n\t\n\t  function readArrayBufferAsText(buf) {\n\t    var view = new Uint8Array(buf)\n\t    var chars = new Array(view.length)\n\t\n\t    for (var i = 0; i < view.length; i++) {\n\t      chars[i] = String.fromCharCode(view[i])\n\t    }\n\t    return chars.join('')\n\t  }\n\t\n\t  function bufferClone(buf) {\n\t    if (buf.slice) {\n\t      return buf.slice(0)\n\t    } else {\n\t      var view = new Uint8Array(buf.byteLength)\n\t      view.set(new Uint8Array(buf))\n\t      return view.buffer\n\t    }\n\t  }\n\t\n\t  function Body() {\n\t    this.bodyUsed = false\n\t\n\t    this._initBody = function(body) {\n\t      this._bodyInit = body\n\t      if (!body) {\n\t        this._bodyText = ''\n\t      } else if (typeof body === 'string') {\n\t        this._bodyText = body\n\t      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n\t        this._bodyBlob = body\n\t      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n\t        this._bodyFormData = body\n\t      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t        this._bodyText = body.toString()\n\t      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n\t        this._bodyArrayBuffer = bufferClone(body.buffer)\n\t        // IE 10-11 can't handle a DataView body.\n\t        this._bodyInit = new Blob([this._bodyArrayBuffer])\n\t      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n\t        this._bodyArrayBuffer = bufferClone(body)\n\t      } else {\n\t        throw new Error('unsupported BodyInit type')\n\t      }\n\t\n\t      if (!this.headers.get('content-type')) {\n\t        if (typeof body === 'string') {\n\t          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n\t        } else if (this._bodyBlob && this._bodyBlob.type) {\n\t          this.headers.set('content-type', this._bodyBlob.type)\n\t        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n\t        }\n\t      }\n\t    }\n\t\n\t    if (support.blob) {\n\t      this.blob = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return Promise.resolve(this._bodyBlob)\n\t        } else if (this._bodyArrayBuffer) {\n\t          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as blob')\n\t        } else {\n\t          return Promise.resolve(new Blob([this._bodyText]))\n\t        }\n\t      }\n\t\n\t      this.arrayBuffer = function() {\n\t        if (this._bodyArrayBuffer) {\n\t          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n\t        } else {\n\t          return this.blob().then(readBlobAsArrayBuffer)\n\t        }\n\t      }\n\t    }\n\t\n\t    this.text = function() {\n\t      var rejected = consumed(this)\n\t      if (rejected) {\n\t        return rejected\n\t      }\n\t\n\t      if (this._bodyBlob) {\n\t        return readBlobAsText(this._bodyBlob)\n\t      } else if (this._bodyArrayBuffer) {\n\t        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n\t      } else if (this._bodyFormData) {\n\t        throw new Error('could not read FormData body as text')\n\t      } else {\n\t        return Promise.resolve(this._bodyText)\n\t      }\n\t    }\n\t\n\t    if (support.formData) {\n\t      this.formData = function() {\n\t        return this.text().then(decode)\n\t      }\n\t    }\n\t\n\t    this.json = function() {\n\t      return this.text().then(JSON.parse)\n\t    }\n\t\n\t    return this\n\t  }\n\t\n\t  // HTTP methods whose capitalization should be normalized\n\t  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\t\n\t  function normalizeMethod(method) {\n\t    var upcased = method.toUpperCase()\n\t    return (methods.indexOf(upcased) > -1) ? upcased : method\n\t  }\n\t\n\t  function Request(input, options) {\n\t    options = options || {}\n\t    var body = options.body\n\t\n\t    if (input instanceof Request) {\n\t      if (input.bodyUsed) {\n\t        throw new TypeError('Already read')\n\t      }\n\t      this.url = input.url\n\t      this.credentials = input.credentials\n\t      if (!options.headers) {\n\t        this.headers = new Headers(input.headers)\n\t      }\n\t      this.method = input.method\n\t      this.mode = input.mode\n\t      if (!body && input._bodyInit != null) {\n\t        body = input._bodyInit\n\t        input.bodyUsed = true\n\t      }\n\t    } else {\n\t      this.url = String(input)\n\t    }\n\t\n\t    this.credentials = options.credentials || this.credentials || 'omit'\n\t    if (options.headers || !this.headers) {\n\t      this.headers = new Headers(options.headers)\n\t    }\n\t    this.method = normalizeMethod(options.method || this.method || 'GET')\n\t    this.mode = options.mode || this.mode || null\n\t    this.referrer = null\n\t\n\t    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n\t      throw new TypeError('Body not allowed for GET or HEAD requests')\n\t    }\n\t    this._initBody(body)\n\t  }\n\t\n\t  Request.prototype.clone = function() {\n\t    return new Request(this, { body: this._bodyInit })\n\t  }\n\t\n\t  function decode(body) {\n\t    var form = new FormData()\n\t    body.trim().split('&').forEach(function(bytes) {\n\t      if (bytes) {\n\t        var split = bytes.split('=')\n\t        var name = split.shift().replace(/\\+/g, ' ')\n\t        var value = split.join('=').replace(/\\+/g, ' ')\n\t        form.append(decodeURIComponent(name), decodeURIComponent(value))\n\t      }\n\t    })\n\t    return form\n\t  }\n\t\n\t  function parseHeaders(rawHeaders) {\n\t    var headers = new Headers()\n\t    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n\t      var parts = line.split(':')\n\t      var key = parts.shift().trim()\n\t      if (key) {\n\t        var value = parts.join(':').trim()\n\t        headers.append(key, value)\n\t      }\n\t    })\n\t    return headers\n\t  }\n\t\n\t  Body.call(Request.prototype)\n\t\n\t  function Response(bodyInit, options) {\n\t    if (!options) {\n\t      options = {}\n\t    }\n\t\n\t    this.type = 'default'\n\t    this.status = 'status' in options ? options.status : 200\n\t    this.ok = this.status >= 200 && this.status < 300\n\t    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n\t    this.headers = new Headers(options.headers)\n\t    this.url = options.url || ''\n\t    this._initBody(bodyInit)\n\t  }\n\t\n\t  Body.call(Response.prototype)\n\t\n\t  Response.prototype.clone = function() {\n\t    return new Response(this._bodyInit, {\n\t      status: this.status,\n\t      statusText: this.statusText,\n\t      headers: new Headers(this.headers),\n\t      url: this.url\n\t    })\n\t  }\n\t\n\t  Response.error = function() {\n\t    var response = new Response(null, {status: 0, statusText: ''})\n\t    response.type = 'error'\n\t    return response\n\t  }\n\t\n\t  var redirectStatuses = [301, 302, 303, 307, 308]\n\t\n\t  Response.redirect = function(url, status) {\n\t    if (redirectStatuses.indexOf(status) === -1) {\n\t      throw new RangeError('Invalid status code')\n\t    }\n\t\n\t    return new Response(null, {status: status, headers: {location: url}})\n\t  }\n\t\n\t  self.Headers = Headers\n\t  self.Request = Request\n\t  self.Response = Response\n\t\n\t  self.fetch = function(input, init) {\n\t    return new Promise(function(resolve, reject) {\n\t      var request = new Request(input, init)\n\t      var xhr = new XMLHttpRequest()\n\t\n\t      xhr.onload = function() {\n\t        var options = {\n\t          status: xhr.status,\n\t          statusText: xhr.statusText,\n\t          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n\t        }\n\t        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n\t        var body = 'response' in xhr ? xhr.response : xhr.responseText\n\t        resolve(new Response(body, options))\n\t      }\n\t\n\t      xhr.onerror = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.ontimeout = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.open(request.method, request.url, true)\n\t\n\t      if (request.credentials === 'include') {\n\t        xhr.withCredentials = true\n\t      }\n\t\n\t      if ('responseType' in xhr && support.blob) {\n\t        xhr.responseType = 'blob'\n\t      }\n\t\n\t      request.headers.forEach(function(value, name) {\n\t        xhr.setRequestHeader(name, value)\n\t      })\n\t\n\t      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n\t    })\n\t  }\n\t  self.fetch.polyfill = true\n\t})(typeof self !== 'undefined' ? self : this);\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// static/js/main.aa1d603e.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/trainwreck/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e57b228e2d9871498b9b","import World from './World';\r\n\r\nexport default class Train extends PIXI.Container {\r\n\r\n\tconstructor(world, x, y, direction) {\r\n\t\tsuper();\r\n\r\n\t\tthis.world = world;\r\n\t\tthis.direction = direction;\r\n\t\tthis.speed = Train.INITIAL_SPEED;\r\n\t\tthis.isCrashed = false;\r\n\r\n\t\tthis.addCart();\r\n\r\n\t\tthis.locomotive = this.children[0];\r\n\t\tthis.locomotive.x = x * World.PIECE_WIDTH;\r\n\t\tthis.locomotive.y = y * World.PIECE_HEIGHT;\r\n\t\t\r\n\t\tthis.path = this.world.getPath(0, 0, this.direction);\r\n\t}\r\n\r\n\tmove() {\r\n\t\tvar pieceX = Math.floor(this.locomotive.x / World.PIECE_WIDTH);\r\n\r\n\t\tif(!this.isCrashed && pieceX < this.path.length - 1) {\r\n\t\t\tvar pieceY = this.path[pieceX];\r\n\r\n\t\t\tvar getY = (x) => {\r\n\t\t\t\tif(x < 0) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tvar y1 = World.PIECE_HEIGHT * this.path[Math.floor(x / World.PIECE_WIDTH)];\r\n\t\t\t\tvar y2 = World.PIECE_HEIGHT * this.path[Math.floor(x / World.PIECE_WIDTH) + 1];\r\n\t\t\t\tif(Object.is(y2, NaN)) {\r\n\t\t\t\t\ty2 = y1;\r\n\t\t\t\t}\r\n\t\t\t\tvar t = (x % World.PIECE_WIDTH) / World.PIECE_WIDTH;\r\n\t\t\t\treturn y1 + t * (y2 - y1);\r\n\t\t\t}\r\n\t\t\tvar getAngle = (x) => {\r\n\t\t\t\tif(x < 0) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tvar y1 = getY(x - Train.CART_WIDTH2);\r\n\t\t\t\tvar y2 = getY(x + Train.CART_WIDTH2);\r\n\t\t\t\treturn Math.atan((y2 - y1) / Train.CART_WIDTH);\r\n\t\t\t}\r\n\r\n\t\t\t//move locomotive\r\n\t\t\tthis.locomotive.x += this.direction * this.speed;\r\n\t\t\tthis.locomotive.y = getY(this.locomotive.x);\r\n\t\t\tthis.locomotive.rotation = getAngle(this.locomotive.x);\r\n\t\t\t\r\n\t\t\t//check for cart on rail\r\n\t\t\tif(this.world.rails[pieceX][pieceY].isCart) {\r\n\t\t\t\tthis.addCart();\r\n\t\t\t\tthis.world.rails[pieceX][pieceY].isCart = false;\r\n\t\t\t\tthis.world.updateRailPiece(pieceX, pieceY);\r\n\t\t\t}\r\n\r\n\t\t\t//move other carts\r\n\t\t\tfor(let i = 1; i < this.children.length; i++) {\r\n\t\t\t\tlet dx = this.children[i].x - this.children[i-1].x;\r\n\t\t\t\tlet dy = this.children[i].y - this.children[i-1].y;\r\n\t\t\t\tlet l= Train.CART_DELAY / Math.sqrt(dx * dx + dy * dy);\r\n\t\t\t\tdx *= l;\r\n\t\t\t\tdy *= l;\r\n\t\t\t\tthis.children[i].x = this.children[i-1].x + dx;\r\n\t\t\t\tthis.children[i].y = this.children[i-1].y + dy;\r\n\t\t\t\tthis.children[i].rotation = getAngle(this.children[i].x);\r\n\r\n\t\t\t\tvar skew = this.children[i].y - getY(this.children[i].x);\r\n\r\n\t\t\t\tif(Math.abs(skew) > Train.CART_MAX_SKEW) {\r\n\t\t\t\t\tthis.children[i].y = getY(this.children[i].x) + Math.sign(skew) * Train.CART_MAX_SKEW;\r\n\t\t\t\t\tskew = Math.sign(skew) * Train.CART_MAX_SKEW;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.children[i].children[0].y = -Train.CART_HEIGHT2 - skew;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.isCrashed = true;\r\n\r\n\t\t\t//move locomotive\r\n\t\t\tthis.speed *= 0.92;\r\n\t\t\tthis.locomotive.rotation += Math.min(3, this.speed) * (Math.random() - 0.5) * 0.2;\r\n\t\t\tthis.locomotive.x += this.speed * Math.cos(this.locomotive.rotation);\r\n\t\t\tthis.locomotive.y += this.speed * Math.sin(this.locomotive.rotation);\r\n\r\n\t\t\t//move other carts\r\n\t\t\tfor(let i = 1; i < this.children.length; i++) {\r\n\t\t\t\tlet dx = this.children[i].x - this.children[i-1].x;\r\n\t\t\t\tlet dy = this.children[i].y - this.children[i-1].y;\r\n\t\t\t\tlet l = Train.CART_DELAY / Math.sqrt(dx * dx + dy * dy);\r\n\t\t\t\tdx *= l;\r\n\t\t\t\tdy *= l;\r\n\t\t\t\tthis.children[i].x = this.children[i-1].x + dx;\r\n\t\t\t\tthis.children[i].y = this.children[i-1].y + dy;\r\n\t\t\t\tthis.children[i].rotation = Math.min(Math.max(Math.atan(dy / dx), -1), 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\taddCart() {\r\n\t\tvar cartContainer = new PIXI.Sprite();\r\n\t\t\r\n\t\tvar cartBottom = new PIXI.Graphics();\r\n\t\tcartBottom.width = Train.CART_WIDTH;\r\n\t\tcartBottom.height = Train.CART_HEIGHT;\r\n\t\tcartBottom.beginFill(0x999900);\r\n\t\tcartBottom.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\r\n\r\n\t\tcartBottom.x = -Train.CART_WIDTH2;\r\n\t\tcartBottom.y = -Train.CART_HEIGHT2;\r\n\r\n\t\tcartContainer.addChild(cartBottom);\r\n\r\n\t\tvar cartTop = new PIXI.Graphics();\r\n\t\tcartTop.width = Train.CART_WIDTH;\r\n\t\tcartTop.height = Train.CART_HEIGHT;\r\n\t\tcartTop.beginFill(0xFFFF00);\r\n\t\tcartTop.drawRect(0, 0, Train.CART_WIDTH, Train.CART_HEIGHT);\r\n\r\n\t\tcartTop.x = -Train.CART_WIDTH2;\r\n\t\tcartTop.y = -Train.CART_HEIGHT2;\r\n\r\n\t\tcartContainer.addChild(cartTop);\r\n\r\n\t\tcartContainer.x = -9999999;\r\n\t\tcartContainer.y = 0;\r\n\r\n\t\tthis.addChild(cartContainer);\r\n\t}\r\n\r\n\tremoveCart() {\r\n\t\tthis.removeChild(this.children[this.children.length-1]);\r\n\t}\r\n\r\n\trecalculatePath(from) {\r\n\t\tif(from === undefined) {\r\n\t\t\tfrom = Math.floor(this.children[0].x / World.PIECE_WIDTH);\r\n\t\t}\r\n\t\tthis.world.getPath(from, this.path[from], this.direction, this.path);\r\n\t}\r\n\r\n\tgetCartCount() {\r\n\t\treturn this.children.length;\r\n\t}\r\n}\r\n\r\nTrain.LEFT = -1;\r\nTrain.RIGHT = 1;\r\n\r\nTrain.CART_WIDTH = 30;\r\nTrain.CART_HEIGHT = 10;\r\nTrain.CART_WIDTH2 = Train.CART_WIDTH / 2;\r\nTrain.CART_HEIGHT2 = Train.CART_HEIGHT / 2;\r\nTrain.CART_DELAY = 32;\r\nTrain.CART_MAX_SKEW = Train.CART_HEIGHT / 3;\r\nTrain.INITIAL_SPEED = 0.4;\r\nTrain.SPEED_CHANGE_STEP = 0.03;\n\n\n// WEBPACK FOOTER //\n// ./src/world/Train.js","import RailPiece from './RailPiece';\r\nimport Train from './Train';\r\n\r\nexport default class World extends PIXI.Container {\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.rails = [];\r\n\r\n\t\tthis.initGenarator();\r\n\r\n\t\t//init\r\n\t\tthis.rails.push({0: new RailPiece()});\r\n\r\n\t\tthis.displayed = {\r\n\t\t\tfrom: 0,\r\n\t\t\tto: 0\r\n\t\t};\r\n\r\n\t\t// this.clamp(0, 60);\r\n\t}\r\n\r\n\tconnectRails(railA, indexA, railB, indexB) {\r\n\t\trailA.addTo(indexB);\r\n\t\trailB.addFrom(indexA);\r\n\t}\r\n\t\r\n\tgenerateNext(width) {\r\n\t\tvar half = Math.floor(width / 2);\r\n\t\t\r\n\t\tvar rails = {};\r\n\t\tfor(var i=-half; i<=half; i++) {\r\n\t\t\trails[i] = new RailPiece();\r\n\t\t}\r\n\t\tthis.rails.push(rails);\r\n\r\n\t\t//rails\r\n\t\tvar railsBefore = this.rails[this.rails.length-2];\r\n\t\tObject.keys(railsBefore).forEach(railIndex => {\r\n\t\t\trailIndex = parseInt(railIndex, 10);\r\n\r\n\t\t\tvar usableGenerators = this.railGenerators.filter((railGenerator) => {\r\n\t\t\t\treturn railGenerator.canUse(railsBefore, rails, railIndex);\r\n\t\t\t})\r\n\r\n\t\t\tif(usableGenerators.length > 0) {\r\n\t\t\t\tvar railGenerator = usableGenerators[Math.floor(Math.random() * usableGenerators.length)];\r\n\t\t\t\trailGenerator.use(railsBefore, rails, railIndex);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//carts\r\n\t\tObject.keys(rails).forEach(railIndex => {\r\n\t\t\trailIndex = parseInt(railIndex, 10);\r\n\t\t\tvar railPiece = rails[railIndex];\r\n\r\n\t\t\tif(Math.random() < 0.05) {\r\n\t\t\t\trailPiece.isCart = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclamp(from, to) {\r\n\t\tfor(var i=this.displayed.to; i<to; i++) {\r\n\t\t\tthis.generateNext(Math.min(7, (2 * Math.floor(Math.abs(Math.sin(i / 10)) * i / 7)) + 1));\r\n\t\t}\r\n\t\tthis.display(from, to);\r\n\t}\r\n\r\n\tinitGenarator() {\r\n\t\tthis.railGenerators = [];\r\n\r\n\t\tvar addRailType = (callback, rarity) => {\r\n\t\t\tfor(var i=0; i<rarity; i++) {\r\n\t\t\t\tthis.railGenerators.push(callback);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//straight\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 6);\r\n\r\n\t\t//up\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex + 1] !== undefined;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\r\n\t\t\t}\r\n\t\t}, 2);\r\n\r\n\t\t//down\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex - 1] !== undefined;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\r\n\t\t\t}\r\n\t\t}, 2);\r\n\r\n\t\t//split up\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t\t&& rails[railIndex + 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& rails[railIndex + 1].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex + 1], railIndex + 1);\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 1);\r\n\r\n\t\t//split down\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t\t&& rails[railIndex - 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& rails[railIndex - 1].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex - 1], railIndex - 1);\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 1);\r\n\r\n/*\r\n\t\t//backsplit up\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t\t&& railsBefore[railIndex + 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& railsBefore[railIndex + 1].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex + 1], railIndex + 1, rails[railIndex], railIndex);\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 1);\r\n\r\n\t\t//backsplit down\r\n\t\taddRailType({\r\n\t\t\tcanUse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\treturn rails[railIndex] !== undefined\r\n\t\t\t\t\t&& railsBefore[railIndex - 1] !== undefined\r\n\t\t\t\t\t//max one switch\r\n\t\t\t\t\t&& railsBefore[railIndex - 1].railsCount() <= 2\r\n\t\t\t\t\t&& railsBefore[railIndex].railsCount() <= 2\r\n\t\t\t\t\t&& rails[railIndex].railsCount() <= 2;\r\n\t\t\t},\r\n\t\t\tuse: (railsBefore, rails, railIndex) => {\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex - 1], railIndex - 1, rails[railIndex], railIndex);\r\n\t\t\t\tthis.connectRails(railsBefore[railIndex], railIndex, rails[railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}, 1);\r\n*/\r\n\t}\r\n\r\n\tdisplay(from, to) {\r\n\t\tif(from === undefined) {\r\n\t\t\tfrom = 0;\r\n\t\t}\r\n\t\tif(to === undefined) {\r\n\t\t\tto = this.rails.length;\r\n\t\t}\r\n\r\n\t\t//remove before from\r\n\t\tvar removeFrom = World.PIECE_WIDTH * this.displayed.from;\r\n\t\tvar removeTo = World.PIECE_WIDTH * from;\r\n\t\tfor (var i = this.children.length - 1; i >= 0; i--) {\r\n\t\t\tif(this.children[i].x >= removeFrom || this.children[i].x < removeTo) {\r\n\t\t\t\tthis.removeChild(this.children[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//add rails\r\n\t\tfor(i=this.displayed.to; i<to; i++) {\r\n\t\t\tvar rails = this.rails[i];\r\n\t\t\tfor(var railIndex in rails) {\r\n\t\t\t\tvar railPiece = rails[railIndex];\r\n\r\n\t\t\t\tif(!railPiece.isEmpty) {\r\n\t\t\t\t\tvar railSprite = new PIXI.Graphics();\r\n\r\n\t\t\t\t\trailSprite.x = i * World.PIECE_WIDTH;\r\n\t\t\t\t\trailSprite.y = railIndex * World.PIECE_HEIGHT;\r\n\t\t\t\t\trailSprite.width = World.PIECE_WIDTH;\r\n\t\t\t\t\trailSprite.height = World.PIECE_HEIGHT;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.displayRailPiece(railSprite, railPiece, railIndex);\r\n\r\n\t\t\t\t\tthis.addChild(railSprite);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.displayed.from = from\r\n\t\tthis.displayed.to = to;\r\n\t}\r\n\r\n\tdisplayRailPiece(railSprite, railPiece, railIndex) {\r\n\t\trailSprite.clear();\r\n\r\n\t\tvar h;\r\n\r\n\t\tfor(var toRailIndex of railPiece.to) {\r\n\t\t\th = toRailIndex - railIndex;\r\n\t\t\trailSprite.lineStyle(5, 0xffffff, 0.5);\r\n\t\t\trailSprite.moveTo(World.PIECE_WIDTH2, World.PIECE_HEIGHT2);\r\n\t\t\trailSprite.lineTo(World.PIECE_WIDTH, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2);\r\n\t\t\trailSprite.endFill();\r\n\t\t}\r\n\r\n\t\tfor(var fromRailIndex of railPiece.from) {\r\n\t\t\th = fromRailIndex - railIndex;\r\n\t\t\trailSprite.lineStyle(5, 0xffffff, 0.5);\r\n\t\t\trailSprite.moveTo(World.PIECE_WIDTH2, World.PIECE_HEIGHT2);\r\n\t\t\trailSprite.lineTo(0, World.PIECE_HEIGHT2 + h * World.PIECE_HEIGHT2);\r\n\t\t\trailSprite.endFill();\r\n\t\t}\r\n\r\n\t\tif(railPiece.isCart) {\r\n\t\t\trailSprite.beginFill(0xFFFF00);\r\n\t\t\trailSprite.lineStyle();\r\n\t\t\trailSprite.drawRect(World.PIECE_WIDTH2 - Train.CART_WIDTH2, World.PIECE_HEIGHT2 - Train.CART_HEIGHT2, Train.CART_WIDTH, Train.CART_HEIGHT);\r\n\t\t}\r\n\t}\r\n\r\n\tupdateRailPiece(railsOffset, railIndex) {\r\n\t\tvar x = railsOffset * World.PIECE_WIDTH;\r\n\t\tvar y = railIndex * World.PIECE_HEIGHT;\r\n\t\tfor(var i=0; i<this.children.length; i++) {\r\n\t\t\tif(this.children[i].x == x && this.children[i].y == y) {\r\n\t\t\t\tthis.displayRailPiece(this.children[i], this.rails[railsOffset][railIndex], railIndex);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetPath(railsOffset, railIndex, direction, path) {\r\n\t\tif(!path) {\r\n\t\t\tpath = [];\r\n\t\t}\r\n\t\tpath[railsOffset] = railIndex;\r\n\t\twhile(railsOffset < this.rails.length) {\r\n\t\t\tvar railPiece = this.rails[railsOffset][railIndex];\r\n\t\t\tvar next = (direction === 1) ? railPiece.getTo() : railPiece.getFrom();\r\n\t\t\t\r\n\t\t\tif(next === undefined) {\r\n\t\t\t\tbreak; //EOW\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\trailsOffset += direction;\r\n\t\t\t\r\n\t\t\tif(path[railsOffset] === next) {\r\n\t\t\t\tbreak; //already same path\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpath[railsOffset] = next;\r\n\t\t\trailIndex = next;\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n}\r\n\r\nWorld.PIECE_WIDTH = 50;\r\nWorld.PIECE_HEIGHT = 20;\r\nWorld.PIECE_WIDTH2 = World.PIECE_WIDTH / 2;\r\nWorld.PIECE_HEIGHT2 = World.PIECE_HEIGHT / 2;\n\n\n// WEBPACK FOOTER //\n// ./src/world/World.js","'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('not a function');\n  }\n  this._45 = 0;\n  this._81 = 0;\n  this._65 = null;\n  this._54 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._10 = null;\nPromise._97 = null;\nPromise._61 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n};\nfunction handle(self, deferred) {\n  while (self._81 === 3) {\n    self = self._65;\n  }\n  if (Promise._10) {\n    Promise._10(self);\n  }\n  if (self._81 === 0) {\n    if (self._45 === 0) {\n      self._45 = 1;\n      self._54 = deferred;\n      return;\n    }\n    if (self._45 === 1) {\n      self._45 = 2;\n      self._54 = [self._54, deferred];\n      return;\n    }\n    self._54.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._81 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._81 === 1) {\n        resolve(deferred.promise, self._65);\n      } else {\n        reject(deferred.promise, self._65);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._65);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._81 = 3;\n      self._65 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._81 = 1;\n  self._65 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._81 = 2;\n  self._65 = newValue;\n  if (Promise._97) {\n    Promise._97(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._45 === 1) {\n    handle(self, self._54);\n    self._54 = null;\n  }\n  if (self._45 === 2) {\n    for (var i = 0; i < self._54.length; i++) {\n      handle(self, self._54[i]);\n    }\n    self._54 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  })\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/core.js\n// module id = 3\n// module chunks = 0","if (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/polyfills.js\n// module id = 4\n// module chunks = 0","import Stages from './common/Stages';\r\nimport StageMenu from './stages/Menu';\r\nimport StagePlay from './stages/Play';\r\n\r\nexport default class App {\r\n\r\n\tconstructor(settings) {\r\n\t\tthis.settings = settings;\r\n\t\tthis.stages = new Stages();\r\n\t\t\r\n\t\tthis.stages.addStage(\"menu\", new StageMenu(this.stages, settings));\r\n\t\tthis.stages.addStage(\"play\", new StagePlay(this.stages, settings));\r\n\t\tthis.stages.changeStage(\"play\");\r\n\r\n\t}\r\n\r\n\tstart() {\r\n\t\tvar setup = () => {\r\n\t\t\tvar renderer = PIXI.autoDetectRenderer(this.settings.width, this.settings.height);\r\n\t\t\tdocument.body.appendChild(renderer.view);\r\n\r\n\t\t\tvar gameLoop = () => {\r\n\t\t\t\trequestAnimationFrame(gameLoop);\r\n\t\t\t\tthis.stages.beforeRender();\r\n\t\t\t\trenderer.render(this.stages.current);\r\n\t\t\t}\r\n\t\t\tgameLoop();\r\n\r\n\t\t}\r\n\r\n\t\tPIXI.loader\r\n\t\t.add(\"images/anyImage.png\")\r\n\t\t.load(setup);\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","export default class KeyListener {\r\n\t\r\n\tconstructor(keyCode, press, release) {\r\n\t\tthis.code = keyCode;\r\n\t\tthis.isDown = false;\r\n\t\tthis.isUp = true;\r\n\t\tthis.press = press;\r\n\t\tthis.release = release;\r\n\r\n\t\tthis.downHandler = event => {\r\n\t\t\tif (event.keyCode === this.code) {\r\n\t\t\t\tif (this.isUp && this.press) this.press();\r\n\t\t\t\tthis.isDown = true;\r\n\t\t\t\tthis.isUp = false;\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.upHandler = event => {\r\n\t\t\tif (event.keyCode === this.code) {\r\n\t\t\t\tif (this.isDown && this.release) this.release();\r\n\t\t\t\tthis.isDown = false;\r\n\t\t\t\tthis.isUp = true;\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"keydown\", this.downHandler, false);\r\n\t\twindow.addEventListener(\"keyup\", this.upHandler, false);\r\n\t}\r\n\r\n\tclose() {\r\n\t\twindow.removeEventListener(\"keydown\",  this.downHandler);\r\n\t\twindow.removeEventListener(\"keyup\", this.upHandler);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/common/KeyListener.js","export default class Stages {\r\n\r\n\tconstructor() {\r\n\t\tthis.current = undefined;\r\n\t\tthis.list = [];\r\n\t\tthis.nextTick = 0;\r\n\t}\r\n\t\r\n\taddStage(name, stage) {\r\n\t\tthis.list[name] = stage;\r\n\t}\r\n\r\n\tchangeStage(name) {\r\n\t\tif(!this.list[name]) {\r\n\t\t\tthrow new Error(\"Illegal stage name.\");\r\n\t\t}\r\n\t\tif(this.current !== undefined) {\r\n\t\t\tthis.current.unload();\r\n\t\t}\r\n\t\tthis.current = this.list[name];\r\n\t\tthis.current.load();\r\n\t}\r\n\r\n\tgetStage(name) {\r\n\t\treturn this.list[name];\r\n\t}\r\n\r\n\tbeforeRender() {\r\n\t\tif(this.nextTick <= Date.now()) {\r\n\t\t\tthis.nextTick = Date.now() + 10;\r\n\t\t\tthis.current.tick();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/*\r\nStage interface:\r\n{\r\n\tload = function()\r\n\tunload = function()\r\n\ttick = function()\r\n}\r\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/common/Stages.js","import App from './App';\r\n\r\nvar settings = {\r\n\twidth: 960,\r\n\theight: 144\r\n}\r\n\r\nwindow.app = new App(settings);\r\nwindow.app.start();\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default class StageMenu extends PIXI.Container {\r\n\r\n\tconstructor(stages, settings) {\r\n\t\tsuper();\r\n\t\t\r\n\t}\r\n\r\n\tload() {\r\n\t\t\r\n\t}\r\n\r\n\ttick() {\r\n\t\t\r\n\t}\r\n\r\n\tunload() {\r\n\t\t\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/stages/Menu.js","import World from '../world/World';\r\nimport Train from '../world/Train';\r\nimport SwitchCursor from '../world/SwitchCursor';\r\nimport KeyListener from '../common/KeyListener';\r\n\r\nexport default class StagePlay extends PIXI.Container {\r\n\r\n\tconstructor(stages, settings) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.stages = stages;\r\n\t\tthis.settings = settings;\r\n\t\tthis.cameraPosPercentage = 0.21;\r\n\t}\r\n\r\n\tload() {\r\n\t\tthis.world = new World();\r\n\t\tthis.world.y = this.settings.height / 2;\r\n\r\n\t\tthis.train = new Train(this.world, 0, 0, Train.RIGHT);\r\n\t\tthis.train.x = World.PIECE_WIDTH2;\r\n\t\tthis.train.y = this.settings.height / 2 + World.PIECE_HEIGHT2;\r\n\r\n\t\tthis.switchCursor = new SwitchCursor(this.train);\r\n\t\tthis.switchCursor.y = this.settings.height / 2;\r\n\r\n\t\tthis.cartsText = new PIXI.Text(\"0\", new PIXI.TextStyle({fontSize: 40, fill: '#FFFFFF'}));\r\n\t\tthis.cartsText.x = 16;\r\n\t\tthis.cartsText.y = 16;\r\n\r\n\t\tthis.crashedText = new PIXI.Text(\"Crashed\", new PIXI.TextStyle({fontSize: 40, fill: '#FFFFFF'}));\r\n\t\tthis.crashedText.x = this.settings.width / 2;\r\n\t\tthis.crashedText.y = this.settings.height / 2;\r\n\t\tthis.crashedText.anchor.x = 0.5;\r\n\t\tthis.crashedText.anchor.y = 0.5;\r\n\t\tthis.crashedText.visible = false;\r\n\r\n\t\tthis.addChild(this.world);\r\n\t\tthis.addChild(this.train);\r\n\t\tthis.addChild(this.switchCursor);\r\n\t\tthis.addChild(this.cartsText);\r\n\t\tthis.addChild(this.crashedText);\r\n\r\n\t\tthis.keyUp = new KeyListener(38);\r\n\t\tthis.keyDown = new KeyListener(40);\r\n\t\tthis.keyLeft = new KeyListener(37);\r\n\t\tthis.keyRight = new KeyListener(39);\r\n\t\tthis.keySpace = new KeyListener(32);\r\n\t}\r\n\r\n\ttick() {\r\n\t\tif(this.train.locomotive.x + this.settings.width > this.world.displayed.to * World.PIECE_WIDTH) {\r\n\t\t\tvar from = Math.floor(this.train.locomotive.x / World.PIECE_WIDTH);\r\n\t\t\tvar oldTo = this.world.displayed.to;\r\n\t\t\tthis.world.clamp(from, from + 100);\r\n\t\t\tthis.train.recalculatePath(oldTo);\r\n\t\t\tthis.switchCursor.displayPath();\r\n\t\t}\r\n\r\n\t\tthis.train.move();\r\n\t\tthis.switchCursor.recalculatePosition();\r\n\r\n\t\t//move camera\r\n\t\tvar camPos = this.cameraPosPercentage * this.settings.width - this.train.locomotive.x;\r\n\t\tif(camPos > 0) {\r\n\t\t\tcamPos = 0;\r\n\t\t}\r\n\t\tcamPos -= World.PIECE_WIDTH;\r\n\t\tthis.world.x = camPos;\r\n\t\tthis.train.x = camPos + World.PIECE_WIDTH2;\r\n\t\tthis.switchCursor.x = camPos;\r\n\t\t\r\n\t\tif(!this.train.isCrashed) {\r\n\t\t\tif(this.keyUp.isDown) {\r\n\t\t\t\tthis.switchCursor.switchCursor(0);\r\n\t\t\t}\r\n\t\t\tif(this.keyDown.isDown) {\r\n\t\t\t\tthis.switchCursor.switchCursor(1);\r\n\t\t\t}\r\n\t\t\tif(this.keyLeft.isDown) {\r\n\t\t\t\tthis.train.speed -= Train.SPEED_CHANGE_STEP;\r\n\t\t\t}\r\n\t\t\tif(this.keyRight.isDown) {\r\n\t\t\t\tthis.train.speed += Train.SPEED_CHANGE_STEP;\r\n\t\t\t}\r\n\t\t\tif(this.keySpace.isDown) {\r\n\t\t\t\tthis.restart();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.cartsText.text = this.train.getCartCount();\r\n\r\n\t\tif(this.train.isCrashed) {\r\n\t\t\tthis.crashedText.visible = true;\r\n\t\t}\r\n\t}\r\n\r\n\trestart() {\r\n\t\tthis.unload();\r\n\t\tthis.load();\r\n\t}\r\n\r\n\tunload() {\r\n\t\tthis.removeChild(this.world);\r\n\t\tthis.removeChild(this.train);\r\n\t\tthis.removeChild(this.switchCursor);\r\n\t\tthis.removeChild(this.cartsText);\r\n\t\tthis.removeChild(this.crashedText);\r\n\t\t\r\n\t\tthis.keyUp.close();\r\n\t\tthis.keyDown.close();\r\n\t\tthis.keyLeft.close();\r\n\t\tthis.keyRight.close();\r\n\t\tthis.keySpace.close();\r\n\r\n\t\tthis.keyUp = undefined;\r\n\t\tthis.keyDown = undefined;\r\n\t\tthis.keyLeft = undefined;\r\n\t\tthis.keyRight = undefined;\r\n\t\tthis.keySpace = undefined;\r\n\r\n\t\tthis.world = undefined;\r\n\t\tthis.train = undefined;\r\n\t\tthis.switchCursor = undefined;\r\n\t\tthis.cartsText = undefined;\r\n\t\tthis.crashedText = undefined;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/stages/Play.js","import Train from './Train';\r\n\r\nexport default class RailPiece {\r\n\r\n\tconstructor() {\r\n\t\tthis.to = [];\r\n\t\tthis.from = [];\r\n\t\tthis.isSwitch = false;\r\n\t\tthis.isEmpty = true;\r\n\t\tthis.isCart = false;\r\n\t\tthis.switched = {\r\n\t\t\tfrom: undefined,\r\n\t\t\tto: undefined\r\n\t\t}\r\n\t}\r\n\r\n\taddTo(railIndex) {\r\n\t\tthis.to.push(railIndex);\r\n\t\tthis.to.sort((a, b) => {return a-b;});\r\n\t\tthis.onRailAdded();\r\n\t}\r\n\r\n\taddFrom(railIndex) {\r\n\t\tthis.from.push(railIndex);\r\n\t\tthis.from.sort((a, b) => {return a-b;});\r\n\t\tthis.onRailAdded();\r\n\t}\r\n\r\n\tonRailAdded() {\r\n\t\tthis.isEmpty = false;\r\n\t\tthis.isSwitch = this.railsCount() > 2;\r\n\t\tif(this.isSwitch) {\r\n\t\t\tthis.switched = {\r\n\t\t\t\tfrom: Math.floor(Math.random() * this.from.length),\r\n\t\t\t\tto: Math.floor(Math.random() * this.to.length)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisConnectedTo(railIndex) {\r\n\t\treturn this.to.indexOf(railIndex) >= 0;\r\n\t}\r\n\r\n\tgetTo() {\r\n\t\tif(this.isSwitch) {\r\n\t\t\treturn this.to[this.switched.to];\r\n\t\t}\r\n\t\tif(this.to.length > 0) {\r\n\t\t\treturn this.to[0];\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tgetFrom() {\r\n\t\tif(this.isSwitch) {\r\n\t\t\treturn this.from[this.switched.from];\r\n\t\t}\r\n\t\tif(this.from.length > 0) {\r\n\t\t\treturn this.from[0];\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tswitchPrefered(preferedDirection, value) {\r\n\t\tif(preferedDirection == Train.RIGHT) {\r\n\t\t\tif(this.to.length >= 2) {\r\n\t\t\t\tthis.switchTo(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.switchFrom(value);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(this.from.length >= 2) {\r\n\t\t\t\tthis.switchFrom(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.switchTo(value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tswitchTo(value) {\r\n\t\tthis.switched.to = value;\r\n\t}\r\n\r\n\tswitchFrom(value) {\r\n\t\tthis.switched.from = value;\r\n\t}\r\n\r\n\trailsCount() {\r\n\t\treturn this.from.length + this.to.length\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/world/RailPiece.js","import World from './World';\r\n\r\nexport default class SwitchCursor extends PIXI.Container {\r\n\r\n\tconstructor(train) {\r\n\t\tsuper();\r\n\r\n\t\tthis.train = train;\r\n\t\tthis.cursorX = 0;\r\n\t\tthis.cursorY = 0;\r\n\r\n\t\tthis.display();\r\n\t\tthis.displayPath();\r\n\r\n\t\tthis.recalculatePosition();\r\n\t}\r\n\r\n\trecalculatePosition() {\r\n\t\tvar trainX = Math.floor(this.train.locomotive.x / World.PIECE_WIDTH);\r\n\t\tvar trainY = this.train.path[trainX];\r\n\r\n\t\t// if(this.cursorX === trainX && this.cursorY === trainY) {\r\n\t\t\t//find next switch\r\n\t\t\tvar newCursorX = trainX + 1;\r\n\t\t\twhile(newCursorX < this.train.world.rails.length\r\n\t\t\t\t&& newCursorX < this.train.path.length\r\n\t\t\t\t&& this.train.world.rails[newCursorX][this.train.path[newCursorX]].to.length < 2) {\r\n\t\t\t\tnewCursorX++;\r\n\t\t\t}\r\n\t\t\tconsole.log(newCursorX);\r\n\t\t\tthis.cursorX = newCursorX;\r\n\t\t\tthis.cursorY = this.train.path[newCursorX];\r\n\r\n\t\t\tthis.cursor.x = this.cursorX * World.PIECE_WIDTH + World.PIECE_WIDTH2;\r\n\t\t\tthis.cursor.y = this.cursorY * World.PIECE_HEIGHT + World.PIECE_HEIGHT2;\r\n\t\t// }\r\n\t}\r\n\r\n\tdisplay() {\r\n\t\tvar cursor = new PIXI.Graphics();\r\n\t\tcursor.width = SwitchCursor.SIZE;\r\n\t\tcursor.height = SwitchCursor.SIZE;\r\n\r\n\t\tcursor.lineStyle(SwitchCursor.WIDTH, 0xff0000, 0.8);\r\n\t\tcursor.drawEllipse(0, 0, SwitchCursor.SIZE, SwitchCursor.SIZE);\r\n\r\n\t\tthis.cursor = cursor;\r\n\t\tthis.addChild(cursor);\r\n\t}\r\n\r\n\tdisplayPath() {\r\n\t\tif(this.path) {\r\n\t\t\tthis.removeChild(this.path);\r\n\t\t}\r\n\t\tvar path = new PIXI.Graphics();\r\n\t\t\r\n\t\tpath.lineStyle(SwitchCursor.WIDTH, 0xffff00, 0.5);\r\n\t\tpath.moveTo(World.PIECE_WIDTH, World.PIECE_HEIGHT2);\r\n\t\tfor (var i=0; i < this.train.path.length; i++) {\r\n\t\t\tpath.lineTo(World.PIECE_WIDTH * i + World.PIECE_WIDTH2, World.PIECE_HEIGHT * this.train.path[i] + World.PIECE_HEIGHT2);\r\n\t\t}\r\n\t\tpath.endFill();\r\n\r\n\t\tthis.path = path;\r\n\t\tthis.addChild(path);\r\n\t}\r\n\r\n\tswitchCursor(value) {\r\n\t\tif(this.cursorX !== undefined && this.cursorY !== undefined) {\r\n\t\t\tvar railPiece = this.train.world.rails[this.cursorX][this.cursorY];\r\n\r\n\t\t\tvar oldTo = railPiece.getTo();\r\n\t\t\tvar oldFrom = railPiece.getFrom();\r\n\t\t\t\r\n\t\t\trailPiece.switchPrefered(this.train.direction, value);\r\n\t\t\t\r\n\t\t\tif(oldTo != railPiece.getTo() || oldFrom != railPiece.getFrom()) {\r\n\t\t\t\tthis.train.recalculatePath(this.cursorX);\r\n\t\t\t\tthis.displayPath();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSwitchCursor.WIDTH = 4;\r\nSwitchCursor.SIZE = 12;\n\n\n// WEBPACK FOOTER //\n// ./src/world/SwitchCursor.js","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 13\n// module chunks = 0","'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._61);\n  p._81 = 1;\n  p._65 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._81 === 3) {\n            val = val._65;\n          }\n          if (val._81 === 1) return res(i, val._65);\n          if (val._81 === 2) reject(val._65);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/es6-extensions.js\n// module id = 14\n// module chunks = 0","'use strict';\n\nvar Promise = require('./core');\n\nvar DEFAULT_WHITELIST = [\n  ReferenceError,\n  TypeError,\n  RangeError\n];\n\nvar enabled = false;\nexports.disable = disable;\nfunction disable() {\n  enabled = false;\n  Promise._10 = null;\n  Promise._97 = null;\n}\n\nexports.enable = enable;\nfunction enable(options) {\n  options = options || {};\n  if (enabled) disable();\n  enabled = true;\n  var id = 0;\n  var displayId = 0;\n  var rejections = {};\n  Promise._10 = function (promise) {\n    if (\n      promise._81 === 2 && // IS REJECTED\n      rejections[promise._72]\n    ) {\n      if (rejections[promise._72].logged) {\n        onHandled(promise._72);\n      } else {\n        clearTimeout(rejections[promise._72].timeout);\n      }\n      delete rejections[promise._72];\n    }\n  };\n  Promise._97 = function (promise, err) {\n    if (promise._45 === 0) { // not yet handled\n      promise._72 = id++;\n      rejections[promise._72] = {\n        displayId: null,\n        error: err,\n        timeout: setTimeout(\n          onUnhandled.bind(null, promise._72),\n          // For reference errors and type errors, this almost always\n          // means the programmer made a mistake, so log them after just\n          // 100ms\n          // otherwise, wait 2 seconds to see if they get handled\n          matchWhitelist(err, DEFAULT_WHITELIST)\n            ? 100\n            : 2000\n        ),\n        logged: false\n      };\n    }\n  };\n  function onUnhandled(id) {\n    if (\n      options.allRejections ||\n      matchWhitelist(\n        rejections[id].error,\n        options.whitelist || DEFAULT_WHITELIST\n      )\n    ) {\n      rejections[id].displayId = displayId++;\n      if (options.onUnhandled) {\n        rejections[id].logged = true;\n        options.onUnhandled(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      } else {\n        rejections[id].logged = true;\n        logError(\n          rejections[id].displayId,\n          rejections[id].error\n        );\n      }\n    }\n  }\n  function onHandled(id) {\n    if (rejections[id].logged) {\n      if (options.onHandled) {\n        options.onHandled(rejections[id].displayId, rejections[id].error);\n      } else if (!rejections[id].onUnhandled) {\n        console.warn(\n          'Promise Rejection Handled (id: ' + rejections[id].displayId + '):'\n        );\n        console.warn(\n          '  This means you can ignore any previous messages of the form \"Possible Unhandled Promise Rejection\" with id ' +\n          rejections[id].displayId + '.'\n        );\n      }\n    }\n  }\n}\n\nfunction logError(id, error) {\n  console.warn('Possible Unhandled Promise Rejection (id: ' + id + '):');\n  var errStr = (error && (error.stack || error)) + '';\n  errStr.split('\\n').forEach(function (line) {\n    console.warn('  ' + line);\n  });\n}\n\nfunction matchWhitelist(error, list) {\n  return list.some(function (cls) {\n    return error instanceof cls;\n  });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/lib/rejection-tracking.js\n// module id = 15\n// module chunks = 0","\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.jss\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/promise/~/asap/browser-raw.js\n// module id = 16\n// module chunks = 0","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/whatwg-fetch/fetch.js\n// module id = 17\n// module chunks = 0"],"sourceRoot":""}